/*! For license information please see main.7c314747.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},151:function(e,t,n){var r=n(878);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,I=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:I,optional:x,repeat:_,partial:b,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},878:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,I=60107,E=60108,T=60114,S=60109,C=60110,A=60112,N=60113,R=60120,D=60115,P=60116,O=60121,L=60128,M=60129,U=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;_=V("react.element"),x=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),T=V("react.profiler"),S=V("react.provider"),C=V("react.context"),A=V("react.forward_ref"),N=V("react.suspense"),R=V("react.suspense_list"),D=V("react.memo"),P=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),U=V("react.offscreen"),F=V("react.legacy_hidden")}var j,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function H(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return W(e.type);case O:return W(e._render);case P:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Ue=!1,Fe=!1;function Ve(){null===Ce&&null===Ae||(Le(),De())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Ge=null,He=!1,We=null,Qe={onError:function(e){Ke=!0,Ge=e}};function $e(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,ze.apply(Qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),At=St("animationiteration"),Nt=St("animationstart"),Rt=St("transitionend"),Dt=new Map,Pt=new Map,Ot=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ut(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ut(s),i=Mt):0!==(u&=a)&&(r=Ut(u),i=Mt)}else 0!==(a=n&~o)?(r=Ut(a),i=Mt):0!==u&&(r=Ut(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ut(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?jt(10,t):e;case 10:return 0===(e=Bt(192&~t))?jt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Ht|0)|0},Gt=Math.log,Ht=Math.LN2;var Wt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Ue||Le();var i=Jt,a=Ue;Ue=!0;try{Oe(i,e,t,n,r)}finally{(Ue=a)||Ve()}}function Xt(e,t,n,r){Qt(Wt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(bn),xn=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var An=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(An),Rn=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(On),Mn=[9,13,27,32],Un=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Vn=f&&"TextEvent"in window&&!Fn,jn=f&&(!Un||Fn&&8<Fn&&11>=Fn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Ur(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Xn(e){Ar(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Qn(t,Yn,e,Te(e)),e=Xn,Ue)e(t);else{Ue=!0;try{Pe(e,t)}finally{Ue=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function sr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Ur(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Ge;Ke=!1,Ge=null,He||(He=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(He)throw e=We,He=!1,We=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Rr]||(e[Rr]=!0,u.forEach((function(t){Sr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Or(a,e,i,t),o.add(u))}function Or(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Me(e,t,n)}finally{Fe=!1,Ve()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Dt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Ct:case At:case Nt:s=wn;break;case Rt:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&Vr(o,u,s,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Wn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Un)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(m=Ur(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Un&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Wr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Jr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,W(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Ui={},Fi=void 0!==Ai?Ai:function(){},Vi=null,ji=null,Bi=!1,qi=Ni(),zi=1e4>qi?Ni:function(){return Ni()-qi};function Ki(){switch(Ri()){case Di:return 99;case Pi:return 98;case Oi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Di;case 98:return Pi;case 97:return Oi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Gi(e),Ei(e,t)}function Wi(e,t,n){return e=Gi(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}$i()}function $i(){if(!Bi&&null!==Vi){Bi=!0;var e=0;try{var t=Vi;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ti(Di,Qi),n}finally{Bi=!1}}}var Yi=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Uo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Ws(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ws(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xs(t,e.mode,n)).return=e,t}if(_a(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ws(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(_a(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Ra=ci(Ca);function Da(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Ra,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Oa(){li(Aa),li(Na),li(Ra)}function La(e){Da(Ra.current);var t=Da(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Ua=ci(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Va=e);qa(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Va=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Ha(e){if(e!==Va)return!1;if(!Ba)return Ga(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=ja;t;)qa(e,t),t=Qr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Wa(){ja=Va=null,Ba=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ya=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Po:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Do,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Uo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Uo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function _o(e,t){return wo(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Ki();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ro(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Do={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Uo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ws(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Uo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Uo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_s(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_s(t,e),null;t.memoizedState={baseLanes:0},_s(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_s(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Wo(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,$o,Yo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Ua.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ua,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Hs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hs(o,u),null!==e?r=Hs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ua.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ua,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Oa(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Da(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Aa.current),Ha(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Jr]=t,r[Zr]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Nr(Tr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Nr(Tr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?_e(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Ra.current),Da(Aa.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Ua),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ua.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Pu||0===(134217727&Bu)&&0===(134217727&qu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ua),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ua,1&Ua.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Hu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ua.current,fi(Ua,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Ua),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ua),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return xs(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Aa.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Wr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Us(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Us(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function _u(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):Iu(e,n,t)}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?_e(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Du=0,Pu=null,Ou=null,Lu=0,Mu=0,Uu=ci(0),Fu=0,Vu=null,ju=0,Bu=0,qu=0,zu=0,Ku=null,Gu=0,Hu=1/0;function Wu(){Hu=zi()+500}var Qu,$u=null,Yu=!1,Xu=null,Ju=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Du)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=ju),0!==Yi.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Du)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Pu&&(qu|=t,4===Fu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Du)&&0===(48&Du)?ks(e):(ys(e,n),0===Du&&(Wu(),Qi())):(0===(4&Du)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ut(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Ui&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ui&&Si(n)}15===t?(n=ks.bind(null,e),null===Vi?(Vi=[n],ji=Ti(Di,$i)):Vi.push(n),n=Ui):14===t?n=Wi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Wi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Du))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Du;Du|=16;var a=Ts();for(Pu===e&&Lu===r||(Wu(),Is(e,r));;)try{As();break}catch(s){Es(e,s)}if(na(),Nu.current=a,Du=i,null!==Ou?r=0:(Pu=null,Lu=0,r=Fu),0!==(ju&qu))Is(e,0);else if(0!==r){if(2===r&&(Du|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(n=Vt(e))&&(r=Ss(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ds(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ds.bind(null,e),r);break}Ds(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Gr(Ds.bind(null,e),n);break}Ds(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Du))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&qu)&&(n=Ss(e,t=Ft(e,t)))}else n=Ss(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Du|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(t=Vt(e))&&(n=Ss(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e),ys(e,zi()),null}function ws(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&(Wu(),Qi())}}function bs(e,t){var n=Du;Du&=-2,Du|=8;try{return e(t)}finally{0===(Du=n)&&(Wu(),Qi())}}function _s(e,t){fi(Uu,Mu),Mu|=t,ju|=t}function xs(){Mu=Uu.current,li(Uu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Oa(),li(pi),li(di),$a();break;case 5:Ma(r);break;case 4:Oa();break;case 13:case 19:li(Ua);break;case 10:ra(r);break;case 23:case 24:xs()}n=n.return}Pu=e,Ou=Hs(e.current,null),Lu=Mu=ju=t,Fu=0,Vu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Ou;try{if(na(),Ya.current=Do,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Ru.current=null,null===n||null===n.return){Fu=1,Vu=t,Ou=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ua.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((W(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ju||!Ju.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(x){t=x,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function Ts(){var e=Nu.current;return Nu.current=Do,null===e?Do:e}function Ss(e,t){var n=Du;Du|=16;var r=Ts();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Du=n,Nu.current=r,null!==Ou)throw Error(o(261));return Pu=null,Lu=0,Fu}function Cs(){for(;null!==Ou;)Ns(Ou)}function As(){for(;null!==Ou&&!Ci();)Ns(Ou)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Ou=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ou=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ou=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Fu&&(Fu=5)}function Ds(e){var t=Ki();return Hi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Du))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Ou=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Du,Du|=32,Ru.current=null,Br=$t,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Os()}catch(T){if(null===$u)throw Error(o(330));js($u,T),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var w=$u.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:_u($u),$u.flags&=-3;break;case 6:_u($u),$u.flags&=-3,Tu($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Tu($u.alternate,$u);break;case 4:Tu($u.alternate,$u);break;case 8:Eu(u,s=$u);var _=s.alternate;wu(s),null!==_&&wu(_)}$u=$u.nextEffect}}catch(T){if(null===$u)throw Error(o(330));js($u,T),$u=$u.nextEffect}}while(null!==$u);if(b=qr,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,_=Math.min(u.start,s),u=void 0===u.end?_:Math.min(u.end,s),!b.extend&&_>u&&(s=u,u=_,_=s),s=pr(k,_),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),_>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!Br,qr=Br=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var x=$u.flags;if(36&x&&mu(k,$u.alternate,$u),128&x){w=void 0;var I=$u.ref;if(null!==I){var E=$u.stateNode;$u.tag,w=E,"function"===typeof I?I(w):I.current=w}}$u=$u.nextEffect}}catch(T){if(null===$u)throw Error(o(330));js($u,T),$u=$u.nextEffect}}while(null!==$u);$u=null,Fi(),Du=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((x=$u).sibling=null,x.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),Yu)throw Yu=!1,e=Xu,Xu=null,e;return 0!==(8&Du)||Qi(),null}function Os(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&yu(e,$u),0===(512&t)||Zu||(Zu=!0,Wi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Hi(e,Fs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Wi(97,(function(){return Ls(),null})))}function Us(e,t){rs.push(t,e),Zu||(Zu=!0,Wi(97,(function(){return Ls(),null})))}function Fs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Du))throw Error(o(331));var t=Du;Du|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Du=t,Qi(),!0}function Vs(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Fu||3===Fu&&(62914560&Lu)===Lu&&500>zi()-Gu?Is(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=ju),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ws(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Ks(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Ks(19,n,t,i)).elementType=R,e.lanes=a,e;case U:return $s(n,i,a,t);case F:return(e=Ks(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case A:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e;case O:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=U,e.lanes=n,e}function Ys(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Uo=!0;else{if(0===(n&r)){switch(Uo=!1,t.tag){case 3:Wo(t),Wa();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Ua,1&Ua.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Ua,1&Ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ua,Ua.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Uo=0!==(16384&e.flags)}else Uo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Wo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Wa(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Wa();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Jo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Ji,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),jo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Oe=function(e,t,n,r,i){var a=Du;Du|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Du=a)&&(Wu(),Qi())}},Le=function(){0===(49&Du)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Du;Du|=2;try{return e(t)}finally{0===(Du=n)&&(Wu(),Qi())}};var sc={Events:[ri,ii,ai,Re,De,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Du;if(0!==(48&n))return e(t);Du|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Du=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,A=null,N=3,R=!1,D=!1,P=!1;function O(e){for(var t=x(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(P=!1,O(e),!D)if(null!==x(T))D=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){D=!1,P&&(P=!1,i()),R=!0;var a=N;try{for(O(n),A=x(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===x(T)&&I(T),O(n)}else I(T);A=x(T)}if(null!==A)var s=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,R=!1}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||R||(D=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,_(T,e),D||R||(D=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Dyslexia-discrimination-test/",function(){"use strict";var e={};function t(e){if(Array.isArray(e))return e}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,n){return t(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,n)||i(e,n)||a()}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}n.r(e),n.d(e,{FirebaseError:function(){return nt},SDK_VERSION:function(){return mn},_DEFAULT_ENTRY_NAME:function(){return rn},_addComponent:function(){return sn},_addOrOverwriteComponent:function(){return cn},_apps:function(){return on},_clearComponents:function(){return dn},_components:function(){return un},_getProvider:function(){return fn},_registerComponent:function(){return ln},_removeServiceInstance:function(){return hn},deleteApp:function(){return bn},getApp:function(){return kn},getApps:function(){return wn},initializeApp:function(){return gn},onLog:function(){return In},registerVersion:function(){return xn},setLogLevel:function(){return En}});var c=n(791),l=n(7),f=n.n(l);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function d(e){return"/"===e.charAt(0)}function p(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var v=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&d(e),o=t&&d(t),u=a||o;if(e&&d(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?p(i,l):".."===f?(p(i,l),c++):c&&(p(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&d(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h},y="Invariant failed";function m(e,t){if(!e)throw new Error(y)}function g(e){return"/"===e.charAt(0)?e:"/"+e}function k(e){return"/"===e.charAt(0)?e.substr(1):e}function w(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function b(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function _(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function x(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=h({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=v(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function I(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function T(e,t){t(window.confirm(e))}var S="popstate",C="hashchange";function A(){try{return window.history.state||{}}catch(e){return{}}}function N(e){void 0===e&&{},E||m(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?T:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?b(g(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&w(a,f),x(a,r,n)}function p(){return Math.random().toString(36).substr(2,l)}var v=I();function y(e){h(j,e),j.length=t.length,v.notifyListeners(j.location,j.action)}function k(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(d(e.state))}function N(){D(d(A()))}var R=!1;function D(e){if(R)!1,y();else{v.confirmTransitionTo(e,"POP",s,(function(t){t?y({action:"POP",location:e}):function(e){var t=j.location,n=O.indexOf(t.key);-1===n&&0;var r=O.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}var P=d(A()),O=[P.key];function L(e){return f+_(e)}function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?(window.addEventListener(S,k),r&&window.addEventListener(C,N)):0===U&&(window.removeEventListener(S,k),r&&window.removeEventListener(C,N))}var V=!1;var j={length:t.length,action:"POP",location:P,createHref:L,push:function(e,r){var i="PUSH",a=x(e,r,p(),j.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=O.indexOf(j.location.key),l=O.slice(0,c+1);l.push(a.key),l,y({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=x(e,r,p(),j.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=O.indexOf(j.location.key);-1!==c&&(O[c]=a.key),y({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return V||(F(1),!0),function(){return V&&(!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return j}var R="hashchange",D={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+k(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:k,decodePath:g},slash:{encodePath:g,decodePath:g}};function P(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function L(e){window.location.replace(P(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),E||m(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?T:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?b(g(e.basename)):"",s=D[o],c=s.encodePath,l=s.decodePath;function f(){var e=l(O());return u&&(e=w(e,u)),x(e)}var d=I();function p(e){h(j,e),j.length=t.length,d.notifyListeners(j.location,j.action)}var v=!1,y=null;function k(){var e=O(),t=c(e);if(e!==t)L(t);else{var n=f(),r=j.location;if(!v&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(y===_(n))return;y=null,function(e){if(v)v=!1,p();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=j.location,n=N.lastIndexOf(_(t));-1===n&&(n=0);var r=N.lastIndexOf(_(e));-1===r&&(r=0);var i=n-r;i&&(v=!0,M(i))}(e)}))}}(n)}}var S=O(),C=c(S);S!==C&&L(C);var A=f(),N=[_(A)];function M(e){t.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?window.addEventListener(R,k):0===U&&window.removeEventListener(R,k)}var V=!1;var j={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=P(window.location.href)),n+"#"+c(u+_(e))},push:function(e,t){var n="PUSH",r=x(e,void 0,void 0,j.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_(r),i=c(u+t);if(O()!==i){y=t,function(e){window.location.hash=e}(i);var a=N.lastIndexOf(_(j.location)),o=N.slice(0,a+1);o.push(t),N=o,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=x(e,void 0,void 0,j.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_(r),i=c(u+t);O()!==i&&(y=t,L(i));var a=N.indexOf(_(j.location));-1!==a&&(N[a]=t),p({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return V||(F(1),V=!0),function(){return V&&(V=!1,F(-1)),t()}},listen:function(e){var t=d.appendListener(e);return F(1),function(){F(-1),t()}}};return j}function U(e,t,n){return Math.min(Math.max(e,t),n)}function F(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=I();function l(e){h(m,e),m.length=m.entries.length,c.notifyListeners(m.location,m.action)}function f(){return Math.random().toString(36).substr(2,s)}var d=U(o,0,i.length-1),p=i.map((function(e){return x(e,void 0,"string"===typeof e?f():e.key||f())})),v=_;function y(e){var t=U(m.index+e,0,m.entries.length-1),r=m.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=x(e,t,f(),m.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=x(e,t,f(),m.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,l({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return m}var V=n(151),j=n.n(V);n(228);function B(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var q=1073741823,z="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function K(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var G=c.createContext||function(e,t){var n,r,i="__create-react-context-"+function(){var e="__global_unique_id__";return z[e]=(z[e]||0)+1}()+"__",a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=K(t.props.value),t}s(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[i]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):q,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(c.Component);a.childContextTypes=((n={})[i]=f().object.isRequired,n);var o=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}s(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?q:t},r.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?q:e},r.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},r.getValue=function(){return this.context[i]?this.context[i].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(c.Component);return o.contextTypes=((r={})[i]=f().object,r),{Provider:a,Consumer:o}},H=function(e){var t=G();return t.displayName=e,t},W=H("Router-History"),Q=H("Router"),$=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}s(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return c.createElement(Q.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},c.createElement(W.Provider,{children:this.props.children||null,value:this.props.history}))},t}(c.Component);c.Component;c.Component;var Y={},X=0;function J(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Y[n]||(Y[n]={});if(r[e])return r[e];var i=[],a={regexp:j()(e,i,t),keys:i};return X<1e4&&(r[e]=a,X++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var Z=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this;return c.createElement(Q.Consumer,null,(function(t){t||m(!1);var n=e.props.location||t.location,r=h({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?J(n.pathname,e.props):t.match}),i=e.props,a=i.children,o=i.component,u=i.render;return Array.isArray(a)&&function(e){return 0===c.Children.count(e)}(a)&&(a=null),c.createElement(Q.Provider,{value:r},r.match?a?"function"===typeof a?a(r):a:o?c.createElement(o,r):u?u(r):null:"function"===typeof a?a(r):null)}))},t}(c.Component);function ee(e){return"/"===e.charAt(0)?e:"/"+e}function te(e,t){if(!e)return t;var n=ee(e);return 0!==t.pathname.indexOf(n)?t:h({},t,{pathname:t.pathname.substr(n.length)})}function ne(e){return"string"===typeof e?e:_(e)}function re(e){return function(){m(!1)}}function ie(){}c.Component;var ae=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this;return c.createElement(Q.Consumer,null,(function(t){t||m(!1);var n,r,i=e.props.location||t.location;return c.Children.forEach(e.props.children,(function(e){if(null==r&&c.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?J(i.pathname,h({},e.props,{path:a})):t.match}})),r?c.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(c.Component);var oe=c.useContext;function ue(){return oe(W)}c.Component;var se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=M(t.props),t}return s(t,e),t.prototype.render=function(){return c.createElement($,{history:this.history,children:this.props.children})},t}(c.Component);var ce=function(e,t){return"function"===typeof e?e(t):e},le=function(e,t){return"string"===typeof e?x(e,null,null,t):e},fe=function(e){return e},he=c.forwardRef;"undefined"===typeof he&&(he=fe);var de=he((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=B(e,["innerRef","navigate","onClick"]),o=a.target,u=h({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||o&&"_self"!==o||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=fe!==he&&t||n,c.createElement("a",u)}));var pe=he((function(e,t){var n=e.component,r=void 0===n?de:n,i=e.replace,a=e.to,o=e.innerRef,u=B(e,["component","replace","to","innerRef"]);return c.createElement(Q.Consumer,null,(function(e){e||m(!1);var n=e.history,s=le(ce(a,e.location),e.location),l=s?n.createHref(s):"",f=h({},u,{href:l,navigate:function(){var t=ce(a,e.location),r=_(e.location)===_(le(t));(i||r?n.replace:n.push)(t)}});return fe!==he?f.ref=t||o:f.innerRef=o,c.createElement(r,f)}))})),ve=function(e){return e},ye=c.forwardRef;"undefined"===typeof ye&&(ye=ve);ye((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,a=void 0===i?"active":i,o=e.activeStyle,u=e.className,s=e.exact,l=e.isActive,f=e.location,d=e.sensitive,p=e.strict,v=e.style,y=e.to,g=e.innerRef,k=B(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return c.createElement(Q.Consumer,null,(function(e){e||m(!1);var n=f||e.location,i=le(ce(y,n),n),w=i.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=b?J(n.pathname,{path:b,exact:s,sensitive:d,strict:p}):null,x=!!(l?l(_,n):_),I="function"===typeof u?u(x):u,E="function"===typeof v?v(x):v;x&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,a),E=h({},E,o));var T=h({"aria-current":x&&r||null,className:I,style:E,to:i},k);return ve!==ye?T.ref=t||g:T.innerRef=g,c.createElement(pe,T)}))}));var me=n(184),ge=function(){return(0,me.jsx)("img",{src:"img/test.png"})},ke=n.p+"static/media/main.d5d9a802c92f63f69fe6.png",we=n.p+"static/media/step1.1a3fbd01647166d7df92.png",be=n.p+"static/media/step2.30a271e3384e7d146aa3.png",_e=n.p+"static/media/step3.0944995f980e139fe73f.png",xe=n.p+"static/media/step4.ee7d5f7717e2c6f4da86.png";var Ie=function(){return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("img",{className:"intro_logo",src:"img/main.png",onError:function(e){e.target.src=ke}}),(0,me.jsx)("br",{}),(0,me.jsx)("img",{className:"intro_step",src:"img/step1.png",onError:function(e){e.target.src=we}}),(0,me.jsx)("img",{className:"intro_step",src:"img/step2.png",onError:function(e){e.target.src=be}}),(0,me.jsx)("img",{className:"intro_step",src:"img/step3.png",onError:function(e){e.target.src=_e}}),(0,me.jsx)("img",{className:"intro_step",src:"img/step4.png",onError:function(e){e.target.src=xe}})]})};function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Le(e,t){if(t&&("object"===Oe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}function Me(e){var t=Pe();return function(){var n,r=De(e);if(t){var i=De(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Le(this,n)}}function Ue(e,t,n){return Ue=Pe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},Ue.apply(null,arguments)}function Fe(e){var t="function"===typeof Map?new Map:void 0;return Fe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ue(e,arguments,De(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},Fe(e)}var Ve=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ve(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Be=function(e){return function(e){var t=Ve(e);return je.encodeByteArray(t,!0)}(e).replace(/\./g,"")},qe=function(e){try{return je.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Ke(n)&&(e[n]=ze(e[n],t[n]));return e}function Ke(e){return"__proto__"!==e}function Ge(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function He(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function We(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Qe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function $e(){var e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ye(){return"object"===typeof indexedDB}var Xe=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Je=function(){try{return Xe()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Dyslexia-discrimination-test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyB4YqfsYrQd-AiRLKlaXnasDgvPfNfdlZ8",REACT_APP_APP_ID:"1:1028777862495:web:ce13e63476565decc302ea",REACT_APP_AUTH_DOMAIN:"dyslexia-discrimination-test.firebaseapp.com",REACT_APP_MESSAGIN_ID:"1028777862495",REACT_APP_PROJECT_ID:"dyslexia-discrimination-test",REACT_APP_STORAGE_BUCKET:"dyslexia-discrimination-test.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&qe(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ze=function(){var e;return null===(e=Je())||void 0===e?void 0:e.config},et=function(){function e(){var t=this;Te(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ce(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function tt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(a)),""].join(".")}var nt=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Ne(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ne(a),rt.prototype.create),a}return Ce(n)}(Fe(Error)),rt=function(){function e(t,n,r){Te(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ce(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?it(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new nt(n,a,t);return o}}]),e}();function it(e,t){return e.replace(at,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var at=/\{\$([^}]+)}/g;function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ut(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(st(u)&&st(s)){if(!ut(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function st(e){return null!==e&&"object"===typeof e}function ct(e){for(var t=[],n=function(){var e=o(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function lt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=o(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ft(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ht(e,t){var n=new dt(e,t);return n.subscribe.bind(n)}var dt=function(){function e(t,n){var r=this;Te(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ce(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ae(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=pt),void 0===r.error&&(r.error=pt),void 0===r.complete&&(r.complete=pt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function pt(){}function vt(e){return e&&e._delegate?e._delegate:e}function yt(){yt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(T([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Oe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function mt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function gt(e){return function(e){if(Array.isArray(e))return r(e)}(e)||mt(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function wt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){kt(a,r,i,o,u,"next",e)}function u(e){kt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var bt=function(){function e(t,n,r){Te(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ce(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),_t="[DEFAULT]",xt=function(){function e(t,n){Te(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ce(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new et;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:_t})}catch(c){}var t,n=Ae(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(gt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),gt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=Ae(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=o(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){u.e(h)}finally{u.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(_I){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===_t?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(_I){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return this.component?this.component.multipleInstances?e:_t:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var It,Et,Tt=function(){function e(t){Te(this,e),this.name=t,this.providers=new Map}return Ce(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new xt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),St=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Et||(Et={}));var Ct={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},At=Et.INFO,Nt=(Ee(It={},Et.DEBUG,"log"),Ee(It,Et.VERBOSE,"log"),Ee(It,Et.INFO,"info"),Ee(It,Et.WARN,"warn"),Ee(It,Et.ERROR,"error"),It),Rt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Nt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Dt=function(){function e(t){Te(this,e),this.name=t,this._logLevel=At,this._logHandler=Rt,this._userLogHandler=null,St.push(this)}return Ce(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Et))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ct[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Et.DEBUG].concat(t)),this._logHandler.apply(this,[this,Et.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Et.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Et.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Et.INFO].concat(t)),this._logHandler.apply(this,[this,Et.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Et.WARN].concat(t)),this._logHandler.apply(this,[this,Et.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Et.ERROR].concat(t)),this._logHandler.apply(this,[this,Et.ERROR].concat(t))}}]),e}();function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt,Mt;var Ut=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,jt=new WeakMap,Bt=new WeakMap;var qt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ft.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Vt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function zt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Mt||(Mt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ht(this),n),Gt(Ut.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gt(e.apply(Ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ht(this),t].concat(r));return Vt.set(a,t.sort?t.sort():[t]),Gt(a)}}function Kt(e){return"function"===typeof e?zt(e):(e instanceof IDBTransaction&&function(e){if(!Ft.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ft.set(e,t)}}(e),t=e,(Lt||(Lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,qt):e);var t}function Gt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Gt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ut.set(t,e)})).catch((function(){})),Bt.set(t,e),t}(e);if(jt.has(e))return jt.get(e);var t=Kt(e);return t!==e&&(jt.set(e,t),Bt.set(t,e)),t}var Ht=function(e){return Bt.get(e)};var Wt,Qt,$t=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],Xt=new Map;function Jt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Xt.get(t))return Xt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Yt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||$t.includes(n))){var a=function(){var e=wt(yt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Xt.set(t,a),a}}}qt=function(e){return Ot(Ot({},e),{},{get:function(t,n,r){return Jt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Jt(t,n)||e.has(t,n)}})}(qt);var Zt=function(){function e(t){Te(this,e),this.container=t}return Ce(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var en="@firebase/app",tn="0.8.4",nn=new Dt("@firebase/app"),rn="[DEFAULT]",an=(Ee(Wt={},en,"fire-core"),Ee(Wt,"@firebase/app-compat","fire-core-compat"),Ee(Wt,"@firebase/analytics","fire-analytics"),Ee(Wt,"@firebase/analytics-compat","fire-analytics-compat"),Ee(Wt,"@firebase/app-check","fire-app-check"),Ee(Wt,"@firebase/app-check-compat","fire-app-check-compat"),Ee(Wt,"@firebase/auth","fire-auth"),Ee(Wt,"@firebase/auth-compat","fire-auth-compat"),Ee(Wt,"@firebase/database","fire-rtdb"),Ee(Wt,"@firebase/database-compat","fire-rtdb-compat"),Ee(Wt,"@firebase/functions","fire-fn"),Ee(Wt,"@firebase/functions-compat","fire-fn-compat"),Ee(Wt,"@firebase/installations","fire-iid"),Ee(Wt,"@firebase/installations-compat","fire-iid-compat"),Ee(Wt,"@firebase/messaging","fire-fcm"),Ee(Wt,"@firebase/messaging-compat","fire-fcm-compat"),Ee(Wt,"@firebase/performance","fire-perf"),Ee(Wt,"@firebase/performance-compat","fire-perf-compat"),Ee(Wt,"@firebase/remote-config","fire-rc"),Ee(Wt,"@firebase/remote-config-compat","fire-rc-compat"),Ee(Wt,"@firebase/storage","fire-gcs"),Ee(Wt,"@firebase/storage-compat","fire-gcs-compat"),Ee(Wt,"@firebase/firestore","fire-fst"),Ee(Wt,"@firebase/firestore-compat","fire-fst-compat"),Ee(Wt,"fire-js","fire-js"),Ee(Wt,"firebase","fire-js-all"),Wt),on=new Map,un=new Map;function sn(e,t){try{e.container.addComponent(t)}catch(n){nn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function cn(e,t){e.container.addOrOverwriteComponent(t)}function ln(e){var t=e.name;if(un.has(t))return nn.debug("There were multiple attempts to register component ".concat(t,".")),!1;un.set(t,e);var n,r=Ae(on.values());try{for(r.s();!(n=r.n()).done;){sn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function fn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rn;fn(e,t).clearInstance(n)}function dn(){un.clear()}var pn=(Ee(Qt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(Qt,"bad-app-name","Illegal App name: '{$appName}"),Ee(Qt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ee(Qt,"app-deleted","Firebase App named '{$appName}' already deleted"),Ee(Qt,"no-options","Need to provide options, when not being deployed to hosting via source."),Ee(Qt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ee(Qt,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ee(Qt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ee(Qt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ee(Qt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ee(Qt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Qt),vn=new rt("app","Firebase",pn),yn=function(){function e(t,n,r){var i=this;Te(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bt("app",(function(){return i}),"PUBLIC"))}return Ce(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}]),e}(),mn="9.14.0";function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:rn,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw vn.create("bad-app-name",{appName:String(a)});if(n||(n=Ze()),!n)throw vn.create("no-options");var o=on.get(a);if(o){if(ut(n,o.options)&&ut(i,o.config))return o;throw vn.create("duplicate-app",{appName:a})}var u,s=new Tt(a),c=Ae(un.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new yn(n,i,s);return on.set(a,f),f}function kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=on.get(e);if(!t&&e===rn)return gn();if(!t)throw vn.create("no-app",{appName:e});return t}function wn(){return Array.from(on.values())}function bn(e){return _n.apply(this,arguments)}function _n(){return(_n=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!on.has(n)){e.next=6;break}return on.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e,t,n){var r,i=null!==(r=an[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void nn.warn(u.join(" "))}ln(new bt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function In(e,t){if(null!==e&&"function"!==typeof e)throw vn.create("invalid-log-argument");!function(e,t){var n,r=Ae(St);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ct[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Et[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function En(e){var t;t=e,St.forEach((function(e){e.setLogLevel(t)}))}var Tn="firebase-heartbeat-store",Sn=null;function Cn(){return Sn||(Sn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Gt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Gt(u.result),e.oldVersion,e.newVersion,Gt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Tn)}}).catch((function(e){throw vn.create("idb-open",{originalErrorMessage:e.message})}))),Sn}function An(e){return Nn.apply(this,arguments)}function Nn(){return Nn=wt(yt().mark((function e(t){var n,r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn();case 3:return r=e.sent,e.abrupt("return",r.transaction(Tn).objectStore(Tn).get(Pn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof nt?nn.warn(e.t0.message):(i=vn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),nn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Nn.apply(this,arguments)}function Rn(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=wt(yt().mark((function e(t,n){var r,i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn();case 3:return i=e.sent,a=i.transaction(Tn,"readwrite"),o=a.objectStore(Tn),e.next=8,o.put(n,Pn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof nt?nn.warn(e.t0.message):(u=vn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),nn.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Dn.apply(this,arguments)}function Pn(e){return"".concat(e.name,"!").concat(e.options.appId)}var On=function(){function e(t){var n=this;Te(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Vn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ce(e,[{key:"triggerHeartbeat",value:function(){var e=wt(yt().mark((function e(){var t,n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ln(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ln(),n=Mn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Be(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ln(){return(new Date).toISOString().substring(0,10)}function Mn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Ae(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),jn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),jn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Un,Fn,Vn=function(){function e(t){Te(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ce(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ye()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,An(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Rn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Rn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(gt(r.heartbeats),gt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function jn(e){return Be(JSON.stringify({version:2,heartbeats:e})).length}Un="",ln(new bt("platform-logger",(function(e){return new Zt(e)}),"PRIVATE")),ln(new bt("heartbeat",(function(e){return new On(e)}),"PRIVATE")),xn(en,tn,Un),xn(en,tn,"esm2017"),xn("fire-js","");var Bn=function(){function e(t,n){var r=this;Te(this,e),this._delegate=t,this.firebase=n,sn(t,new bt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ce(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),bn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){sn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){cn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),qn=(Ee(Fn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(Fn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Fn),zn=new rt("app-compat","Firebase",qn);var Kn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=gn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ot(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:xn,setLogLevel:En,onLog:In,apps:null,SDK_VERSION:mn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ln(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw zn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ze(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ot(n,e=e||rn))throw zn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Bn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ze(n,e)},createSubscribe:ht,ErrorFactory:rt,deepExtend:ze}),n}(),Gn=new Dt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Gn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Hn=self.firebase.SDK_VERSION;Hn&&Hn.indexOf("LITE")>=0&&Gn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Wn=Kn;!function(e){xn("@firebase/app-compat","0.1.39",e)}();function Qn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=De(e)););return e}function $n(){return $n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Qn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},$n.apply(this,arguments)}Wn.registerVersion("firebase","9.14.0","app-compat");function Yn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Xn;Object.create;var Jn="facebook.com",Zn="github.com",er="google.com",tr="password",nr="twitter.com",rr="EMAIL_SIGNIN",ir="PASSWORD_RESET",ar="RECOVER_EMAIL",or="REVERT_SECOND_FACTOR_ADDITION",ur="VERIFY_AND_CHANGE_EMAIL",sr="VERIFY_EMAIL";function cr(){return Ee({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var lr=function(){var e;return Ee(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ee(e,"argument-error",""),Ee(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ee(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ee(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ee(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ee(e,"cordova-not-ready","Cordova framework is not ready."),Ee(e,"cors-unsupported","This browser is not supported."),Ee(e,"credential-already-in-use","This credential is already associated with a different user account."),Ee(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ee(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ee(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ee(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ee(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ee(e,"email-already-in-use","The email address is already in use by another account."),Ee(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ee(e,"expired-action-code","The action code has expired."),Ee(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ee(e,"internal-error","An internal AuthError has occurred."),Ee(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ee(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ee(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ee(e,"invalid-auth-event","An internal AuthError has occurred."),Ee(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ee(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ee(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ee(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ee(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ee(e,"invalid-email","The email address is badly formatted."),Ee(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ee(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ee(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ee(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ee(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ee(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ee(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ee(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ee(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ee(e,"wrong-password","The password is invalid or the user does not have a password."),Ee(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ee(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ee(e,"invalid-provider-id","The specified provider ID is invalid."),Ee(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ee(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ee(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ee(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ee(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ee(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ee(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ee(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ee(e,"missing-continue-uri","A continue URL must be provided in the request."),Ee(e,"missing-iframe-start","An internal AuthError has occurred."),Ee(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ee(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ee(e,"missing-multi-factor-info","No second factor identifier is provided."),Ee(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ee(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ee(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ee(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ee(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ee(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ee(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ee(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ee(e,"no-auth-event","An internal AuthError has occurred."),Ee(e,"no-such-provider","User was not linked to an account with the given provider."),Ee(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ee(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ee(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ee(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ee(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ee(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ee(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ee(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ee(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ee(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ee(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ee(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ee(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ee(e,"timeout","The operation has timed out."),Ee(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ee(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ee(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ee(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ee(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ee(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ee(e,"unverified-email","The operation requires a verified email."),Ee(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ee(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ee(e,"user-disabled","The user account has been disabled by an administrator."),Ee(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ee(e,"user-signed-out",""),Ee(e,"weak-password","The password must be 6 characters long or more."),Ee(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ee(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},fr=cr,hr=new rt("auth","Firebase",cr()),dr=new Dt("@firebase/auth");function pr(e){if(dr.logLevel<=Et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dr.error.apply(dr,["Auth (".concat(mn,"): ").concat(e)].concat(n))}}function vr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw kr.apply(void 0,[e].concat(n))}function yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kr.apply(void 0,[e].concat(n))}function mr(e,t,n){var r=Object.assign(Object.assign({},fr()),Ee({},t,n));return new rt("auth","Firebase",r).create(t,{appName:e.name})}function gr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&vr(e,"argument-error"),mr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=gt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(gt(o)))}return hr.create.apply(hr,[e].concat(n))}function wr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw kr.apply(void 0,[t].concat(r))}}function br(e){var t="INTERNAL ASSERTION FAILED: "+e;throw pr(t),new Error(t)}function _r(e,t){e||br(t)}var xr=new Map;function Ir(e){_r(e instanceof Function,"Expected a class definition");var t=xr.get(e);return t?(_r(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xr.set(e,t),t)}function Er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Cr=function(){function e(t,n){Te(this,e),this.shortDelay=t,this.longDelay=n,_r(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())||Qe()}return Ce(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Tr()||We()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ar(e,t){_r(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Nr=function(){function e(){Te(this,e)}return Ce(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Rr=(Ee(Xn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ee(Xn,"MISSING_CUSTOM_TOKEN","internal-error"),Ee(Xn,"INVALID_IDENTIFIER","invalid-email"),Ee(Xn,"MISSING_CONTINUE_URI","internal-error"),Ee(Xn,"INVALID_PASSWORD","wrong-password"),Ee(Xn,"MISSING_PASSWORD","internal-error"),Ee(Xn,"EMAIL_EXISTS","email-already-in-use"),Ee(Xn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ee(Xn,"INVALID_IDP_RESPONSE","invalid-credential"),Ee(Xn,"INVALID_PENDING_TOKEN","invalid-credential"),Ee(Xn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ee(Xn,"MISSING_REQ_TYPE","internal-error"),Ee(Xn,"EMAIL_NOT_FOUND","user-not-found"),Ee(Xn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ee(Xn,"EXPIRED_OOB_CODE","expired-action-code"),Ee(Xn,"INVALID_OOB_CODE","invalid-action-code"),Ee(Xn,"MISSING_OOB_CODE","internal-error"),Ee(Xn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ee(Xn,"INVALID_ID_TOKEN","invalid-user-token"),Ee(Xn,"TOKEN_EXPIRED","user-token-expired"),Ee(Xn,"USER_NOT_FOUND","user-token-expired"),Ee(Xn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ee(Xn,"INVALID_CODE","invalid-verification-code"),Ee(Xn,"INVALID_SESSION_INFO","invalid-verification-id"),Ee(Xn,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ee(Xn,"MISSING_SESSION_INFO","missing-verification-id"),Ee(Xn,"SESSION_EXPIRED","code-expired"),Ee(Xn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ee(Xn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ee(Xn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ee(Xn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ee(Xn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ee(Xn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ee(Xn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ee(Xn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ee(Xn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ee(Xn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ee(Xn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Xn),Dr=new Cr(3e4,6e4);function Pr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Or(e,t,n,r){return Lr.apply(this,arguments)}function Lr(){return Lr=wt(yt().mark((function e(t,n,r,i){var a,o=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Mr(t,a,wt(yt().mark((function e(){var a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ct(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Nr.fetch()(jr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(e,t,n){return Ur.apply(this,arguments)}function Ur(){return(Ur=wt(yt().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d,p;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Rr),n),e.prev=2,a=new Br(t),e.next=6,Promise.race([r(),a.promise]);case 6:return u=e.sent,a.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw qr(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=o(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw qr(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw qr(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw qr(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw mr(t,p,d);case 34:vr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof nt)){e.next=41;break}throw e.t0;case 41:vr(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Fr(e,t,n,r){return Vr.apply(this,arguments)}function Vr(){return Vr=wt(yt().mark((function e(t,n,r,i){var a,o,u=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Or(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&vr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function jr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ar(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Br=function(){function e(t){var n=this;Te(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(yr(n.auth,"network-request-failed"))}),Dr.get())}))}return Ce(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function qr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=yr(e,t,r);return i.customData._tokenResponse=n,i}function zr(e,t){return Kr.apply(this,arguments)}function Kr(){return(Kr=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Yr(){return Yr=wt(yt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=vt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,wr((a=Jr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:$r(Xr(a.auth_time)),issuedAtTime:$r(Xr(a.iat)),expirationTime:$r(Xr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function Xr(e){return 1e3*Number(e)}function Jr(e){var t,n=o(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return pr("JWT malformed, contained fewer than 3 sections"),null;try{var u=qe(i);return u?JSON.parse(u):(pr("Failed to decode base64 JWT payload"),null)}catch(s){return pr("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function Zr(e,t){return ei.apply(this,arguments)}function ei(){return ei=wt(yt().mark((function e(t,n){var r=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof nt&&ti(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ei.apply(this,arguments)}function ti(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ni=function(){function e(t){Te(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ce(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ri=function(){function e(t,n){Te(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ce(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=$r(this.lastLoginAt),this.creationTime=$r(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ii(e){return ai.apply(this,arguments)}function ai(){return ai=wt(yt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Zr(t,Wr(r,{idToken:i}));case 6:wr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?si(o.providerUserInfo):[],s=ui(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ri(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(){return(oi=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(t),e.next=3,ii(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ui(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(gt(n),gt(t))}function si(e){return e.map((function(e){var t=e.providerId,n=Yn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function ci(e,t){return li.apply(this,arguments)}function li(){return(li=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(t,{},wt(yt().mark((function e(){var r,i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ct({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=jr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Nr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fi=function(){function e(){Te(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ce(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){wr(e.idToken,"internal-error"),wr("undefined"!==typeof e.idToken,"internal-error"),wr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Jr(e);return wr(t,"internal-error"),wr("undefined"!==typeof t.exp,"internal-error"),wr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=wt(yt().mark((function e(t){var n,r=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],wr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ci(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return br("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(wr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(wr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(wr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function hi(e,t){wr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var di=function(){function e(t){Te(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Yn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?gt(a.providerData):[],this.metadata=new ri(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ce(e,[{key:"getIdToken",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(wr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Yr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return oi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=wt(yt().mark((function e(t){var n,r,i=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ii(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Zr(this,zr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;wr(k&&x,t,"internal-error");var I=fi.fromJSON(this.name,x);wr("string"===typeof k,t,"internal-error"),hi(f,t.name),hi(h,t.name),wr("boolean"===typeof w,t,"internal-error"),wr("boolean"===typeof b,t,"internal-error"),hi(d,t.name),hi(p,t.name),hi(v,t.name),hi(y,t.name),hi(m,t.name),hi(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=wt(yt().mark((function t(n,r){var i,a,o,u=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new fi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ii(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),pi=function(){function e(){Te(this,e),this.type="NONE",this.storage={}}return Ce(e,[{key:"_isAvailable",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();pi.type="NONE";var vi=pi;function yi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var mi=function(){function e(t,n,r){Te(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=yi(this.userKey,a.apiKey,o),this.fullPersistenceKey=yi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ce(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?di._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=wt(yt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ir(vi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ir(vi),u=yi(i,n.config.apiKey,n.name),s=null,c=Ae(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=di._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function gi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_i(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ki(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ii(t))return"Blackberry";if(Ei(t))return"Webos";if(wi(t))return"Safari";if((t.includes("chrome/")||bi(t))&&!t.includes("edge/"))return"Chrome";if(xi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ki(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/firefox\//i.test(e)}function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/crios\//i.test(e)}function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/iemobile/i.test(e)}function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/android/i.test(e)}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/blackberry/i.test(e)}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/webos/i.test(e)}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Si(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return Ti(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ci(){return $e()&&10===document.documentMode}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return Ti(e)||xi(e)||Ei(e)||Ii(e)||/windows phone/i.test(e)||_i(e)}function Ni(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=gi(Ge());break;case"Worker":t="".concat(gi(Ge()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mn,"/").concat(r)}var Ri=function(){function e(t){Te(this,e),this.auth=t,this.queue=[]}return Ce(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=wt(yt().mark((function e(t){var n,r,i,a,o,u,s,c;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Ae(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Ae(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Di=function(){function e(t,n,r){Te(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oi(this),this.idTokenSubscription=new Oi(this),this.beforeStateQueue=new Ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ce(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ir(t)),this._initializationPromise=this.queue(wt(yt().mark((function r(){var i,a;return yt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,mi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=wt(yt().mark((function e(t){var n,r,i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return wr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ii(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?vt(t):null)&&wr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=wt(yt().mark((function e(t){var n,r=this,i=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&wr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(wt(yt().mark((function n(){return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ir(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new rt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return wr(n=t&&Ir(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,mi.create(this,[Ir(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=wt(yt().mark((function e(t){var n=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return wr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=wt(yt().mark((function e(){var t,n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pi(e){return vt(e)}var Oi=function(){function e(t){var n=this;Te(this,e),this.auth=t,this.observer=null,this.addObserver=ht((function(e){return n.observer=e}))}return Ce(e,[{key:"next",get:function(){return wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Li(e,t,n){var r=Pi(e);wr(r._canInitEmulator,r,"emulator-config-failed"),wr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Mi(t),u=function(e){var t=Mi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ui(r.substr(a.length+1))}}var u=o(r.split(":"),2);return{host:u[0],port:Ui(u[1])}}(t),s=u.host,c=u.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Mi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ui(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Fi=function(){function e(t,n){Te(this,e),this.providerId=t,this.signInMethod=n}return Ce(e,[{key:"toJSON",value:function(){return br("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return br("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return br("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return br("not implemented")}}]),e}();function Vi(e,t){return ji.apply(this,arguments)}function ji(){return(ji=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:resetPassword",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(e,t){return Ki.apply(this,arguments)}function Ki(){return(Ki=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:update",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t){return Hi.apply(this,arguments)}function Hi(){return(Hi=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithPassword",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(e,t){return Qi.apply(this,arguments)}function Qi(){return(Qi=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:sendOobCode",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return(Ji=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return(ea=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return(na=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return(ia=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return(oa=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ua=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Te(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ce(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Gi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ra(t,{email:this._email,oobCode:this._password}));case 5:vr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Bi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",aa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:vr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Fi);function sa(e,t){return ca.apply(this,arguments)}function ca(){return(ca=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithIdp",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=function(e){Re(n,e);var t=Me(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ce(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return sa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,sa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ct(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Yn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Fi);function fa(e,t){return ha.apply(this,arguments)}function ha(){return(ha=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:sendVerificationCode",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function da(){return(da=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(){return(pa=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw qr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var va=Ee({},"USER_NOT_FOUND","user-not-found");function ya(){return(ya=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,r),va));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ma=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ce(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return pa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ya.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Fi);var ga=function(){function e(t){var n,r,i,a,o,u;Te(this,e);var s=lt(ft(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);wr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ce(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=lt(ft(e)).link,n=t?lt(ft(t)).deep_link_id:null,r=lt(ft(e)).deep_link_id;return(r?lt(ft(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(_I){return null}}}]),e}();var ka=function(){function e(){Te(this,e),this.providerId=e.PROVIDER_ID}return Ce(e,null,[{key:"credential",value:function(e,t){return ua._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ga.parseLink(t);return wr(n,"argument-error"),ua._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ka.PROVIDER_ID="password",ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var wa=function(){function e(t){Te(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ce(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ba=function(e){Re(n,e);var t=Me(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ce(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return gt(this.scopes)}}]),n}(wa),_a=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return wr(e.idToken||e.accessToken,"argument-error"),la._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return wr("providerId"in t&&"signInMethod"in t,"argument-error"),la._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ba),xa=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.call(this,"facebook.com")}return Ce(n,null,[{key:"credential",value:function(e){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(_I){return null}}}]),n}(ba);xa.FACEBOOK_SIGN_IN_METHOD="facebook.com",xa.PROVIDER_ID="facebook.com";var Ia=function(e){Re(n,e);var t=Me(n);function n(){var e;return Te(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ce(n,null,[{key:"credential",value:function(e,t){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(_I){return null}}}]),n}(ba);Ia.GOOGLE_SIGN_IN_METHOD="google.com",Ia.PROVIDER_ID="google.com";var Ea=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.call(this,"github.com")}return Ce(n,null,[{key:"credential",value:function(e){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(_I){return null}}}]),n}(ba);Ea.GITHUB_SIGN_IN_METHOD="github.com",Ea.PROVIDER_ID="github.com";var Ta=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ce(n,[{key:"_getIdTokenResponse",value:function(e){return sa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,sa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Fi),Sa=function(e){Re(n,e);var t=Me(n);function n(e){return Te(this,n),wr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ce(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ta.fromJSON(e);return wr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ta._create(r,n)}catch(i){return null}}}]),n}(wa),Ca=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.call(this,"twitter.com")}return Ce(n,null,[{key:"credential",value:function(e,t){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(_I){return null}}}]),n}(ba);function Aa(e,t){return Na.apply(this,arguments)}function Na(){return(Na=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signUp",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ca.TWITTER_SIGN_IN_METHOD="twitter.com",Ca.PROVIDER_ID="twitter.com";var Ra=function(){function e(t){Te(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ce(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=wt(yt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,di._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Da(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=wt(yt().mark((function t(n,r,i){var a;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Da(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Da(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Pa(){return Pa=wt(yt().mark((function e(t){var n,r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ra({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Aa(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ra._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}var Oa=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a){var o,u;return Te(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Ne(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ce(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(nt);function La(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Oa._fromErrorAndOperation(e,n,t,r);throw n}))}function Ma(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ua(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),e.next=3,Ba(!0,r,n);case 3:return e.t0=Gr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ma(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Va(e,t){return ja.apply(this,arguments)}function ja(){return ja=wt(yt().mark((function e(t,n){var r,i,a=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Zr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ra._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Ba(e,t,n){return qa.apply(this,arguments)}function qa(){return(qa=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii(n);case 2:i=Ma(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",wr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=wt(yt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Zr(t,La(a,o,n,t),r);case 6:return wr((u=e.sent).idToken,a,"internal-error"),wr(s=Jr(u.idToken),a,"internal-error"),c=s.sub,wr(t.uid===c,a,"user-mismatch"),e.abrupt("return",Ra._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&vr(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ka.apply(this,arguments)}function Ga(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=wt(yt().mark((function e(t,n){var r,i,a,o,u=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,La(t,i,n);case 4:return a=e.sent,e.next=7,Ra._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Wa(e,t){return Qa.apply(this,arguments)}function Qa(){return(Qa=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(Pi(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),e.next=3,Ba(!1,r,n.providerId);case 3:return e.abrupt("return",Va(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t){return Ja.apply(this,arguments)}function Ja(){return(Ja=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",za(vt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return(eo=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithCustomToken",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(){return(to=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pi(t),e.next=3,Za(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ra._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var no=function(){function e(t,n){Te(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ce(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ro._fromServerResponse(e,t):vr(e,"internal-error")}}]),e}(),ro=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ce(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(no);function io(e,t,n){var r;wr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),wr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(wr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(wr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ao(){return(ao=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(t),a={requestType:"PASSWORD_RESET",email:n},r&&io(i,a,r),e.next=5,Xi(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oo(){return(oo=wt(yt().mark((function e(t,n,r){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vi(vt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(){return(uo=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(vt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(e,t){return co.apply(this,arguments)}function co(){return(co=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),e.next=3,Vi(r,{oobCode:n});case 3:i=e.sent,wr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return wr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:wr(i.mfaInfo,r,"internal-error");case 13:wr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=no._fromServerResponse(Pi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lo(){return(lo=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,so(vt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(e,t,n){return ho.apply(this,arguments)}function ho(){return(ho=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pi(t),e.next=3,Aa(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Ra._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(){return(po=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(t),a={requestType:"EMAIL_SIGNIN",email:n},wr(r.handleCodeInApp,i,"argument-error"),r&&io(i,a,r),e.next=6,Zi(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(){return(vo=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(t),wr((a=ka.credentialWithLink(n,r||Er()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Wa(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(e,t){return mo.apply(this,arguments)}function mo(){return(mo=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:createAuthUri",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(){return(go=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tr()?Er():"http://localhost",i={identifier:n,continueUri:r},e.next=4,yo(vt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ko(){return(ko=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&io(r.auth,a,n),e.next=8,$i(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(){return(wo=wt(yt().mark((function e(t,n,r){var i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&io(i.auth,o,r),e.next=8,ta(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t){return _o.apply(this,arguments)}function _o(){return(_o=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(){return(xo=wt(yt().mark((function e(t,n){var r,i,a,o,u,s,c;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=vt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Zr(a,bo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e,t,n){return Eo.apply(this,arguments)}function Eo(){return(Eo=wt(yt().mark((function e(t,n,r){var i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Zr(t,Bi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var To=Ce((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Te(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),So=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ce(n)}(To),Co=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"facebook.com",r)}return Ce(n)}(To),Ao=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ce(n)}(So),No=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"google.com",r)}return Ce(n)}(To),Ro=function(e){Re(n,e);var t=Me(n);function n(e,r,i){return Te(this,n),t.call(this,e,"twitter.com",r,i)}return Ce(n)}(So);function Do(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Jr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new To(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Co(a,i);case"github.com":return new Ao(a,i);case"google.com":return new No(a,i);case"twitter.com":return new Ro(a,i,e.screenName||null);case"custom":case"anonymous":return new To(a,null);default:return new To(a,r,i)}}(n)}var Po=function(){function e(t,n,r){Te(this,e),this.type=t,this.credential=n,this.auth=r}return Ce(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ee({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Oo=function(){function e(t,n,r){Te(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ce(e,[{key:"resolveSignIn",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Pi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return no._fromServerResponse(r,e)}));wr(i.mfaPendingCredential,r,"internal-error");var o=Po._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=wt(yt().mark((function e(t){var a,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ra._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return wr(n.user,r,"internal-error"),e.abrupt("return",Ra._forOperation(n.user,n.operationType,u));case 17:vr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Lo(e,t){return Or(e,"POST","/v2/accounts/mfaEnrollment:start",Pr(e,t))}var Mo=function(){function e(t){var n=this;Te(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return no._fromServerResponse(t.auth,e)})))}))}return Ce(e,[{key:"getSession",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Po,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Zr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=wt(yt().mark((function e(t){var n,r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Zr(this.user,Or(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Pr(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Uo=new WeakMap;var Fo="__sak",Vo=function(){function e(t,n){Te(this,e),this.storageRetriever=t,this.type=n}return Ce(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Fo,"1"),this.storage.removeItem(Fo),Promise.resolve(!0)):Promise.resolve(!1)}catch(_I){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var jo=function(e){Re(n,e);var t=Me(n);function n(){var e;return Te(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ge();return wi(e)||Ti(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ai(),e._shouldAllowMigration=!0,e}return Ce(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ci()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=wt(yt().mark((function e(t,r){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(De(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=wt(yt().mark((function e(t){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(De(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(De(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Vo);jo.type="LOCAL";var Bo=jo,qo=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ce(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Vo);qo.type="SESSION";var zo=qo;function Ko(e){return Promise.all(e.map(function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Go=function(){function e(t){Te(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ce(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=wt(yt().mark((function e(t){var n,r,i,a,o,u,s,c;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ko(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ho(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Go.receivers=[];var Wo=function(){function e(t){Te(this,e),this.target=t,this.handlers=new Set}return Ce(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=wt(yt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ho("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Qo(){return window}function $o(){return"undefined"!==typeof Qo().WorkerGlobalScope&&"function"===typeof Qo().importScripts}function Yo(){return Xo.apply(this,arguments)}function Xo(){return(Xo=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Jo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Zo="firebaseLocalStorageDb",eu="firebaseLocalStorage",tu="fbase_key",nu=function(){function e(t){Te(this,e),this.request=t}return Ce(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ru(e,t){return e.transaction([eu],t?"readwrite":"readonly").objectStore(eu)}function iu(){var e=indexedDB.deleteDatabase(Zo);return new nu(e).toPromise()}function au(){var e=indexedDB.open(Zo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(eu,{keyPath:tu})}catch(r){n(r)}})),e.addEventListener("success",wt(yt().mark((function n(){var r;return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(eu)){n.next=12;break}return r.close(),n.next=5,iu();case 5:return n.t0=t,n.next=8,au();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ou(e,t,n){return uu.apply(this,arguments)}function uu(){return uu=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ru(t,!0).put((Ee(i={},tu,n),Ee(i,"value",r),i)),e.abrupt("return",new nu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function su(e,t){return cu.apply(this,arguments)}function cu(){return cu=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ru(t,!1).get(n),e.next=3,new nu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}function lu(e,t){var n=ru(e,!0).delete(t);return new nu(n).toPromise()}var fu=function(){function e(){Te(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ce(e,[{key:"_openDb",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,au();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$o()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=wt(yt().mark((function e(){var t=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Go._getInstance($o()?self:null),this.receiver._subscribe("keyChanged",function(){var e=wt(yt().mark((function e(n,r){var i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=wt(yt().mark((function e(){var t,n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Wo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Jo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,au();case 5:return t=e.sent,e.next=8,ou(t,Fo,"1");case 8:return e.next=10,lu(t,Fo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=wt(yt().mark((function e(t,n){var r=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ou(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return su(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=wt(yt().mark((function e(t){var n=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return lu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ru(e,!1).getAll();return new nu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ae(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();fu.type="LOCAL";var hu=fu;function du(e,t){return Or(e,"POST","/v2/accounts/mfaSignIn:start",Pr(e,t))}function pu(e){return vu.apply(this,arguments)}function vu(){return(vu=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=yr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function mu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var gu=1e12,ku=function(){function e(t){Te(this,e),this.auth=t,this.counter=gu,this._widgets=new Map}return Ce(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new wu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||gu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||gu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||gu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),wu=function(){function e(t,n,r){var i=this;Te(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;wr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ce(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var bu=mu("rcb"),_u=new Cr(3e4,6e4),xu="https://www.google.com/recaptcha/api.js?",Iu=function(){function e(){var t;Te(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Qo().grecaptcha)||void 0===t?void 0:t.render)}return Ce(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return wr(Eu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Qo().grecaptcha):new Promise((function(r,i){var a=Qo().setTimeout((function(){i(yr(e,"network-request-failed"))}),_u.get());Qo()[bu]=function(){Qo().clearTimeout(a),delete Qo()[bu];var o=Qo().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(yr(e,"internal-error"))},yu("".concat(xu,"?").concat(ct({onload:bu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(yr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Qo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Eu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Tu=function(){function e(){Te(this,e)}return Ce(e,[{key:"load",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ku(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Su="recaptcha",Cu={theme:"light",type:"image"},Au=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Cu),r=arguments.length>2?arguments[2]:void 0;Te(this,e),this.parameters=n,this.type=Su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pi(r),this.isInvisible="invisible"===this.parameters.size,wr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;wr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Tu:new Iu,this.validateStartingState()}return Ce(e,[{key:"verify",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){wr(!this.parameters.sitekey,this.auth,"argument-error"),wr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),wr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Qo()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){wr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=wt(yt().mark((function e(){var t,n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr(Tr()&&!$o(),this.auth,"internal-error"),e.next=3,Nu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,pu(this.auth);case 8:wr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return wr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Nu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ru=function(){function e(t,n){Te(this,e),this.verificationId=t,this.onConfirmation=n}return Ce(e,[{key:"confirm",value:function(e){var t=ma._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Du(){return(Du=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pi(t),e.next=3,Mu(i,n,vt(r));case 3:return a=e.sent,e.abrupt("return",new Ru(a,(function(e){return Wa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t,n){return Ou.apply(this,arguments)}function Ou(){return(Ou=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(t),e.next=3,Ba(!1,i,"phone");case 3:return e.next=5,Mu(i.auth,n,vt(r));case 5:return a=e.sent,e.abrupt("return",new Ru(a,(function(e){return $a(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(){return(Lu=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(t),e.next=3,Mu(i.auth,n,vt(r));case 3:return a=e.sent,e.abrupt("return",new Ru(a,(function(e){return Xa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t,n){return Uu.apply(this,arguments)}function Uu(){return Uu=wt(yt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,wr("string"===typeof a,t,"argument-error"),wr(r.type===Su,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return wr("enroll"===u.type,t,"internal-error"),e.next=13,Lo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return wr("signin"===u.type,t,"internal-error"),wr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,du(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,fa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Uu.apply(this,arguments)}function Fu(){return(Fu=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Va(vt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vu=function(){function e(t){Te(this,e),this.providerId=e.PROVIDER_ID,this.auth=Pi(t)}return Ce(e,[{key:"verifyPhoneNumber",value:function(e,t){return Mu(this.auth,e,vt(t))}}],[{key:"credential",value:function(e,t){return ma._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ma._fromTokenResponse(n,r):null}}]),e}();function ju(e,t){return t?Ir(t):(wr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vu.PROVIDER_ID="phone",Vu.PHONE_SIGN_IN_METHOD="phone";var Bu=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ce(n,[{key:"_getIdTokenResponse",value:function(e){return sa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return sa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return sa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Fi);function qu(e){return Ga(e.auth,new Bu(e),e.bypassAuthState)}function zu(e){var t=e.auth,n=e.user;return wr(n,t,"internal-error"),za(n,new Bu(e),e.bypassAuthState)}function Ku(e){return Gu.apply(this,arguments)}function Gu(){return(Gu=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,wr(r=t.user,n,"internal-error"),e.abrupt("return",Va(r,new Bu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Te(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ce(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=wt(yt().mark((function t(n,r){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=wt(yt().mark((function e(t){var n,r,i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qu;case"linkViaPopup":case"linkViaRedirect":return Ku;case"reauthViaPopup":case"reauthViaRedirect":return zu;default:vr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Wu=new Cr(2e3,1e4);function Qu(e,t,n){return $u.apply(this,arguments)}function $u(){return($u=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pi(t),gr(t,n,wa),a=ju(i,r),o=new Zu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(){return(Yu=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gr((i=vt(t)).auth,n,wa),a=ju(i.auth,r),o=new Zu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e,t,n){return Ju.apply(this,arguments)}function Ju(){return(Ju=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gr((i=vt(t)).auth,n,wa),a=ju(i.auth,r),o=new Zu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zu=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a,o){var u;return Te(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Ne(u),u}return Ce(n,[{key:"executeNotNull",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return wr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=wt(yt().mark((function e(){var t,n=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _r(1===this.filter.length,"Popup operations only handle one event"),t=Ho(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(yr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(yr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(yr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Wu.get())}()}}]),n}(Hu);Zu.currentPopupAction=null;var es=new Map,ts=function(e){Re(n,e);var t=Me(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Te(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ce(n,[{key:"execute",value:function(){var e=wt(yt().mark((function e(){var t,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=es.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ns(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,$n(De(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:es.set(this.auth._key(),t);case 21:return this.bypassAuthState||es.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=wt(yt().mark((function e(t){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",$n(De(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",$n(De(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Hu);function ns(e,t){return rs.apply(this,arguments)}function rs(){return rs=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(n),i=us(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(e,t){return as.apply(this,arguments)}function as(){return(as=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",us(t)._set(ss(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(e,t){es.set(e._key(),t)}function us(e){return Ir(e._redirectPersistence)}function ss(e){return yi("pendingRedirect",e.config.apiKey,e.name)}function cs(e,t,n){return function(e,t,n){return ls.apply(this,arguments)}(e,t,n)}function ls(){return(ls=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pi(t),gr(t,n,wa),a=ju(i,r),e.next=5,is(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t,n){return function(e,t,n){return hs.apply(this,arguments)}(e,t,n)}function hs(){return(hs=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gr((i=vt(t)).auth,n,wa),a=ju(i.auth,r),e.next=5,is(a,i.auth);case 5:return e.next=7,ks(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e,t,n){return function(e,t,n){return ps.apply(this,arguments)}(e,t,n)}function ps(){return(ps=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gr((i=vt(t)).auth,n,wa),a=ju(i.auth,r),e.next=5,Ba(!1,i,n.providerId);case 5:return e.next=7,is(a,i.auth);case 7:return e.next=9,ks(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e,t){return ys.apply(this,arguments)}function ys(){return(ys=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pi(t)._initializationPromise;case 2:return e.abrupt("return",ms(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(e,t){return gs.apply(this,arguments)}function gs(){return gs=wt(yt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Pi(t),a=ju(i,n),o=new ts(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function ks(e){return ws.apply(this,arguments)}function ws(){return(ws=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ho("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bs=function(){function e(t){Te(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ce(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!xs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_s(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(_s(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function _s(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function xs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Is(e){return Es.apply(this,arguments)}function Es(){return Es=wt(yt().mark((function e(t){var n,r=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Or(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}var Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ss=/^https?/;function Cs(){return(Cs=wt(yt().mark((function e(t){var n,r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Is(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ae(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!As(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:vr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function As(e){var t=Er(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ss.test(r))return!1;if(Ts.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ns=new Cr(3e4,6e4);function Rs(){var e=Qo().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=gt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Ds=null;function Ps(e){return Ds=Ds||function(e){return new Promise((function(t,n){var r,i,a;function o(){Rs(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Rs(),n(yr(e,"network-request-failed"))},timeout:Ns.get()})}if(null===(i=null===(r=Qo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Qo().gapi)||void 0===a?void 0:a.load)){var u=mu("iframefcb");return Qo()[u]=function(){gapi.load?o():n(yr(e,"network-request-failed"))},yu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Ds=null,e}))}(e),Ds}var Os=new Cr(5e3,15e3),Ls={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ms=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Us(e){var t=e.config;wr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ar(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:mn},i=Ms.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ct(r).slice(1))}function Fs(e){return Vs.apply(this,arguments)}function Vs(){return Vs=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps(t);case 2:return n=e.sent,wr(r=Qo().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Us(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ls,dontclear:!0},(function(e){return new Promise(function(){var n=wt(yt().mark((function n(r,i){var a,o,u;return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Qo().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=yr(t,"network-request-failed"),o=Qo().setTimeout((function(){i(a)}),Os.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}var js={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bs="_blank",qs="http://localhost",zs=function(){function e(t){Te(this,e),this.window=t,this.associatedEvent=null}return Ce(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ks(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},js),{width:r.toString(),height:i.toString(),top:a,left:u}),l=Ge().toLowerCase();n&&(s=bi(l)?Bs:n),ki(l)&&(t=t||qs,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=o(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Si(l)&&"_self"!==s)return Gs(t||"",s),new zs(null);var h=window.open(t||"",s,f);wr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new zs(h)}function Gs(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Hs="__/auth/handler",Ws="emulator/auth/handler";function Qs(e,t,n,r,i,a){wr(e.config.authDomain,e,"auth-domain-config-required"),wr(e.config.apiKey,e,"invalid-api-key");var u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mn,eventId:i};if(t instanceof wa){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(a||{});s<c.length;s++){var l=o(c[s],2),f=l[0],h=l[1];u[f]=h}}if(t instanceof ba){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(u.scopes=d.join(","))}e.tenantId&&(u.tid=e.tenantId);for(var p=u,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Hs);return Ar(t,Ws)}(e),"?").concat(ct(p).slice(1))}var $s="webStorageSupport",Ys=function(){function e(){Te(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zo,this._completeRedirectFn=ms,this._overrideRedirectResult=os}return Ce(e,[{key:"_openPopup",value:function(){var e=wt(yt().mark((function e(t,n,r,i){var a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _r(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Qs(t,n,r,Er(),i),e.abrupt("return",Ks(t,o,Ho()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=wt(yt().mark((function e(t,n,r,i){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Qs(t,n,r,Er(),i),Qo().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(_r(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs(t);case 2:return n=e.sent,r=new bs(t),n.register("authEvent",(function(e){return wr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($s,{type:$s},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),vr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Cs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ai()||wi()||Ti()}}]),e}(),Xs=Ys,Js=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this,"phone")).credential=e,r}return Ce(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Or(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Or(e,"POST","/v2/accounts/mfaSignIn:finalize",Pr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Te(this,e),this.factorId=t}return Ce(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return br("unexpected MultiFactorSessionType")}}}]),e}()),Zs=function(){function e(){Te(this,e)}return Ce(e,null,[{key:"assertion",value:function(e){return Js._fromCredential(e)}}]),e}();Zs.FACTOR_ID="phone";var ec="@firebase/auth",tc="0.20.11",nc=function(){function e(t){Te(this,e),this.auth=t,this.internalListeners=new Map}return Ce(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var rc;!function(e){var t;null===(t=Je())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function ic(){return window}rc="Browser",ln(new bt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){wr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),wr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:rc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(rc)},i=new Di(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ir);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ln(new bt("auth-internal",(function(e){return function(e){return new nc(e)}(Pi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),xn(ec,tc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(rc)),xn(ec,tc,"esm2017");function ac(e,t,n){return oc.apply(this,arguments)}function oc(){return oc=wt(yt().mark((function e(t,n,r){var i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ic(),o=a.BuildInfo,_r(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,hc(n.sessionId);case 4:return u=e.sent,s={},Ti()?s.ibi=o.packageName:xi()?s.apn=o.packageName:vr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Qs(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}function uc(){return(uc=wt(yt().mark((function e(t){var n,r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ic(),r=n.BuildInfo,i={},Ti()?i.iosBundleId=r.packageName:xi()?i.androidPackageName=r.packageName:vr(t,"operation-not-supported-in-this-environment"),e.next=5,Is(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sc(e){var t=ic().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function cc(e,t,n){return lc.apply(this,arguments)}function lc(){return lc=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ic(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(yr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),xi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),lc.apply(this,arguments)}function fc(e){var t,n,r,i,a,o,u,s,c,l,f=ic();wr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),wr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),wr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function hc(e){return dc.apply(this,arguments)}function dc(){return(dc=wt(yt().mark((function e(t){var n,r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(e){if(_r(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var vc=function(e){Re(n,e);var t=Me(n);function n(){var e;return Te(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ce(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),$n(De(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bs);function yc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:bc(),postBody:null,tenantId:e.tenantId,error:yr(e,"no-auth-event")}}function mc(e,t){return _c()._set(xc(e),t)}function gc(e){return kc.apply(this,arguments)}function kc(){return(kc=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_c()._get(xc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,_c()._remove(xc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wc(e,t){var n,r,i=function(e){var t=Ic(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ic(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ic(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ic(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?yr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function bc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function _c(){return Ir(Bo)}function xc(e){return yi("authEvent",e.config.apiKey,e.name)}function Ic(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var n,r=e.split("?"),o=t(n=r)||mt(n)||i(n)||a();o[0];return lt(o.slice(1).join("?"))}var Ec=function(){function e(){Te(this,e),this._redirectPersistence=zo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ms,this._overrideRedirectResult=os}return Ce(e,[{key:"_initialize",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new vc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){vr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=wt(yt().mark((function e(t,n,r,i){var a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),es.clear(),e.next=10,this._originValidation(t);case 10:return o=yc(t,r,i),e.next=13,mc(t,o);case 13:return e.next=15,ac(t,o,n);case 15:return u=e.sent,e.next=18,sc(u);case 18:return s=e.sent,e.abrupt("return",cc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return uc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=ic(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(wt(yt().mark((function n(){return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,gc(e);case 2:t.onEvent(Sc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=wt(yt().mark((function n(r){var i,a;return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,gc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=wc(i,r.url)),t.onEvent(a||Sc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");ic().handleOpenURL=function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Tc=Ec;function Sc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yr("no-auth-event")}}function Cc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ac(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return!("file:"!==Cc()&&"ionic:"!==Cc()&&"capacitor:"!==Cc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nc(){return $e()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Rc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return/Edge\/\d+/.test(e)}function Dc(){try{var e=self.localStorage,t=Ho();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();return Nc()||Rc(e)}()||Ye()}catch(n){return Pc()&&Ye()}return!1}function Pc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Oc(){return("http:"===Cc()||"https:"===Cc()||We()||Ac())&&!(Qe()||He())&&Dc()&&!Pc()}function Lc(){return Ac()&&"undefined"!==typeof document}function Mc(){return Uc.apply(this,arguments)}function Uc(){return(Uc=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fc={LOCAL:"local",NONE:"none",SESSION:"session"},Vc=wr,jc="persistence";function Bc(e,t){Vc(Object.values(Fc).includes(t),e,"invalid-persistence-type"),Qe()?Vc(t!==Fc.SESSION,e,"unsupported-persistence-type"):He()?Vc(t===Fc.NONE,e,"unsupported-persistence-type"):Pc()?Vc(t===Fc.NONE||t===Fc.LOCAL&&Ye(),e,"unsupported-persistence-type"):Vc(t===Fc.NONE||Dc(),e,"unsupported-persistence-type")}function qc(e){return zc.apply(this,arguments)}function zc(){return zc=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Kc(),r=yi(jc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),zc.apply(this,arguments)}function Kc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Gc=wr,Hc=function(){function e(){Te(this,e),this.browserResolver=Ir(Xs),this.cordovaResolver=Ir(Tc),this.underlyingResolver=null,this._redirectPersistence=zo,this._completeRedirectFn=ms,this._overrideRedirectResult=os}return Ce(e,[{key:"_initialize",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=wt(yt().mark((function e(t,n,r,i){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=wt(yt().mark((function e(t,n,r,i){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Lc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Gc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Mc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wc(e){return e.unwrap()}function Qc(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Zc(e,function(e,t){var n,r=vt(e),i=t;return wr(t.customData.operationType,r,"argument-error"),wr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Oo._fromError(r,i)}(e,t));else if(i){var a=$c(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function $c(e){var t=(e instanceof nt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof nt)&&"temporaryProof"in t&&"phoneNumber"in t)return Vu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===tr)return null;switch(r){case er:n=Ia;break;case Jn:n=xa;break;case Zn:n=Ea;break;case nr:n=Ca;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ta._create(r,u):la._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new _a(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof nt?n.credentialFromError(e):n.credentialFromResult(e)}function Yc(e,t){return t.catch((function(t){throw t instanceof nt&&Qc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,$c(t)),additionalUserInfo:Do(e),user:el.getOrCreate(r)}}))}function Xc(e,t){return Jc.apply(this,arguments)}function Jc(){return(Jc=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Yc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zc=function(){function e(t,n){Te(this,e),this.resolver=n,this.auth=t.wrapped()}return Ce(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Yc(Wc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),el=function(){function e(t){Te(this,e),this._delegate=t,this.multiFactor=function(e){var t=vt(e);return Uo.has(t)||Uo.set(t,Mo._fromUser(t)),Uo.get(t)}(t)}return Ce(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yc(this.auth,$a(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xc(this.auth,Pu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yc(this.auth,Xu(this._delegate,t,Hc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qc(Pi(this.auth));case 2:return e.abrupt("return",ds(this._delegate,t,Hc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yc(this.auth,Xa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Xc(this.auth,function(e,t,n){return Lu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Yc(this.auth,function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,Hc))}},{key:"reauthenticateWithRedirect",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qc(Pi(this.auth));case 2:return e.abrupt("return",fs(this._delegate,t,Hc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ko.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Io(vt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Io(vt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Fu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return xo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return wo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();el.USER_MAP=new WeakMap;var tl=wr,nl=function(){function e(t,n){if(Te(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;tl(r,"invalid-api-key",{appName:t.name}),tl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Hc:void 0;this._delegate=n.initialize({options:{persistence:il(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(lr),this.linkUnderlyingAuth()}return Ce(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?el.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Li(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return uo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return so(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return oo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yc(this._delegate,fo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return go.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ga.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tl(Oc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,vs(this._delegate,Hc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Yc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Pi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=rl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=rl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ao.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bc(this._delegate,t),e.t0=t,e.next=e.t0===Fc.SESSION?4:e.t0===Fc.LOCAL?6:e.t0===Fc.NONE?11:13;break;case 4:return n=zo,e.abrupt("break",14);case 6:return e.next=8,Ir(hu)._isAvailable();case 8:return r=e.sent,n=r?hu:Bo,e.abrupt("break",14);case 11:return n=vi,e.abrupt("break",14);case 13:return e.abrupt("return",vr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Yc(this._delegate,function(e){return Pa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Yc(this._delegate,Wa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Yc(this._delegate,function(e,t){return to.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Yc(this._delegate,function(e,t,n){return Wa(vt(e),ka.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Yc(this._delegate,function(e,t,n){return vo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Xc(this._delegate,function(e,t,n){return Du.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tl(Oc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Yc(this._delegate,Qu(this._delegate,t,Hc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tl(Oc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,qc(this._delegate);case 3:return e.abrupt("return",cs(this._delegate,t,Hc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return lo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function rl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&el.getOrCreate(e))},error:t,complete:n}}function il(e,t){var n=function(e,t){var n=Kc();if(!n)return[];var r=yi(jc,e,t);switch(n.getItem(r)){case Fc.NONE:return[vi];case Fc.LOCAL:return[hu,zo];case Fc.SESSION:return[zo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(hu)||n.push(hu),"undefined"!==typeof window)for(var r=0,i=[Bo,zo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(vi)||n.push(vi),n}nl.Persistence=Fc;var al=function(){function e(){Te(this,e),this.providerId="phone",this._delegate=new Vu(Wc(Wn.auth()))}return Ce(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Vu.credential(e,t)}}]),e}();al.PHONE_SIGN_IN_METHOD=Vu.PHONE_SIGN_IN_METHOD,al.PROVIDER_ID=Vu.PROVIDER_ID;var ol,ul=wr,sl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wn.app();Te(this,e),ul(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Au(t,n,i.auth()),this.type=this._delegate.type}return Ce(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(ol=Wn).INTERNAL.registerComponent(new bt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new nl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:rr,PASSWORD_RESET:ir,RECOVER_EMAIL:ar,REVERT_SECOND_FACTOR_ADDITION:or,VERIFY_AND_CHANGE_EMAIL:ur,VERIFY_EMAIL:sr}},EmailAuthProvider:ka,FacebookAuthProvider:xa,GithubAuthProvider:Ea,GoogleAuthProvider:Ia,OAuthProvider:_a,SAMLAuthProvider:Sa,PhoneAuthProvider:al,PhoneMultiFactorGenerator:Zs,RecaptchaVerifier:sl,TwitterAuthProvider:Ca,Auth:nl,AuthCredential:Fi,Error:nt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ol.registerVersion("@firebase/auth-compat","0.2.24");var cl,ll="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},fl={},hl=hl||{},dl=ll||self;function pl(){}function vl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function yl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ml="closure_uid_"+(1e9*Math.random()>>>0),gl=0;function kl(e,t,n){return e.call.apply(e.bind,arguments)}function wl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function bl(e,t,n){return(bl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kl:wl).apply(null,arguments)}function _l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function xl(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Il(){this.s=this.s,this.o=this.o}Il.prototype.s=!1,Il.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ml)&&e[ml]||(e[ml]=++gl))},Il.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var El=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Tl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Sl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(vl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Cl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Cl.prototype.h=function(){this.defaultPrevented=!0};var Al=function(){if(!dl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{dl.addEventListener("test",pl,t),dl.removeEventListener("test",pl,t)}catch(n){}return e}();function Nl(e){return/^[\s\xa0]*$/.test(e)}var Rl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Dl(e,t){return e<t?-1:e>t?1:0}function Pl(){var e=dl.navigator;return e&&(e=e.userAgent)?e:""}function Ol(e){return-1!=Pl().indexOf(e)}function Ll(e){return Ll[" "](e),e}Ll[" "]=pl;var Ml,Ul=Ol("Opera"),Fl=Ol("Trident")||Ol("MSIE"),Vl=Ol("Edge"),jl=Vl||Fl,Bl=Ol("Gecko")&&!(-1!=Pl().toLowerCase().indexOf("webkit")&&!Ol("Edge"))&&!(Ol("Trident")||Ol("MSIE"))&&!Ol("Edge"),ql=-1!=Pl().toLowerCase().indexOf("webkit")&&!Ol("Edge");function zl(){var e=dl.document;return e?e.documentMode:void 0}e:{var Kl="",Gl=function(){var e=Pl();return Bl?/rv:([^\);]+)(\)|;)/.exec(e):Vl?/Edge\/([\d\.]+)/.exec(e):Fl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ql?/WebKit\/(\S+)/.exec(e):Ul?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Gl&&(Kl=Gl?Gl[1]:""),Fl){var Hl=zl();if(null!=Hl&&Hl>parseFloat(Kl)){Ml=String(Hl);break e}}Ml=Kl}var Wl,Ql={};function $l(){return function(e){var t=Ql;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Rl(String(Ml)).split("."),n=Rl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Dl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Dl(0==a[2].length,0==o[2].length)||Dl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(dl.document&&Fl){var Yl=zl();Wl=Yl||(parseInt(Ml,10)||void 0)}else Wl=void 0;var Xl=Wl;function Jl(e,t){if(Cl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bl){e:{try{Ll(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Zl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Jl.X.h.call(this)}}xl(Jl,Cl);var Zl={2:"touch",3:"pen",4:"mouse"};Jl.prototype.h=function(){Jl.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ef="closure_listenable_"+(1e6*Math.random()|0),tf=0;function nf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++tf,this.ba=this.ea=!1}function rf(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function af(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function of(e){var t={};for(var n in e)t[n]=e[n];return t}var uf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<uf.length;a++)n=uf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function cf(e){this.src=e,this.g={},this.h=0}function lf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=El(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(rf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ff(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}cf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ff(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new nf(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var hf="closure_lm_"+(1e6*Math.random()|0),df={};function pf(e,t,n,r,i){if(r&&r.once)return yf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)pf(e,t[a],n,r,i);return null}return n=xf(n),e&&e[ef]?e.N(t,n,yl(r)?!!r.capture:!!r,i):vf(e,t,n,!1,r,i)}function vf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=yl(i)?!!i.capture:!!i,u=bf(e);if(u||(e[hf]=u=new cf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=wf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Al||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(kf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)yf(e,t[a],n,r,i);return null}return n=xf(n),e&&e[ef]?e.O(t,n,yl(r)?!!r.capture:!!r,i):vf(e,t,n,!0,r,i)}function mf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)mf(e,t[a],n,r,i);else r=yl(r)?!!r.capture:!!r,n=xf(n),e&&e[ef]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ff(a=e.g[t],n,r,i))&&(rf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=bf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ff(t,n,r,i)),(n=-1<e?t[e]:null)&&gf(n))}function gf(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ef])lf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(kf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=bf(t))?(lf(n,e),0==n.h&&(n.src=null,t[hf]=null)):rf(e)}}}function kf(e){return e in df?df[e]:df[e]="on"+e}function wf(e,t){if(e.ba)e=!0;else{t=new Jl(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&gf(e),e=n.call(r,t)}return e}function bf(e){return(e=e[hf])instanceof cf?e:null}var _f="__closure_events_fn_"+(1e9*Math.random()>>>0);function xf(e){return"function"===typeof e?e:(e[_f]||(e[_f]=function(t){return e.handleEvent(t)}),e[_f])}function If(){Il.call(this),this.i=new cf(this),this.P=this,this.I=null}function Ef(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Cl(t,e);else if(t instanceof Cl)t.target=t.target||e;else{var i=t;sf(t=new Cl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Tf(o,r,!0,t)&&i}if(i=Tf(o=t.g=e,r,!0,t)&&i,i=Tf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Tf(o=t.g=n[a],r,!1,t)&&i}function Tf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&lf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}xl(If,Il),If.prototype[ef]=!0,If.prototype.removeEventListener=function(e,t,n,r){mf(this,e,t,n,r)},If.prototype.M=function(){if(If.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rf(n[r]);delete t.g[e],t.h--}}this.I=null},If.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},If.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Sf=dl.JSON.stringify;function Cf(){var e=Mf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Af,Nf=function(){function e(){Te(this,e),this.h=this.g=null}return Ce(e,[{key:"add",value:function(e,t){var n=Rf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Rf=new(function(){function e(t,n){Te(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ce(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Df}),(function(e){return e.reset()})),Df=function(){function e(){Te(this,e),this.next=this.g=this.h=null}return Ce(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Pf(e){dl.setTimeout((function(){throw e}),0)}function Of(e,t){Af||function(){var e=dl.Promise.resolve(void 0);Af=function(){e.then(Uf)}}(),Lf||(Af(),Lf=!0),Mf.add(e,t)}var Lf=!1,Mf=new Nf;function Uf(){for(var e;e=Cf();){try{e.h.call(e.g)}catch(n){Pf(n)}var t=Rf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Lf=!1}function Ff(e,t){If.call(this),this.h=e||1,this.g=t||dl,this.j=bl(this.lb,this),this.l=Date.now()}function Vf(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function jf(e,t,n){if("function"===typeof e)n&&(e=bl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=bl(e.handleEvent,e)}return 2147483647<Number(t)?-1:dl.setTimeout(e,t||0)}function Bf(e){e.g=jf((function(){e.g=null,e.i&&(e.i=!1,Bf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}xl(Ff,If),(cl=Ff.prototype).ca=!1,cl.R=null,cl.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ef(this,"tick"),this.ca&&(Vf(this),this.start()))}},cl.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},cl.M=function(){Ff.X.M.call(this),Vf(this),delete this.g};var qf=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ce(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Bf(this)}},{key:"M",value:function(){$n(De(n.prototype),"M",this).call(this),this.g&&(dl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Il);function zf(e){Il.call(this),this.h=e,this.g={}}xl(zf,Il);var Kf=[];function Gf(e,t,n,r){Array.isArray(n)||(n&&(Kf[0]=n.toString()),n=Kf);for(var i=0;i<n.length;i++){var a=pf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Hf(e){af(e.g,(function(e,t){this.g.hasOwnProperty(t)&&gf(e)}),e),e.g={}}function Wf(){this.g=!0}function Qf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Sf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}zf.prototype.M=function(){zf.X.M.call(this),Hf(this)},zf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wf.prototype.Aa=function(){this.g=!1},Wf.prototype.info=function(){};var $f={},Yf=null;function Xf(){return Yf=Yf||new If}function Jf(e){Cl.call(this,$f.Pa,e)}function Zf(e){var t=Xf();Ef(t,new Jf(t))}function eh(e,t){Cl.call(this,$f.STAT_EVENT,e),this.stat=t}function th(e){var t=Xf();Ef(t,new eh(t,e))}function nh(e,t){Cl.call(this,$f.Qa,e),this.size=t}function rh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return dl.setTimeout((function(){e()}),t)}$f.Pa="serverreachability",xl(Jf,Cl),$f.STAT_EVENT="statevent",xl(eh,Cl),$f.Qa="timingevent",xl(nh,Cl);var ih={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ah={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function oh(){}function uh(e){return e.h||(e.h=e.i())}function sh(){}oh.prototype.h=null;var ch,lh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function fh(){Cl.call(this,"d")}function hh(){Cl.call(this,"c")}function dh(){}function ph(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new zf(this),this.O=yh,e=jl?125:void 0,this.T=new Ff(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new vh}function vh(){this.i=null,this.g="",this.h=!1}xl(fh,Cl),xl(hh,Cl),xl(dh,oh),dh.prototype.g=function(){return new XMLHttpRequest},dh.prototype.i=function(){return{}},ch=new dh;var yh=45e3,mh={},gh={};function kh(e,t,n){e.K=1,e.v=Fh(Ph(t)),e.s=n,e.P=!0,wh(e,null)}function wh(e,t){e.F=Date.now(),Ih(e),e.A=Ph(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Xh(n.i,"t",r),e.C=0,n=e.l.H,e.h=new vh,e.g=Jd(e.l,n?t:null,!e.s),0<e.N&&(e.L=new qf(bl(e.La,e,e.g),e.N)),Gf(e.S,e.g,"readystatechange",e.ib),t=e.H?of(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Zf(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function bh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function _h(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=xh(e,n))==gh){4==t&&(e.o=4,th(14),i=!1),Qf(e.j,e.m,null,"[Incomplete Response]");break}if(r==mh){e.o=4,th(15),Qf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qf(e.j,e.m,r,null),Ah(e,r)}bh(e)&&r!=gh&&r!=mh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,th(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kd(t),t.K=!0,th(11))):(Qf(e.j,e.m,n,"[Invalid Chunked Response]"),Ch(e),Sh(e))}function xh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?gh:(n=Number(t.substring(n,r)),isNaN(n)?mh:(r+=1)+n>t.length?gh:(t=t.substr(r,n),e.C=r+n,t))}function Ih(e){e.V=Date.now()+e.O,Eh(e,e.O)}function Eh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=rh(bl(e.gb,e),t)}function Th(e){e.B&&(dl.clearTimeout(e.B),e.B=null)}function Sh(e){0==e.l.G||e.I||Wd(e.l,e)}function Ch(e){Th(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Vf(e.T),Hf(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ah(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ad(n.h,e)))if(!e.J&&ad(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Hd(n),Md(n)}zd(n),th(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=rh(bl(n.cb,n),6e3));if(1>=id(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else $d(n,11)}else if((e.J||n.g==e)&&Hd(n),!Nl(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(od(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Uh(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Xd(r,r.H?r.ka:null,r.V),d.J){ud(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Th(p),Ih(p)),r.g=d}else qd(r);0<n.i.length&&Fd(n)}else"stop"!=a[0]&&"close"!=a[0]||$d(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?$d(n,7):Ld(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Zf()}catch(a){}}function Nh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(vl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(vl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(vl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(cl=ph.prototype).setTimeout=function(e){this.O=e},cl.ib=function(e){e=e.target;var t=this.L;t&&3==Ad(e)?t.l():this.La(e)},cl.La=function(e){try{if(e==this.g)e:{var t=Ad(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||jl||this.g&&(this.h.h||this.g.fa()||Nd(this.g)))){this.I||4!=t||7==n||Zf(),Th(this);var r=this.g.aa();this.Y=r;t:if(bh(this)){var i=Nd(this.g);e="";var a=i.length,o=4==Ad(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ch(this),Sh(this);var u="";break t}this.h.i=new dl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nl(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,th(12),Ch(this),Sh(this);break e}Qf(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ah(this,r)}this.P?(_h(this,t,u),jl&&this.i&&3==t&&(Gf(this.S,this.T,"tick",this.hb),this.T.start())):(Qf(this.j,this.m,u,null),Ah(this,u)),4==t&&Ch(this),this.i&&!this.I&&(4==t?Wd(this.l,this):(this.i=!1,Ih(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,th(12)):(this.o=0,th(13)),Ch(this),Sh(this)}}}catch(t){}},cl.hb=function(){if(this.g){var e=Ad(this.g),t=this.g.fa();this.C<t.length&&(Th(this),_h(this,e,t),this.i&&4!=e&&Ih(this))}},cl.cancel=function(){this.I=!0,Ch(this)},cl.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Zf(),th(17)),Ch(this),this.o=2,Sh(this)):Eh(this,this.V-e)};var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dh(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Dh){this.h=void 0!==t?t:e.h,Oh(this,e.j),this.s=e.s,this.g=e.g,Lh(this,e.m),this.l=e.l,t=e.i;var n=new Wh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Mh(this,n),this.o=e.o}else e&&(n=String(e).match(Rh))?(this.h=!!t,Oh(this,n[1]||"",!0),this.s=Vh(n[2]||""),this.g=Vh(n[3]||"",!0),Lh(this,n[4]),this.l=Vh(n[5]||"",!0),Mh(this,n[6]||"",!0),this.o=Vh(n[7]||"")):(this.h=!!t,this.i=new Wh(null,this.h))}function Ph(e){return new Dh(e)}function Oh(e,t,n){e.j=n?Vh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Lh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mh(e,t,n){t instanceof Wh?(e.i=t,function(e,t){t&&!e.j&&(Qh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($h(this,t),Xh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=jh(t,Gh)),e.i=new Wh(t,e.h))}function Uh(e,t,n){e.i.set(t,n)}function Fh(e){return Uh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Vh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Bh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Dh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jh(t,qh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jh(t,qh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(jh(n,"/"==n.charAt(0)?Kh:zh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jh(n,Hh)),e.join("")};var qh=/[#\/\?@]/g,zh=/[#\?:]/g,Kh=/[#\?]/g,Gh=/[#\?@]/g,Hh=/#/g;function Wh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $h(e,t){Qh(e),t=Jh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yh(e,t){return Qh(e),t=Jh(e,t),e.g.has(t)}function Xh(e,t,n){$h(e,t),0<n.length&&(e.i=null,e.g.set(Jh(e,t),Tl(n)),e.h+=n.length)}function Jh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(cl=Wh.prototype).add=function(e,t){Qh(this),this.i=null,e=Jh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},cl.forEach=function(e,t){Qh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},cl.oa=function(){Qh(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},cl.W=function(e){Qh(this);var t=[];if("string"===typeof e)Yh(this,e)&&(t=t.concat(this.g.get(Jh(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},cl.set=function(e,t){return Qh(this),this.i=null,Yh(this,e=Jh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},cl.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},cl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Zh=Ce((function e(t,n){Te(this,e),this.h=t,this.g=n}));function ed(e){this.l=e||nd,dl.PerformanceNavigationTiming?e=0<(e=dl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(dl.g&&dl.g.Ga&&dl.g.Ga()&&dl.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var td,nd=10;function rd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function id(e){return e.h?1:e.g?e.g.size:0}function ad(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function od(e,t){e.g?e.g.add(t):e.h=t}function ud(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sd(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ae(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Tl(e.i)}function cd(){}function ld(){this.g=new cd}function fd(e,t,n){var r=n||"";try{Nh(e,(function(e,n){var i=e;yl(e)&&(i=Sf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function hd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function dd(e){this.l=e.ac||null,this.j=e.jb||!1}function pd(e,t){If.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=vd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ed.prototype.cancel=function(){if(this.i=sd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ae(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},cd.prototype.stringify=function(e){return dl.JSON.stringify(e,void 0)},cd.prototype.parse=function(e){return dl.JSON.parse(e,void 0)},xl(dd,oh),dd.prototype.g=function(){return new pd(this.l,this.j)},dd.prototype.i=(td={},function(){return td}),xl(pd,If);var vd=0;function yd(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function md(e){e.readyState=4,e.l=null,e.j=null,e.A=null,gd(e)}function gd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(cl=pd.prototype).open=function(e,t){if(this.readyState!=vd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,gd(this)},cl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||dl).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},cl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,md(this)),this.readyState=vd},cl.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gd(this)),this.g&&(this.readyState=3,gd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof dl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yd(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},cl.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?md(this):gd(this),3==this.readyState&&yd(this)}},cl.Va=function(e){this.g&&(this.response=this.responseText=e,md(this))},cl.Ua=function(e){this.g&&(this.response=e,md(this))},cl.ga=function(){this.g&&md(this)},cl.setRequestHeader=function(e,t){this.v.append(e,t)},cl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},cl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(pd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var kd=dl.JSON.parse;function wd(e){If.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bd,this.K=this.L=!1}xl(wd,If);var bd="",_d=/^https?$/i,xd=["POST","PUT"];function Id(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ed(e),Sd(e)}function Ed(e){e.D||(e.D=!0,Ef(e,"complete"),Ef(e,"error"))}function Td(e){if(e.h&&"undefined"!=typeof hl&&(!e.C[1]||4!=Ad(e)||2!=e.aa()))if(e.v&&4==Ad(e))jf(e.Ha,0,e);else if(Ef(e,"readystatechange"),4==Ad(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Rh)[1]||null;if(!a&&dl.self&&dl.self.location){var o=dl.self.location.protocol;a=o.substr(0,o.length-1)}i=!_d.test(a?a.toLowerCase():"")}t=i}if(t)Ef(e,"complete"),Ef(e,"success");else{e.m=6;try{var u=2<Ad(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Ed(e)}}finally{Sd(e)}}}function Sd(e,t){if(e.g){Cd(e);var n=e.g,r=e.C[0]?pl:null;e.g=null,e.C=null,t||Ef(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Cd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(dl.clearTimeout(e.A),e.A=null)}function Ad(e){return e.g?e.g.readyState:0}function Nd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case bd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(pp){return null}}function Rd(e){var t="";return af(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Uh(e,t,n))}function Pd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Od(e){this.Ca=0,this.i=[],this.j=new Wf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Pd("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Pd("baseRetryDelayMs",5e3,e),this.bb=Pd("retryDelaySeedMs",1e4,e),this.$a=Pd("forwardChannelMaxRetries",2,e),this.ta=Pd("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new ed(e&&e.concurrentRequestLimit),this.Fa=new ld,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ld(e){if(Ud(e),3==e.G){var t=e.U++,n=Ph(e.F);Uh(n,"SID",e.I),Uh(n,"RID",t),Uh(n,"TYPE","terminate"),jd(e,n),(t=new ph(e,e.j,t,void 0)).K=2,t.v=Fh(Ph(n)),n=!1,dl.navigator&&dl.navigator.sendBeacon&&(n=dl.navigator.sendBeacon(t.v.toString(),"")),!n&&dl.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jd(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ih(t)}Yd(e)}function Md(e){e.g&&(Kd(e),e.g.cancel(),e.g=null)}function Ud(e){Md(e),e.u&&(dl.clearTimeout(e.u),e.u=null),Hd(e),e.h.cancel(),e.m&&("number"===typeof e.m&&dl.clearTimeout(e.m),e.m=null)}function Fd(e){rd(e.h)||e.m||(e.m=!0,Of(e.Ja,e),e.C=0)}function Vd(e,t){var n;n=t?t.m:e.U++;var r=Ph(e.F);Uh(r,"SID",e.I),Uh(r,"RID",n),Uh(r,"AID",e.T),jd(e,r),e.o&&e.s&&Dd(r,e.o,e.s),n=new ph(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Bd(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),od(e.h,n),kh(n,r,t)}function jd(e,t){e.ia&&af(e.ia,(function(e,n){Uh(t,n,e)})),e.l&&Nh({},(function(e,n){Uh(t,n,e)}))}function Bd(e,t,n){n=Math.min(e.i.length,n);var r=e.l?bl(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{fd(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function qd(e){e.g||e.u||(e.Z=1,Of(e.Ia,e),e.A=0)}function zd(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=rh(bl(e.Ia,e),Qd(e,e.A)),e.A++,!0)}function Kd(e){null!=e.B&&(dl.clearTimeout(e.B),e.B=null)}function Gd(e){e.g=new ph(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Ph(e.sa);Uh(t,"RID","rpc"),Uh(t,"SID",e.I),Uh(t,"CI",e.L?"0":"1"),Uh(t,"AID",e.T),Uh(t,"TYPE","xmlhttp"),jd(e,t),e.o&&e.s&&Dd(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Fh(Ph(t)),n.s=null,n.P=!0,wh(n,e)}function Hd(e){null!=e.v&&(dl.clearTimeout(e.v),e.v=null)}function Wd(e,t){var n=null;if(e.g==t){Hd(e),Kd(e),e.g=null;var r=2}else{if(!ad(e.h,t))return;n=t.D,ud(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ef(r=Xf(),new nh(r,n)),Fd(e)}else qd(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(id(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=rh(bl(e.Ja,e,t),Qd(e,e.C)),e.C++,!0))}(e,t)||2==r&&zd(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:$d(e,5);break;case 4:$d(e,10);break;case 3:$d(e,6);break;default:$d(e,2)}}function Qd(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function $d(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=bl(e.kb,e);n||(n=new Dh("//www.google.com/images/cleardot.gif"),dl.location&&"http"==dl.location.protocol||Oh(n,"https"),Fh(n)),function(e,t){var n=new Wf;if(dl.Image){var r=new Image;r.onload=_l(hd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_l(hd,n,r,"TestLoadImage: error",!1,t),r.onabort=_l(hd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_l(hd,n,r,"TestLoadImage: timeout",!1,t),dl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else th(2);e.G=0,e.l&&e.l.va(t),Yd(e),Ud(e)}function Yd(e){if(e.G=0,e.la=[],e.l){var t=sd(e.h);0==t.length&&0==e.i.length||(Sl(e.la,t),Sl(e.la,e.i),e.h.i.length=0,Tl(e.i),e.i.length=0),e.l.ua()}}function Xd(e,t,n){var r=n instanceof Dh?Ph(n):new Dh(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Lh(r,r.m);else{var i=dl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Dh(null,void 0);r&&Oh(a,r),t&&(a.g=t),i&&Lh(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Uh(r,n,t),Uh(r,"VER",e.ma),jd(e,r),r}function Jd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new wd(new dd({jb:!0})):new wd(e.ra)).Ka(e.H),t}function Zd(){}function ep(){if(Fl&&!(10<=Number(Xl)))throw Error("Environmental error: no available transport.")}function tp(e,t){If.call(this),this.g=new Od(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Nl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Nl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ip(this)}function np(e){fh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rp(){hh.call(this),this.status=1}function ip(e){this.g=e}(cl=wd.prototype).Ka=function(e){this.L=e},cl.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ch.g(),this.C=this.u?uh(this.u):uh(ch),this.g.onreadystatechange=bl(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Id(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,u=Ae(r.keys());try{for(u.s();!(a=u.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){u.e(p)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=dl.FormData&&e instanceof dl.FormData,!(0<=El(xd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=Ae(n);try{for(l.s();!(c=l.n()).done;){var f=o(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Cd(this),0<this.B&&((this.K=function(e){return Fl&&$l()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bl(this.qa,this)):this.A=jf(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Id(this,s)}},cl.qa=function(){"undefined"!=typeof hl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ef(this,"timeout"),this.abort(8))},cl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ef(this,"complete"),Ef(this,"abort"),Sd(this))},cl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sd(this,!0)),wd.X.M.call(this)},cl.Ha=function(){this.s||(this.F||this.v||this.l?Td(this):this.fb())},cl.fb=function(){Td(this)},cl.aa=function(){try{return 2<Ad(this)?this.g.status:-1}catch(td){return-1}},cl.fa=function(){try{return this.g?this.g.responseText:""}catch(td){return""}},cl.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),kd(t)}},cl.Ea=function(){return this.m},cl.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(cl=Od.prototype).ma=8,cl.G=1,cl.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ph(this,this.j,e,void 0),n=this.s;if(this.S&&(n?sf(n=of(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Bd(this,t,r),Uh(i=Ph(this.F),"RID",e),Uh(i,"CVER",22),this.D&&Uh(i,"X-HTTP-Session-Id",this.D),jd(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Rd(n)))+"&"+r:this.o&&Dd(i,this.o,n)),od(this.h,t),this.Ya&&Uh(i,"TYPE","init"),this.O?(Uh(i,"$req",r),Uh(i,"SID","null"),t.Z=!0,kh(t,i,null)):kh(t,i,r),this.G=2}}else 3==this.G&&(e?Vd(this,e):0==this.i.length||rd(this.h)||Vd(this))},cl.Ia=function(){if(this.u=null,Gd(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=rh(bl(this.eb,this),e)}},cl.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,th(10),Md(this),Gd(this))},cl.cb=function(){null!=this.v&&(this.v=null,Md(this),zd(this),th(19))},cl.kb=function(e){e?(this.j.info("Successfully pinged google.com"),th(2)):(this.j.info("Failed to ping google.com"),th(1))},(cl=Zd.prototype).xa=function(){},cl.wa=function(){},cl.va=function(){},cl.ua=function(){},cl.Ra=function(){},ep.prototype.g=function(e,t){return new tp(e,t)},xl(tp,If),tp.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;th(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Xd(e,null,e.V),Fd(e)},tp.prototype.close=function(){Ld(this.g)},tp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Sf(e),e=n);t.i.push(new Zh(t.ab++,e)),3==t.G&&Fd(t)},tp.prototype.M=function(){this.g.l=null,delete this.j,Ld(this.g),delete this.g,tp.X.M.call(this)},xl(np,fh),xl(rp,hh),xl(ip,Zd),ip.prototype.xa=function(){Ef(this.g,"a")},ip.prototype.wa=function(e){Ef(this.g,new np(e))},ip.prototype.va=function(e){Ef(this.g,new rp)},ip.prototype.ua=function(){Ef(this.g,"b")},ep.prototype.createWebChannel=ep.prototype.g,tp.prototype.send=tp.prototype.u,tp.prototype.open=tp.prototype.m,tp.prototype.close=tp.prototype.close,ih.NO_ERROR=0,ih.TIMEOUT=8,ih.HTTP_ERROR=6,ah.COMPLETE="complete",sh.EventType=lh,lh.OPEN="a",lh.CLOSE="b",lh.ERROR="c",lh.MESSAGE="d",If.prototype.listen=If.prototype.N,wd.prototype.listenOnce=wd.prototype.O,wd.prototype.getLastError=wd.prototype.Oa,wd.prototype.getLastErrorCode=wd.prototype.Ea,wd.prototype.getStatus=wd.prototype.aa,wd.prototype.getResponseJson=wd.prototype.Sa,wd.prototype.getResponseText=wd.prototype.fa,wd.prototype.send=wd.prototype.da,wd.prototype.setWithCredentials=wd.prototype.Ka;var ap=fl.createWebChannelTransport=function(){return new ep},op=fl.getStatEventTarget=function(){return Xf()},up=fl.ErrorCode=ih,sp=fl.EventType=ah,cp=fl.Event=$f,lp=fl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fp=fl.FetchXmlHttpFactory=dd,hp=fl.WebChannel=sh,dp=fl.XhrIo=wd,pp="@firebase/firestore",vp=function(){function e(t){Te(this,e),this.uid=t}return Ce(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();vp.UNAUTHENTICATED=new vp(null),vp.GOOGLE_CREDENTIALS=new vp("google-credentials-uid"),vp.FIRST_PARTY=new vp("first-party-uid"),vp.MOCK_USER=new vp("mock-user");var yp="9.14.0",mp=new Dt("@firebase/firestore");function gp(){return mp.logLevel}function kp(e){if(mp.logLevel<=Et.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(_p);mp.debug.apply(mp,["Firestore (".concat(yp,"): ").concat(e)].concat(gt(i)))}}function wp(e){if(mp.logLevel<=Et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(_p);mp.error.apply(mp,["Firestore (".concat(yp,"): ").concat(e)].concat(gt(i)))}}function bp(e){if(mp.logLevel<=Et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(_p);mp.warn.apply(mp,["Firestore (".concat(yp,"): ").concat(e)].concat(gt(i)))}}function _p(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(yp,") INTERNAL ASSERTION FAILED: ")+e;throw wp(t),new Error(t)}function Ip(e,t){e||xp()}function Ep(e,t){return e}var Tp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sp=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ce(n)}(nt),Cp=Ce((function e(){var t=this;Te(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ap=Ce((function e(t,n){Te(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Np=function(){function e(){Te(this,e)}return Ce(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(vp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Rp=function(){function e(t){Te(this,e),this.token=t,this.changeListener=null}return Ce(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Dp=function(){function e(t){Te(this,e),this.t=t,this.currentUser=vp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ce(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Cp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Cp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){kp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(kp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(kp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ip("string"==typeof n.accessToken),new Ap(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ip(null===e||"string"==typeof e),new vp(e)}}]),e}(),Pp=function(){function e(t,n,r,i){Te(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=vp.FIRST_PARTY,this.p=new Map}return Ce(e,[{key:"I",value:function(){return this.g?this.g():(Ip(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Op=function(){function e(t,n,r,i){Te(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Ce(e,[{key:"getToken",value:function(){return Promise.resolve(new Pp(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(vp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Lp=Ce((function e(t){Te(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Mp=function(){function e(t){Te(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Ce(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&kp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,kp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){kp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):kp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ip("string"==typeof t.token),e.A=t.token,new Lp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Up(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Fp=function(){function e(){Te(this,e)}return Ce(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Up(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Vp(e,t){return e<t?-1:e>t?1:0}function jp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Bp(e){return e+"\0"}var qp=function(){function e(t,n){if(Te(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Sp(Tp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Sp(Tp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Sp(Tp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Sp(Tp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ce(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Vp(this.nanoseconds,e.nanoseconds):Vp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),zp=function(){function e(t){Te(this,e),this.timestamp=t}return Ce(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new qp(0,0))}},{key:"max",value:function(){return new e(new qp(253402300799,999999999))}}]),e}(),Kp=function(){function e(t,n,r){Te(this,e),void 0===n?n=0:n>t.length&&xp(),void 0===r?r=t.length-n:r>t.length-n&&xp(),this.segments=t,this.offset=n,this.len=r}return Ce(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Gp=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,gt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Kp),Hp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wp=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Hp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Sp(Tp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Sp(Tp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Sp(Tp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Kp),Qp=function(){function e(t){Te(this,e),this.path=t}return Ce(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Gp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Gp.fromString(t))}},{key:"fromName",value:function(t){return new e(Gp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Gp.emptyPath())}},{key:"comparator",value:function(e,t){return Gp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Gp(t.slice()))}}]),e}(),$p=Ce((function e(t,n,r,i){Te(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Yp(e){return e.fields.find((function(e){return 2===e.kind}))}function Xp(e){return e.fields.filter((function(e){return 2!==e.kind}))}$p.UNKNOWN_ID=-1;var Jp=Ce((function e(t,n){Te(this,e),this.fieldPath=t,this.kind=n}));var Zp=function(){function e(t,n){Te(this,e),this.sequenceNumber=t,this.offset=n}return Ce(e,null,[{key:"empty",value:function(){return new e(0,nv.min())}}]),e}();function ev(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=zp.fromTimestamp(1e9===r?new qp(n+1,0):new qp(n,r));return new nv(i,Qp.empty(),t)}function tv(e){return new nv(e.readTime,e.key,-1)}var nv=function(){function e(t,n,r){Te(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ce(e,null,[{key:"min",value:function(){return new e(zp.min(),Qp.empty(),-1)}},{key:"max",value:function(){return new e(zp.max(),Qp.empty(),-1)}}]),e}();function rv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Qp.comparator(e.documentKey,t.documentKey))?n:Vp(e.largestBatchId,t.largestBatchId)}var iv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",av=function(){function e(){Te(this,e),this.onCommittedListeners=[]}return Ce(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ov(e){return uv.apply(this,arguments)}function uv(){return uv=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Tp.FAILED_PRECONDITION&&t.message===iv){e.next=2;break}throw t;case 2:kp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}var sv=function(){function e(t){var n=this;Te(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ce(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&xp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Ae(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),cv=function(){function e(t,n){var r=this;Te(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Cp,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new hv(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=mv(e.target.error);r.P.reject(new hv(t,n))}}return Ce(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(kp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new pv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new hv(n,t)}}}]),e}(),lv=function(){function e(t,n,r){Te(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Ge())&&wp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ce(e,[{key:"F",value:function(){var e=wt(yt().mark((function e(t){var n=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return kp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new hv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Sp(Tp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Sp(Tp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new hv(t,n))},i.onupgradeneeded=function(e){kp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){kp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=wt(yt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(yt().mark((function e(){var n,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=cv.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),sv.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,kp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return kp("SimpleDb","Removing database:",e),vv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Ye())return!1;if(e.N())return!0;var t=Ge(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Dyslexia-discrimination-test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyB4YqfsYrQd-AiRLKlaXnasDgvPfNfdlZ8",REACT_APP_APP_ID:"1:1028777862495:web:ce13e63476565decc302ea",REACT_APP_AUTH_DOMAIN:"dyslexia-discrimination-test.firebaseapp.com",REACT_APP_MESSAGIN_ID:"1028777862495",REACT_APP_PROJECT_ID:"dyslexia-discrimination-test",REACT_APP_STORAGE_BUCKET:"dyslexia-discrimination-test.appspot.com"})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),fv=function(){function e(t){Te(this,e),this.U=t,this.q=!1,this.K=null}return Ce(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return vv(this.U.delete())}}]),e}(),hv=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,Tp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ce(n)}(Sp);function dv(e){return"IndexedDbTransactionError"===e.name}var pv=function(){function e(t){Te(this,e),this.store=t}return Ce(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(kp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(kp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vv(n)}},{key:"add",value:function(e){return kp("SimpleDb","ADD",this.store.name,e,e),vv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return vv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),kp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return kp("SimpleDb","DELETE",this.store.name,e),vv(this.store.delete(e))}},{key:"count",value:function(){return kp("SimpleDb","COUNT",this.store.name),vv(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new sv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new sv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){kp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new sv((function(n,r){t.onerror=function(e){var t=mv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new sv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new fv(i),o=t(i.primaryKey,i.value,a);if(o instanceof sv){var u=o.catch((function(e){return a.done(),sv.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return sv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function vv(e){return new sv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=mv(e.target.error);n(t)}}))}var yv=!1;function mv(e){var t=lv.D(Ge());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Sp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return yv||(yv=!0,setTimeout((function(){throw r}),0)),r}}return e}var gv=function(){function e(t,n){Te(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Ce(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;kp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=kp,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!dv(e.t4)){e.next=17;break}kp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ov(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),kv=function(){function e(t,n){Te(this,e),this.localStore=t,this.persistence=n}return Ce(e,[{key:"st",value:function(){var e=wt(yt().mark((function e(){var t,n=this,r=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return sv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return kp("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return kp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=tv(t);rv(r,n)>0&&(n=r)})),new nv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),wv=function(){function e(t,n){var r=this;Te(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Ce(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function bv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _v(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}wv.at=-1;var Iv=function(){function e(t,n){Te(this,e),this.comparator=t,this.root=n||Tv.EMPTY}return Ce(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Tv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Tv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ev(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ev(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ev(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ev(this.root,e,this.comparator,!0)}}]),e}(),Ev=function(){function e(t,n,r,i){Te(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ce(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Tv=function(){function e(t,n,r,i,a){Te(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ce(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw xp();if(this.right.isRed())throw xp();var e=this.left.check();if(e!==this.right.check())throw xp();return e+(this.isRed()?0:1)}}]),e}();Tv.EMPTY=null,Tv.RED=!0,Tv.BLACK=!1,Tv.EMPTY=new(function(){function e(){Te(this,e),this.size=0}return Ce(e,[{key:"key",get:function(){throw xp()}},{key:"value",get:function(){throw xp()}},{key:"color",get:function(){throw xp()}},{key:"left",get:function(){throw xp()}},{key:"right",get:function(){throw xp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Tv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Sv=function(){function e(t){Te(this,e),this.comparator=t,this.data=new Iv(this.comparator)}return Ce(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Cv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Cv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Cv=function(){function e(t){Te(this,e),this.iter=t}return Ce(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Av(e){return e.hasNext()?e.getNext():void 0}var Nv=function(){function e(t){Te(this,e),this.fields=t,t.sort(Wp.comparator)}return Ce(e,[{key:"unionWith",value:function(t){var n,r=new Sv(Wp.comparator),i=Ae(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Ae(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Ae(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return jp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Rv=function(e){function t(e){Te(this,t),this.binaryString=e}return Ce(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Vp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Rv.EMPTY_BYTE_STRING=new Rv("");var Dv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pv(e){if(Ip(!!e),"string"==typeof e){var t=0,n=Dv.exec(e);if(Ip(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ov(e.seconds),nanos:Ov(e.nanos)}}function Ov(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Lv(e){return"string"==typeof e?Rv.fromBase64String(e):Rv.fromUint8Array(e)}function Mv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Uv(e){var t=e.mapValue.fields.__previous_value__;return Mv(t)?Uv(t):t}function Fv(e){var t=Pv(e.mapValue.fields.__local_write_time__.timestampValue);return new qp(t.seconds,t.nanos)}var Vv=Ce((function e(t,n,r,i,a,o,u,s){Te(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),jv=function(){function e(t,n){Te(this,e),this.projectId=t,this.database=n||"(default)"}return Ce(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Bv(e){return null==e}function qv(e){return 0===e&&1/e==-1/0}function zv(e){return"number"==typeof e&&Number.isInteger(e)&&!qv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Kv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gv={nullValue:"NULL_VALUE"};function Hv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mv(e)?4:oy(e)?9007199254740991:10:xp()}function Wv(e,t){if(e===t)return!0;var n=Hv(e);if(n!==Hv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fv(e).isEqual(Fv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Pv(e.timestampValue),r=Pv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Lv(e.bytesValue).isEqual(Lv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ov(e.geoPointValue.latitude)===Ov(t.geoPointValue.latitude)&&Ov(e.geoPointValue.longitude)===Ov(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ov(e.integerValue)===Ov(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ov(e.doubleValue),r=Ov(t.doubleValue);return n===r?qv(n)===qv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return jp(e.arrayValue.values||[],t.arrayValue.values||[],Wv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(bv(n)!==bv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Wv(n[i],r[i])))return!1;return!0}(e,t);default:return xp()}}function Qv(e,t){return void 0!==(e.values||[]).find((function(e){return Wv(e,t)}))}function $v(e,t){if(e===t)return 0;var n=Hv(e),r=Hv(t);if(n!==r)return Vp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ov(e.integerValue||e.doubleValue),r=Ov(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yv(e.timestampValue,t.timestampValue);case 4:return Yv(Fv(e),Fv(t));case 5:return Vp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Lv(e),r=Lv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Vp(n[i],r[i]);if(0!==a)return a}return Vp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Vp(Ov(e.latitude),Ov(t.latitude));return 0!==n?n:Vp(Ov(e.longitude),Ov(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=$v(n[i],r[i]);if(a)return a}return Vp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Kv.mapValue&&t===Kv.mapValue)return 0;if(e===Kv.mapValue)return 1;if(t===Kv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Vp(r[o],a[o]);if(0!==u)return u;var s=$v(n[r[o]],i[a[o]]);if(0!==s)return s}return Vp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw xp()}}function Yv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vp(e,t);var n=Pv(e),r=Pv(t),i=Vp(n.seconds,r.seconds);return 0!==i?i:Vp(n.nanos,r.nanos)}function Xv(e){return Jv(e)}function Jv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Pv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Lv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Qp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Ae(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Jv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Ae(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Jv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):xp();var t,n}function Zv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ey(e){return!!e&&"integerValue"in e}function ty(e){return!!e&&"arrayValue"in e}function ny(e){return!!e&&"nullValue"in e}function ry(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iy(e){return!!e&&"mapValue"in e}function ay(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return _v(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ay(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ay(e.arrayValue.values[r]);return n}return Object.assign({},e)}function oy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function uy(e){return"nullValue"in e?Gv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Zv(jv.empty(),Qp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:xp()}function sy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Zv(jv.empty(),Qp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Kv:xp()}function cy(e,t){var n=$v(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ly(e,t){var n=$v(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var fy=function(){function e(t){Te(this,e),this.value=t}return Ce(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!iy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ay(t)}},{key:"setAll",value:function(e){var t=this,n=Wp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ay(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());iy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Wv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];iy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){_v(t,(function(t,n){return e[t]=n}));var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ay(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hy(e){var t=[];return _v(e.fields,(function(e,n){var r=new Wp([e]);if(iy(n)){var i=hy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Ae(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Nv(t)}var dy=function(){function e(t,n,r,i,a,o){Te(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ce(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=zp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,zp.min(),zp.min(),fy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,zp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,zp.min(),fy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,zp.min(),fy.empty(),2)}}]),e}(),py=Ce((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Te(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function vy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new py(e,t,n,r,i,a,o)}function yy(e){var t=Ep(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Xv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Bv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Xv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Xv(e)})).join(",")),t.ht=n}return t.ht}function my(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Py(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Wv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ly(e.startAt,t.startAt)&&Ly(e.endAt,t.endAt)}function gy(e){return Qp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ky(e,t){return e.filters.filter((function(e){return e instanceof _y&&e.field.isEqual(t)}))}function wy(e,t,n){var r,i=Gv,a=!0,o=Ae(ky(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Gv,c=!0;switch(u.op){case"<":case"<=":s=uy(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Gv}cy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];cy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function by(e,t,n){var r,i=Kv,a=!0,o=Ae(ky(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Kv,c=!0;switch(u.op){case">=":case">":s=sy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Kv}ly({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ly({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var _y=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ce(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft($v(t,this.value)):null!==t&&Hv(this.value)===Hv(t)&&this.ft($v(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xp()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new xy(e,t,r):"array-contains"===t?new Sy(e,r):"in"===t?new Cy(e,r):"not-in"===t?new Ay(e,r):"array-contains-any"===t?new Ny(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Iy(e,n):new Ey(e,n)}}]),n}(function(){return Ce((function e(){Te(this,e)}))}()),xy=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,i)).key=Qp.fromName(i.referenceValue),a}return Ce(n,[{key:"matches",value:function(e){var t=Qp.comparator(e.key,this.key);return this.ft(t)}}]),n}(_y),Iy=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,"in",r)).keys=Ty("in",r),i}return Ce(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(_y),Ey=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,"not-in",r)).keys=Ty("not-in",r),i}return Ce(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(_y);function Ty(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Qp.fromName(e.referenceValue)}))}var Sy=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"array-contains",r)}return Ce(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ty(t)&&Qv(t.arrayValue,this.value)}}]),n}(_y),Cy=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"in",r)}return Ce(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qv(this.value.arrayValue,t)}}]),n}(_y),Ay=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"not-in",r)}return Ce(n,[{key:"matches",value:function(e){if(Qv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qv(this.value.arrayValue,t)}}]),n}(_y),Ny=function(e){Re(n,e);var t=Me(n);function n(e,r){return Te(this,n),t.call(this,e,"array-contains-any",r)}return Ce(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qv(t.value.arrayValue,e)}))}}]),n}(_y),Ry=Ce((function e(t,n){Te(this,e),this.position=t,this.inclusive=n})),Dy=Ce((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Te(this,e),this.field=t,this.dir=n}));function Py(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Oy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Qp.comparator(Qp.fromName(o.referenceValue),n.key):$v(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ly(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Wv(e.position[n],t.position[n]))return!1;return!0}var My=Ce((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Te(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function Uy(e,t,n,r,i,a,o,u){return new My(e,t,n,r,i,a,o,u)}function Fy(e){return new My(e)}function Vy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function jy(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function By(e){var t,n=Ae(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function qy(e){return null!==e.collectionGroup}function zy(e){var t=Ep(e);if(null===t._t){t._t=[];var n=By(t),r=jy(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Dy(n)),t._t.push(new Dy(Wp.keyField(),"asc"));else{var i,a=!1,o=Ae(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Dy(Wp.keyField(),s))}}}return t._t}function Ky(e){var t=Ep(e);if(!t.wt)if("F"===t.limitType)t.wt=vy(t.path,t.collectionGroup,zy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Ae(zy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Dy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ry(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ry(t.startAt.position,t.startAt.inclusive):null;t.wt=vy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Gy(e,t,n){return new My(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hy(e,t){return my(Ky(e),Ky(t))&&e.limitType===t.limitType}function Wy(e){return"".concat(yy(Ky(e)),"|lt:").concat(e.limitType)}function Qy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Xv(t.value));var t})).join(", "),"]")),Bv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Xv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Xv(e)})).join(",")),"Target(".concat(t,")")}(Ky(e)),"; limitType=").concat(e.limitType,")")}function $y(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Qp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ae(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ae(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Oy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zy(e),t))&&!(e.endAt&&!function(e,t,n){var r=Oy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zy(e),t))}(e,t)}function Yy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xy(e){return function(t,n){var r,i=!1,a=Ae(zy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Jy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Jy(e,t,n){var r=e.field.isKeyField()?Qp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$v(r,i):xp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xp()}}function Zy(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qv(t)?"-0":t}}function em(e){return{integerValue:""+e}}function tm(e,t){return zv(t)?em(t):Zy(e,t)}var nm=Ce((function e(){Te(this,e),this._=void 0}));function rm(e,t,n){return e instanceof om?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof um?sm(e,t):e instanceof cm?lm(e,t):function(e,t){var n=am(e,t),r=hm(n)+hm(e.yt);return ey(n)&&ey(e.yt)?em(r):Zy(e.It,r)}(e,t)}function im(e,t,n){return e instanceof um?sm(e,t):e instanceof cm?lm(e,t):n}function am(e,t){return e instanceof fm?ey(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var om=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n)}(nm),um=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).elements=e,r}return Ce(n)}(nm);function sm(e,t){var n,r=dm(t),i=Ae(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Wv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var cm=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).elements=e,r}return Ce(n)}(nm);function lm(e,t){var n,r=dm(t),i=Ae(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Wv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fm=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).It=e,i.yt=r,i}return Ce(n)}(nm);function hm(e){return Ov(e.integerValue||e.doubleValue)}function dm(e){return ty(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var pm=Ce((function e(t,n){Te(this,e),this.field=t,this.transform=n}));var vm=Ce((function e(t,n){Te(this,e),this.version=t,this.transformResults=n})),ym=function(){function e(t,n){Te(this,e),this.updateTime=t,this.exists=n}return Ce(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function mm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var gm=Ce((function e(){Te(this,e)}));function km(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Rm(e.key,ym.none()):new Im(e.key,e.data,ym.none());var n,r=e.data,i=fy.empty(),a=new Sv(Wp.comparator),o=Ae(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Em(e.key,i,new Nv(a.toArray()),ym.none())}function wm(e,t,n){e instanceof Im?function(e,t,n){var r=e.value.clone(),i=Sm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Em?function(e,t,n){if(mm(e.precondition,t)){var r=Sm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Tm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function bm(e,t,n,r){return e instanceof Im?function(e,t,n,r){if(!mm(e.precondition,t))return n;var i=e.value.clone(),a=Cm(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Em?function(e,t,n,r){if(!mm(e.precondition,t))return n;var i=Cm(e.fieldTransforms,r,t),a=t.data;return a.setAll(Tm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return mm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _m(e,t){var n,r=null,i=Ae(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=am(a.transform,o||null);null!=u&&(null===r&&(r=fy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function xm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&jp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof um&&t instanceof um||e instanceof cm&&t instanceof cm?jp(e.elements,t.elements,Wv):e instanceof fm&&t instanceof fm?Wv(e.yt,t.yt):e instanceof om&&t instanceof om}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Im=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Te(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ce(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gm),Em=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Te(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ce(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(gm);function Tm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Sm(e,t,n){var r=new Map;Ip(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,im(o,u,n[i]))}return r}function Cm(e,t,n){var r,i=new Map,a=Ae(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,rm(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Am,Nm,Rm=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ce(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gm),Dm=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ce(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gm),Pm=Ce((function e(t){Te(this,e),this.count=t}));function Om(e){switch(e){default:return xp();case Tp.CANCELLED:case Tp.UNKNOWN:case Tp.DEADLINE_EXCEEDED:case Tp.RESOURCE_EXHAUSTED:case Tp.INTERNAL:case Tp.UNAVAILABLE:case Tp.UNAUTHENTICATED:return!1;case Tp.INVALID_ARGUMENT:case Tp.NOT_FOUND:case Tp.ALREADY_EXISTS:case Tp.PERMISSION_DENIED:case Tp.FAILED_PRECONDITION:case Tp.ABORTED:case Tp.OUT_OF_RANGE:case Tp.UNIMPLEMENTED:case Tp.DATA_LOSS:return!0}}function Lm(e){if(void 0===e)return wp("GRPC error has no .code"),Tp.UNKNOWN;switch(e){case Am.OK:return Tp.OK;case Am.CANCELLED:return Tp.CANCELLED;case Am.UNKNOWN:return Tp.UNKNOWN;case Am.DEADLINE_EXCEEDED:return Tp.DEADLINE_EXCEEDED;case Am.RESOURCE_EXHAUSTED:return Tp.RESOURCE_EXHAUSTED;case Am.INTERNAL:return Tp.INTERNAL;case Am.UNAVAILABLE:return Tp.UNAVAILABLE;case Am.UNAUTHENTICATED:return Tp.UNAUTHENTICATED;case Am.INVALID_ARGUMENT:return Tp.INVALID_ARGUMENT;case Am.NOT_FOUND:return Tp.NOT_FOUND;case Am.ALREADY_EXISTS:return Tp.ALREADY_EXISTS;case Am.PERMISSION_DENIED:return Tp.PERMISSION_DENIED;case Am.FAILED_PRECONDITION:return Tp.FAILED_PRECONDITION;case Am.ABORTED:return Tp.ABORTED;case Am.OUT_OF_RANGE:return Tp.OUT_OF_RANGE;case Am.UNIMPLEMENTED:return Tp.UNIMPLEMENTED;case Am.DATA_LOSS:return Tp.DATA_LOSS;default:return xp()}}(Nm=Am||(Am={}))[Nm.OK=0]="OK",Nm[Nm.CANCELLED=1]="CANCELLED",Nm[Nm.UNKNOWN=2]="UNKNOWN",Nm[Nm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nm[Nm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nm[Nm.NOT_FOUND=5]="NOT_FOUND",Nm[Nm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nm[Nm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nm[Nm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nm[Nm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nm[Nm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nm[Nm.ABORTED=10]="ABORTED",Nm[Nm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nm[Nm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nm[Nm.INTERNAL=13]="INTERNAL",Nm[Nm.UNAVAILABLE=14]="UNAVAILABLE",Nm[Nm.DATA_LOSS=15]="DATA_LOSS";var Mm=function(){function e(t,n){Te(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ce(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){_v(this.inner,(function(t,n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return xv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Um=new Iv(Qp.comparator);function Fm(){return Um}var Vm=new Iv(Qp.comparator);function jm(){for(var e=Vm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Bm(e){var t=Vm;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function qm(){return Km()}function zm(){return Km()}function Km(){return new Mm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Gm=new Iv(Qp.comparator),Hm=new Sv(Qp.comparator);function Wm(){for(var e=Hm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qm=new Sv(Vp);function $m(){return Qm}var Ym=function(){function e(t,n,r,i,a){Te(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ce(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Xm.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(zp.min(),i,$m(),Fm(),Wm())}}]),e}(),Xm=function(){function e(t,n,r,i,a){Te(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ce(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Wm(),Wm(),Wm())}}]),e}(),Jm=Ce((function e(t,n,r,i){Te(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),Zm=Ce((function e(t,n){Te(this,e),this.targetId=t,this.At=n})),eg=Ce((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Te(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),tg=function(){function e(){Te(this,e),this.Rt=0,this.bt=ig(),this.Pt=Rv.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return Ce(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=Wm(),t=Wm(),n=Wm();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xp()}})),new Xm(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=ig()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),ng=function(){function e(t){Te(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Fm(),this.qt=rg(),this.Kt=new Sv(Vp)}return Ce(e,[{key:"Gt",value:function(e){var t,n=Ae(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ae(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:xp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(gy(i))if(0===n){var a=new Qp(i.path);this.jt(t,a,dy.newNoDocument(a,zp.min()))}else Ip(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&gy(a.target)){var o=new Qp(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,dy.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=Wm();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ym(e,n,this.Kt,this.Ut,r);return this.Ut=Fm(),this.qt=rg(),this.Kt=new Sv(Vp),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new tg,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Sv(Vp),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||kp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new tg),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function rg(){return new Iv(Qp.comparator)}function ig(){return new Iv(Qp.comparator)}var ag={asc:"ASCENDING",desc:"DESCENDING"},og={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ug=Ce((function e(t,n){Te(this,e),this.databaseId=t,this.gt=n}));function sg(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function cg(e,t){return e.gt?t.toBase64():t.toUint8Array()}function lg(e,t){return sg(e,t.toTimestamp())}function fg(e){return Ip(!!e),zp.fromTimestamp(function(e){var t=Pv(e);return new qp(t.seconds,t.nanos)}(e))}function hg(e,t){return function(e){return new Gp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function dg(e){var t=Gp.fromString(e);return Ip(Mg(t)),t}function pg(e,t){return hg(e.databaseId,t.path)}function vg(e,t){var n=dg(t);if(n.get(1)!==e.databaseId.projectId)throw new Sp(Tp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Sp(Tp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Qp(kg(n))}function yg(e,t){return hg(e.databaseId,t)}function mg(e){var t=dg(e);return 4===t.length?Gp.emptyPath():kg(t)}function gg(e){return new Gp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kg(e){return Ip(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wg(e,t,n){return{name:pg(e,t),fields:n.value.mapValue.fields}}function bg(e,t,n){var r=vg(e,t.name),i=fg(t.updateTime),a=new fy({mapValue:{fields:t.fields}}),o=dy.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function _g(e,t){return"found"in t?function(e,t){Ip(!!t.found),t.found.name,t.found.updateTime;var n=vg(e,t.found.name),r=fg(t.found.updateTime),i=new fy({mapValue:{fields:t.found.fields}});return dy.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ip(!!t.missing),Ip(!!t.readTime);var n=vg(e,t.missing),r=fg(t.readTime);return dy.newNoDocument(n,r)}(e,t):xp()}function xg(e,t){var n;if(t instanceof Im)n={update:wg(e,t.key,t.value)};else if(t instanceof Rm)n={delete:pg(e,t.key)};else if(t instanceof Em)n={update:wg(e,t.key,t.data),updateMask:Lg(t.fieldMask)};else{if(!(t instanceof Dm))return xp();n={verify:pg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof om)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof um)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fm)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw xp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:lg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xp()}(e,t.precondition)),n}function Ig(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ym.updateTime(fg(e.updateTime)):void 0!==e.exists?ym.exists(e.exists):ym.none()}(t.currentDocument):ym.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ip("REQUEST_TIME"===t.setToServerValue),n=new om;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new um(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new cm(i)}else"increment"in t?n=new fm(e,t.increment):xp();var a=Wp.fromServerFormat(t.fieldPath);return new pm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=vg(e,t.update.name),a=new fy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Nv(t.map((function(e){return Wp.fromServerFormat(e)})))}(t.updateMask);return new Em(i,a,o,n,r)}return new Im(i,a,n,r)}if(t.delete){var u=vg(e,t.delete);return new Rm(u,n)}if(t.verify){var s=vg(e,t.verify);return new Dm(s,n)}return xp()}function Eg(e,t){return{documents:[yg(e,t.path)]}}function Tg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=yg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=yg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ry(e.value))return{unaryFilter:{field:Rg(e.field),op:"IS_NAN"}};if(ny(e.value))return{unaryFilter:{field:Rg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ry(e.value))return{unaryFilter:{field:Rg(e.field),op:"IS_NOT_NAN"}};if(ny(e.value))return{unaryFilter:{field:Rg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rg(e.field),op:Ng(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Rg(e.field),direction:Ag(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||Bv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Sg(e){var t=mg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ip(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Cg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Dy(Dg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Bv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ry(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ry(n,t)}(n.endAt)),Uy(t,i,u,o,s,"F",c,l)}function Cg(e){return e?void 0!==e.unaryFilter?[Og(e)]:void 0!==e.fieldFilter?[Pg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Cg(e)})).reduce((function(e,t){return e.concat(t)})):xp():[]}function Ag(e){return ag[e]}function Ng(e){return og[e]}function Rg(e){return{fieldPath:e.canonicalString()}}function Dg(e){return Wp.fromServerFormat(e.fieldPath)}function Pg(e){return _y.create(Dg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xp()}}(e.fieldFilter.op),e.fieldFilter.value)}function Og(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Dg(e.unaryFilter.field);return _y.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Dg(e.unaryFilter.field);return _y.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Dg(e.unaryFilter.field);return _y.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Dg(e.unaryFilter.field);return _y.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xp()}}function Lg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Mg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ug(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Vg(t)),t=Fg(e.get(n),t);return Vg(t)}function Fg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Vg(e){return e+"\x01\x01"}function jg(e){var t=e.length;if(Ip(t>=2),2===t)return Ip("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Gp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&xp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:xp()}a=o+2}return new Gp(r)}var Bg=["userId","batchId"];function qg(e,t){return[e,Ug(t)]}function zg(e,t,n){return[e,Ug(t),n]}var Kg={},Gg=["prefixPath","collectionGroup","readTime","documentId"],Hg=["prefixPath","collectionGroup","documentId"],Wg=["collectionGroup","readTime","prefixPath","documentId"],Qg=["canonicalId","targetId"],$g=["targetId","path"],Yg=["path","targetId"],Xg=["collectionId","parent"],Jg=["indexId","uid"],Zg=["uid","sequenceNumber"],ek=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tk=["indexId","uid","orderedDocumentKey"],nk=["userId","collectionPath","documentId"],rk=["userId","collectionPath","largestBatchId"],ik=["userId","collectionGroup","largestBatchId"],ak=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ok=[].concat(gt(ak),["documentOverlays"]),uk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sk=uk,ck=[].concat(sk,["indexConfiguration","indexState","indexEntries"]),lk=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return Ce(n)}(av);function fk(e,t){var n=Ep(e);return lv.M(n.ie,t)}var hk=function(){function e(t,n,r,i){Te(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ce(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&wm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Ae(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=bm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Ae(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=bm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=zm();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=km(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(zp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Wm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&jp(this.mutations,e.mutations,(function(e,t){return xm(e,t)}))&&jp(this.baseMutations,e.baseMutations,(function(e,t){return xm(e,t)}))}}]),e}(),dk=function(){function e(t,n,r,i){Te(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ce(e,null,[{key:"from",value:function(t,n,r){Ip(t.mutations.length===r.length);for(var i=Gm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),pk=function(){function e(t,n){Te(this,e),this.largestBatchId=t,this.mutation=n}return Ce(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),vk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Rv.EMPTY_BYTE_STRING;Te(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ce(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),yk=Ce((function e(t){Te(this,e),this.re=t}));function mk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:pg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:sg(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:kk(t.version)};else{if(!t.isUnknownDocument())return xp();r.unknownDocument={path:n.path.toArray(),version:kk(t.version)}}return r}function gk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function kk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wk(e){var t=new qp(e.seconds,e.nanoseconds);return zp.fromTimestamp(t)}function bk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ig(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ig(e.re,t)})),u=qp.fromMillis(t.localWriteTimeMs);return new hk(t.batchId,u,n,o)}function _k(e){var t,n,r=wk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?wk(e.lastLimboFreeSnapshotVersion):zp.min();return void 0!==e.query.documents?(Ip(1===(n=e.query).documents.length),t=Ky(Fy(mg(n.documents[0])))):t=function(e){return Ky(Sg(e))}(e.query),new vk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Rv.fromBase64String(e.resumeToken))}function xk(e,t){var n,r=kk(t.snapshotVersion),i=kk(t.lastLimboFreeSnapshotVersion);n=gy(t.target)?Eg(e.re,t.target):Tg(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:yy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Ik(e){var t=Sg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gy(t,t.limit,"L"):t}function Ek(e,t){return new pk(t.largestBatchId,Ig(e.re,t.overlayMutation))}function Tk(e,t){var n=t.path.lastSegment();return[e,Ug(t.path.popLast()),n]}function Sk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:kk(r.readTime),documentKey:Ug(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ck=function(){function e(){Te(this,e)}return Ce(e,[{key:"getBundleMetadata",value:function(e,t){return Ak(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:wk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ak(e).put({bundleId:(n=t).id,createTime:kk(fg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Nk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ik(t.bundledQuery),readTime:wk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Nk(e).put(function(e){return{name:e.name,readTime:kk(fg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ak(e){return fk(e,"bundles")}function Nk(e){return fk(e,"namedQueries")}var Rk=function(){function e(t,n){Te(this,e),this.It=t,this.userId=n}return Ce(e,[{key:"getOverlay",value:function(e,t){var n=this;return Dk(e).get(Tk(this.userId,t)).next((function(e){return e?Ek(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=qm();return sv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new pk(t,a);i.push(r.ue(e,o))})),sv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ug(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Dk(e).Y("collectionPathOverlayIndex",i))})),sv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=qm(),a=Ug(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Dk(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ek(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=qm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dk(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ek(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return Dk(e).put(function(e,t,n){var r=o(Tk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:xg(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Dk(e){return fk(e,"documentOverlays")}var Pk=function(){function e(){Te(this,e)}return Ce(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ov(e.integerValue));else if("doubleValue"in e){var n=Ov(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),qv(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Lv(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?oy(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):xp()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),Qp.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function Ok(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Lk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ok(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Pk.Te=new Pk;var Mk=function(){function e(){Te(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ce(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=Lk(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=Lk(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Uk=function(){function e(t){Te(this,e),this.Be=t}return Ce(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Fk=function(){function e(t){Te(this,e),this.Be=t}return Ce(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),Vk=function(){function e(){Te(this,e),this.Be=new Mk,this.Le=new Uk(this.Be),this.Ue=new Fk(this.Be)}return Ce(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),jk=function(){function e(t,n,r,i){Te(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ce(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Bk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=qk(e.arrayValue,t.arrayValue))?n:0!==(n=qk(e.directionalValue,t.directionalValue))?n:Qp.comparator(e.documentKey,t.documentKey)}function qk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var zk=function(){function e(t){Te(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Ae(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ce(e,[{key:"We",value:function(e){var t=Yp(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Xp(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Ae(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Kk=function(){function e(){Te(this,e),this.Ye=new Gk}return Ce(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),sv.resolve()}},{key:"getCollectionParents",value:function(e,t){return sv.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return sv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return sv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return sv.resolve(null)}},{key:"getIndexType",value:function(e,t){return sv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return sv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return sv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return sv.resolve(nv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return sv.resolve(nv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return sv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return sv.resolve()}}]),e}(),Gk=function(){function e(){Te(this,e),this.index={}}return Ce(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sv(Gp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Sv(Gp.comparator)).toArray()}}]),e}(),Hk=new Uint8Array(0),Wk=function(){function e(t,n){Te(this,e),this.user=t,this.databaseId=n,this.Xe=new Gk,this.Ze=new Mm((function(e){return yy(e)}),(function(e,t){return my(e,t)})),this.uid=t.uid||""}return Ce(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Ug(i)};return Qk(e).put(a)}return sv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Bp(t),""],!1,!0);return Qk(e).W(r).next((function(e){var r,i=Ae(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(jg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Yk(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Xk(e);return a.next((function(e){o.put(Sk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Yk(e),r=Xk(e),i=$k(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=$k(e),i=!0,a=new Map;return sv.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Wm(),o=[];return sv.forEach(a,(function(i,a){var u;kp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(yy(t)));var s=function(e,t){var n=Yp(t);if(void 0===n)return null;var r,i=Ae(ky(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Ae(Xp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Ae(ky(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Ae(Xp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?wy(e,o.fieldPath,e.startAt):by(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ry(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Ae(Xp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?by(e,o.fieldPath,e.endAt):wy(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ry(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return sv.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Qp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return sv.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):Hk,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,gt(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new jk(e,Qp.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new jk(e,Qp.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new zk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return sv.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Sv(Wp.comparator),r=!1,i=Ae(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Ae(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Vk,i=Ae(Xp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);Pk.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Vk;return Pk.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Vk;return Pk.Te.ce(Zv(this.databaseId,t),n.qe(function(e){var t=Xp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Vk);var i,a=0,o=Ae(Xp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Ae(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&ty(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);Pk.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=gt(e),a=[],o=Ae(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Ae(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Vk;f.seed(l.$e()),Pk.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof _y&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Yk(e),i=Xk(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return sv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Zp(t.sequenceNumber,new nv(wk(t.readTime),new Qp(jg(t.documentKey)),t.largestBatchId)):Zp.empty(),r=e.fields.map((function(e){var t=o(e,2),n=t[0],r=t[1];return new Jp(Wp.fromServerFormat(n),r)}));return new $p(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Vp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Yk(e),a=Xk(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return sv.forEach(t,(function(t){return a.put(Sk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return sv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?sv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),sv.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?sv.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return $k(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return $k(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=$k(e),i=new Sv(Bk);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new jk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Sv(Bk),r=this.an(t,e);if(null==r)return n;var i=Yp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ty(a)){var o,u=Ae(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new jk(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new jk(t.indexId,e.key,Hk,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;kp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Av(a),s=Av(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Av(o)):l?(i(u),u=Av(a)):(u=Av(a),s=Av(o))}}(r,i,Bk,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),sv.waitFor(o)}},{key:"_n",value:function(e){var t=1;return Xk(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Bk(e,t)})).filter((function(e,t,n){return!t||0!==Bk(e,n[t-1])}));var r=[];r.push(e);var i,a=Ae(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Bk(o,e),s=Bk(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Hk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Hk,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Jk)}},{key:"getMinOffset",value:function(e,t){var n=this;return sv.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||xp()}))})).next(Jk)}}]),e}();function Qk(e){return fk(e,"collectionParents")}function $k(e){return fk(e,"indexEntries")}function Yk(e){return fk(e,"indexConfiguration")}function Xk(e){return fk(e,"indexState")}function Jk(e){Ip(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;rv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new nv(t.readTime,t.documentKey,n)}var Zk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ew=function(){function e(t,n,r){Te(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ce(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function tw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ip(1===u)})));var c,l=[],f=Ae(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=zg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return sv.waitFor(a).next((function(){return l}))}function nw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xp();t=e.noDocument}return JSON.stringify(t).length}ew.DEFAULT_COLLECTION_PERCENTILE=10,ew.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ew.DEFAULT=new ew(41943040,ew.DEFAULT_COLLECTION_PERCENTILE,ew.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ew.DISABLED=new ew(-1,0,0);var rw=function(){function e(t,n,r,i){Te(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return Ce(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aw(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ow(e),o=aw(e);return o.add({}).next((function(u){Ip("number"==typeof u);var s,c=new hk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return xg(e.re,t)})),i=n.mutations.map((function(t){return xg(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new Sv((function(e,t){return Vp(e.canonicalString(),t.canonicalString())})),d=Ae(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=zg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Kg))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),sv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return aw(e).get(t).next((function(e){return e?(Ip(e.userId===n.userId),bk(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?sv.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return aw(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ip(t.batchId>=r),a=bk(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return aw(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return aw(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return bk(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=qg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ow(e).Z({range:i},(function(r,i,u){var s=o(r,3),c=s[0],l=s[1],f=s[2],h=jg(l);if(c===n.userId&&t.path.isEqual(h))return aw(e).get(f).next((function(e){if(!e)throw xp();Ip(e.userId===n.userId),a.push(bk(n.It,e))}));u.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sv(Vp),i=[];return t.forEach((function(t){var a=qg(n.userId,t.path),u=IDBKeyRange.lowerBound(a),s=ow(e).Z({range:u},(function(e,i,a){var u=o(e,3),s=u[0],c=u[1],l=u[2],f=jg(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),sv.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=qg(this.userId,r),u=IDBKeyRange.lowerBound(a),s=new Sv(Vp);return ow(e).Z({range:u},(function(e,t,a){var u=o(e,3),c=u[0],l=u[1],f=u[2],h=jg(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.En(e,s)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(aw(e).get(t).next((function(e){if(null===e)throw xp();Ip(e.userId===n.userId),r.push(bk(n.It,e))})))})),sv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return tw(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),sv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return sv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ow(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=jg(e[1]);i.push(a)}else r.done()})).next((function(){Ip(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return iw(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return uw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Ip(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function iw(e,t,n){var r=qg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return ow(e).Z({range:a,X:!0},(function(e,n,r){var a=o(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(u=!0),r.done()})).next((function(){return u}))}function aw(e){return fk(e,"mutations")}function ow(e){return fk(e,"documentMutations")}function uw(e){return fk(e,"mutationQueues")}var sw=function(){function e(t){Te(this,e),this.bn=t}return Ce(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),cw=function(){function e(t,n){Te(this,e),this.referenceDelegate=t,this.It=n}return Ce(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new sw(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return zp.fromTimestamp(new qp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return lw(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Ip(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return lw(e).Z((function(o,u){var s=_k(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return sv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return lw(e).Z((function(e,n){var r=_k(n);t(r)}))}},{key:"Vn",value:function(e){return fw(e).get("targetGlobalKey").next((function(e){return Ip(null!==e),e}))}},{key:"Sn",value:function(e,t){return fw(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return lw(e).put(xk(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=yy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return lw(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=_k(n);my(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=hw(e);return t.forEach((function(t){var o=Ug(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),sv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=hw(e);return sv.forEach(t,(function(t){var a=Ug(t.path);return sv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=hw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=hw(e),i=Wm();return r.Z({range:n,X:!0},(function(e,t,n){var r=jg(e[1]),a=new Qp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ug(t.path),r=IDBKeyRange.bound([n],[Bp(n)],!1,!0),i=0;return hw(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=o(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return lw(e).get(t).next((function(e){return e?_k(e):null}))}}]),e}();function lw(e){return fk(e,"targets")}function fw(e){return fk(e,"targetGlobal")}function hw(e){return fk(e,"targetDocuments")}function dw(e,t){var n=o(e,2),r=n[0],i=n[1],a=o(t,2),u=a[0],s=a[1],c=Vp(r,u);return 0===c?Vp(i,s):c}var pw=function(){function e(t){Te(this,e),this.xn=t,this.buffer=new Sv(dw),this.Nn=0}return Ce(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();dw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),vw=function(){function e(t,n,r){Te(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return Ce(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;kp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!dv(e.t0)){e.next=12;break}kp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ov(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),yw=function(){function e(t,n){Te(this,e),this.$n=t,this.params=n}return Ce(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return sv.resolve(wv.at);var r=new pw(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(kp("LruGarbageCollector","Garbage collection skipped; disabled"),sv.resolve(Zk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(kp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Zk):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(kp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),gp()<=Et.DEBUG&&kp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),sv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),mw=function(){function e(t,n){Te(this,e),this.db=t,this.garbageCollector=function(e,t){return new yw(e,t)}(this,n)}return Ce(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return gw(e,n)}},{key:"removeReference",value:function(e,t,n){return gw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return gw(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return uw(e).tt((function(r){return iw(e,r,t).next((function(e){return e&&(n=!0),sv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,zp.min()),hw(e).delete([0,Ug(o.path)])}))}));i.push(s)}})).next((function(){return sv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return gw(e,t)}},{key:"Kn",value:function(e,t){var n,r=hw(e),i=wv.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=o(e,2),u=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===u?(i!==wv.at&&t(new Qp(jg(n)),i),i=c,n=s):i=wv.at})).next((function(){i!==wv.at&&t(new Qp(jg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function gw(e,t){return hw(e).put(function(e,t){return{targetId:0,path:Ug(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var kw=function(){function e(){Te(this,e),this.changes=new Mm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ce(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,dy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?sv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ww=function(){function e(t){Te(this,e),this.It=t}return Ce(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Iw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Iw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],gk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=dy.newInvalidDocument(t);return Iw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ew(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:dy.newInvalidDocument(t)};return Iw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ew(t))},(function(e,i){r={document:n.jn(t,i),size:nw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Fm();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Fm(),i=new Iv(Qp.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,nw(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return sv.resolve();var r=new Sv(Sw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ew(r.first()),Ew(r.last())),a=r.getIterator(),o=a.getNext();return Iw(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Qp.fromSegments([].concat(gt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Sw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Ew(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),gk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Iw(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Fm(),i=Ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(Qp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Fm(),o=Tw(t,n),u=Tw(t,nv.max());return Iw(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Qp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new _w(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return xw(e).get("remoteDocumentGlobalKey").next((function(e){return Ip(!!e),e}))}},{key:"Qn",value:function(e,t){return xw(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=bg(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Qp.fromSegments(t.noDocument.path),i=wk(t.noDocument.readTime);n=dy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xp();var a=Qp.fromSegments(t.unknownDocument.path),o=wk(t.unknownDocument.version);n=dy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new qp(e[0],e[1]);return zp.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(zp.min()))return n}return dy.newInvalidDocument(e)}}]),e}();function bw(e){return new ww(e)}var _w=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new Mm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ce(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Sv((function(e,t){return Vp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=mk(t.Yn.It,o);i=i.add(a.path.popLast());var c=nw(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=mk(t.Yn.It,o.convertToNoDocument(zp.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),sv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(kw);function xw(e){return fk(e,"remoteDocumentGlobal")}function Iw(e){return fk(e,"remoteDocumentsV14")}function Ew(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Tw(e,t){var n=t.documentKey.path.toArray();return[e,gk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Sw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Vp(n[a],r[a]))return i;return(i=Vp(n.length,r.length))||((i=Vp(n[n.length-2],r[r.length-2]))||Vp(n[n.length-1],r[r.length-1]))}var Cw=Ce((function e(t,n){Te(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Aw=function(){function e(t,n,r,i){Te(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ce(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&bm(r.mutation,e,Nv.empty(),qp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Wm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wm(),i=qm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=jm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=qm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Wm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Fm(),a=Km(),o=Km();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Em)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),bm(o.mutation,t,o.mutation.getFieldMask(),qp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Cw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Km(),i=new Iv((function(e,t){return e-t})),a=Wm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Ae(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Nv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Wm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=zm();c.forEach((function(e){if(!a.has(e)){var n=km(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return sv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Qp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):sv.resolve(qm()),u=-1,s=a;return o.next((function(t){return sv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?sv.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Wm())})).next((function(e){return{batchId:u,changes:Bm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Qp(t)).next((function(e){var t=jm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=jm();return this.indexManager.getCollectionParents(e,i).next((function(o){return sv.forEach(o,(function(o){var u=function(e,t){return new My(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,dy.newInvalidDocument(n)))}));var n=jm();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&bm(a.mutation,i,Nv.empty(),qp.now()),$y(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):sv.resolve(dy.newInvalidDocument(t))}}]),e}(),Nw=function(){function e(t){Te(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return Ce(e,[{key:"getBundleMetadata",value:function(e,t){return sv.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:fg(n.createTime)}),sv.resolve()}},{key:"getNamedQuery",value:function(e,t){return sv.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Ik(e.bundledQuery),readTime:fg(e.readTime)}}(t)),sv.resolve()}}]),e}(),Rw=function(){function e(){Te(this,e),this.overlays=new Iv(Qp.comparator),this.es=new Map}return Ce(e,[{key:"getOverlay",value:function(e,t){return sv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=qm();return sv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),sv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),sv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=qm(),i=t.length+1,a=new Qp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return sv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Iv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=qm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=qm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return sv.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new pk(t,n));var a=this.es.get(t);void 0===a&&(a=Wm(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Dw=function(){function e(){Te(this,e),this.ns=new Sv(Pw.ss),this.rs=new Sv(Pw.os)}return Ce(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Pw(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new Pw(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Qp(new Gp([])),r=new Pw(n,e),i=new Pw(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Qp(new Gp([])),n=new Pw(t,e),r=new Pw(t,e+1),i=Wm();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Pw(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Pw=function(){function e(t,n){Te(this,e),this.key=t,this._s=n}return Ce(e,null,[{key:"ss",value:function(e,t){return Qp.comparator(e.key,t.key)||Vp(e._s,t._s)}},{key:"os",value:function(e,t){return Vp(e._s,t._s)||Qp.comparator(e.key,t.key)}}]),e}(),Ow=function(){function e(t,n){Te(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Sv(Pw.ss)}return Ce(e,[{key:"checkEmpty",value:function(e){return sv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new hk(i,t,n,r);this.mutationQueue.push(a);var o,u=Ae(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new Pw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return sv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return sv.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return sv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return sv.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return sv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Pw(t,0),i=new Pw(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),sv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sv(Vp);return t.forEach((function(e){var t=new Pw(e,0),i=new Pw(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),sv.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Qp.isDocumentKey(i)||(i=i.child(""));var a=new Pw(new Qp(i),0),o=new Sv(Vp);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),sv.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ip(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return sv.forEach(t.mutations,(function(i){var a=new Pw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Pw(t,0),r=this.gs.firstAfterOrEqual(n);return sv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,sv.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Lw=function(){function e(t){Te(this,e),this.Es=t,this.docs=new Iv(Qp.comparator),this.size=0}return Ce(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return sv.resolve(n?n.document.mutableCopy():dy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Fm();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():dy.newInvalidDocument(e))})),sv.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Fm(),i=new Qp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||rv(tv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return sv.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){xp()}},{key:"As",value:function(e,t){return sv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Mw(this)}},{key:"getSize",value:function(e){return sv.resolve(this.size)}}]),e}(),Mw=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).Yn=e,r}return Ce(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),sv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(kw),Uw=function(){function e(t){Te(this,e),this.persistence=t,this.Rs=new Mm((function(e){return yy(e)}),my),this.lastRemoteSnapshotVersion=zp.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Dw,this.targetCount=0,this.vs=sw.Pn()}return Ce(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),sv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return sv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return sv.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),sv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),sv.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new sw(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,sv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),sv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,sv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),sv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return sv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return sv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),sv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),sv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),sv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return sv.resolve(n)}},{key:"containsKey",value:function(e,t){return sv.resolve(this.Ps.containsKey(t))}}]),e}(),Fw=function(){function e(t,n){var r=this;Te(this,e),this.Vs={},this.overlays={},this.Ss=new wv(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Uw(this),this.indexManager=new Kk,this.remoteDocumentCache=new Lw((function(e){return r.referenceDelegate.xs(e)})),this.It=new yk(n),this.Ns=new Nw(this.It)}return Ce(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Rw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Ow(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;kp("MemoryPersistence","Starting transaction:",e);var i=new Vw(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return sv.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Vw=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ce(n)}(av),jw=function(){function e(t){Te(this,e),this.persistence=t,this.Fs=new Dw,this.$s=null}return Ce(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw xp()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),sv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),sv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),sv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sv.forEach(this.Ls,(function(r){var i=Qp.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,zp.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return sv.or([function(){return sv.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Bw=function(){function e(t){Te(this,e),this.It=t}return Ce(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new cv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bg,{unique:!0}),e.createObjectStore("documentMutations")}(e),qw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=sv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),qw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return sv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:nk});t.createIndex("collectionPathOverlayIndex",rk,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ik,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Gg});t.createIndex("documentKeyIndex",Hg),t.createIndex("collectionGroupIndex",Wg)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Jg}).createIndex("sequenceNumberIndex",Zg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ek}).createIndex("documentKeyIndex",tk,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=nw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return sv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return sv.forEach(r,(function(r){Ip(r.userId===n.userId);var i=bk(t.It,r);return tw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Gp(n),o=function(e){return[0,Ug(e)]}(a);r.push(t.get(o).next((function(n){return n?sv.resolve():function(n){return t.put({targetId:0,path:Ug(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return sv.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Xg});var n=t.store("collectionParents"),r=new Gk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ug(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Gp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=o(e,3),r=(n[0],n[1]),a=(n[2],jg(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=_k(r),a=xk(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Qp(Gp.fromString(i.document.name).popFirst(5)):i.noDocument?Qp.fromSegments(i.noDocument.path):i.unknownDocument?Qp.fromSegments(i.unknownDocument.path):xp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return sv.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=bw(this.It),a=new Fw(jw.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Wm();bk(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),sv.forEach(r,(function(e,r){var o=new vp(r),u=Rk.oe(n.It,o),s=a.getIndexManager(o),c=rw.oe(o,n.It,s,a.referenceDelegate);return new Aw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new lk(t,wv.at),e).next()}))}))}}]),e}();function qw(e){e.createObjectStore("targetDocuments",{keyPath:$g}).createIndex("documentTargetsIndex",Yg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qg,{unique:!0}),e.createObjectStore("targetGlobal")}var zw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Kw=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Te(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Sp(Tp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mw(this,i),this.ii=n+"main",this.It=new yk(s),this.ri=new lv(this.ii,this.Xs,new Bw(this.It)),this.Cs=new cw(this.referenceDelegate,this.It),this.remoteDocumentCache=bw(this.It),this.Ns=new Ck,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&wp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ce(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Sp(Tp.FAILED_PRECONDITION,zw);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new wv(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=wt(yt().mark((function n(r){return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=wt(yt().mark((function t(n){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Hw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(dv(t))return kp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return kp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Gw(e).get("owner").next((function(e){return sv.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Hw(e).delete(this.clientId)}},{key:"yi",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i,a=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=fk(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return sv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Ae(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?sv.resolve(!0):Gw(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Sp(Tp.FAILED_PRECONDITION,zw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Hw(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&kp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=wt(yt().mark((function e(){var t=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new lk(e,wv.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Hw(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return rw.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Wk(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Rk.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;kp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?ck:14===i?sk:13===i?uk:12===i?ok:11===i?ak:void xp();return this.ri.runTransaction(e,o,u,(function(i){return a=new lk(i,r.Ss?r.Ss.next():wv.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw wp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Sp(Tp.FAILED_PRECONDITION,iv);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Gw(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Sp(Tp.FAILED_PRECONDITION,zw)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gw(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Gw(e);return n.get("owner").next((function(e){return t.mi(e)?(kp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):sv.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(wp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return kp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return wp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(xl){wp("Failed to set zombie client id.",xl)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(xl){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return lv.C()}}]),e}();function Gw(e){return fk(e,"owner")}function Hw(e){return fk(e,"clientMetadata")}function Ww(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Qw=function(){function e(t,n,r,i){Te(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return Ce(e,null,[{key:"Ci",value:function(t,n){var r,i=Wm(),a=Wm(),o=Ae(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),$w=function(){function e(){Te(this,e),this.xi=!1}return Ce(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Vy(t))return sv.resolve(null);var r=Ky(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Gy(t,null,"F"),r=Ky(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Wm.apply(void 0,gt(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Gy(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Vy(t)||r.isEqual(zp.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(gp()<=Et.DEBUG&&kp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qy(t)),i.Bi(e,o,t,ev(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Sv(Xy(e));return t.forEach((function(t,r){$y(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return gp()<=Et.DEBUG&&kp("QueryEngine","Using full collection scan to execute query:",Qy(t)),this.Ni.getDocumentsMatchingQuery(e,t,nv.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Yw=function(){function e(t,n,r,i){Te(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Iv(Vp),this.qi=new Mm((function(e){return yy(e)}),my),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return Ce(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Aw(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function Xw(e,t,n,r){return new Yw(e,t,n,r)}function Jw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Wm(),s=Ae(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Ae(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Ae(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Ae(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function eb(e,t){var n=Ep(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=sv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ip(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Wm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function tb(e){var t=Ep(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function nb(e,t){var n=Ep(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Rv.EMPTY_BYTE_STRING,zp.min()).withLastLimboFreeSnapshotVersion(zp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Fm(),s=Wm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(rb(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(zp.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return sv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function rb(e,t,n){var r=Wm(),i=Wm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Fm();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(zp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):kp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function ib(e,t){var n=Ep(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function ab(e,t){var n=Ep(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,sv.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new vk(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function ob(e,t,n){return ub.apply(this,arguments)}function ub(){return ub=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ep(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),dv(e.t1)){e.next=12;break}throw e.t1;case 12:kp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ub.apply(this,arguments)}function sb(e,t,n){var r=Ep(e),i=zp.min(),a=Wm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ep(e),i=r.qi.get(n);return void 0!==i?sv.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Ky(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:zp.min(),n?a:Wm())})).next((function(e){return fb(r,Yy(t),e),{documents:e,Hi:a}}))}))}function cb(e,t){var n=Ep(e),r=Ep(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function lb(e,t){var n=Ep(e),r=n.Ki.get(t)||zp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,ev(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return fb(n,t,e),e}))}function fb(e,t,n){var r=e.Ki.get(t)||zp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function hb(e,t,n,r){return db.apply(this,arguments)}function db(){return db=wt(yt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ep(t),o=Wm(),u=Fm(),s=Ae(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,ab(a,function(e){return Ky(Fy(Gp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return rb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=wt(yt().mark((function e(t,n){var r,i,a,o=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Wm(),e.next=3,ab(t,Ky(Ik(n.bundledQuery)));case 3:return i=e.sent,a=Ep(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=fg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Rv.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function mb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function gb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var kb=function(){function e(t,n,r,i){Te(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ce(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Sp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(wp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),wb=function(){function e(t,n,r){Te(this,e),this.targetId=t,this.state=n,this.error=r}return Ce(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Sp(i.error.code,i.error.message))),a?new e(t,i.state,r):(wp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),bb=function(){function e(t,n){Te(this,e),this.clientId=t,this.activeTargetIds=n}return Ce(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=$m(),o=0;i&&o<r.activeTargetIds.length;++o)i=zv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(wp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),_b=function(){function e(t,n){Te(this,e),this.clientId=t,this.onlineState=n}return Ce(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(wp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),xb=function(){function e(){Te(this,e),this.activeTargetIds=$m()}return Ce(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Ib=function(){function e(t,n,r,i,a){Te(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Iv(Vp),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=yb(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new xb),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return Ce(e,[{key:"start",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Ae(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(yb(this.persistenceKey,i)))&&(o=bb.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=Ae(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(gb(this.persistenceKey,e));if(n){var r=wb.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(gb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return kp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){kp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){kp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(kp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void wp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(wt(yt().mark((function e(){var r,i,a,o,u,s,c;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=wv.at;if(null!=e)try{var n=JSON.parse(e);Ip("number"==typeof n),t=n}catch(e){wp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==wv.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new kb(this.currentUser,e,t,n),i=mb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=mb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=gb(this.persistenceKey,e),i=new wb(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return bb.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return kb.Zi(new vp(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return wb.Zi(r,t)}},{key:"yr",value:function(e){return _b.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:kp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=$m();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Eb=function(){function e(){Te(this,e),this.Lr=new xb,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ce(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new xb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Tb=function(){function e(){Te(this,e)}return Ce(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Sb=function(){function e(){var t=this;Te(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return Ce(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){kp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ae(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){kp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ae(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Cb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ab=function(){function e(t){Te(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return Ce(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Nb=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ce(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new dp;o.setWithCredentials(!0),o.listenOnce(sp.COMPLETE,(function(){var t;try{switch(o.getLastErrorCode()){case up.NO_ERROR:var n=o.getResponseJson();kp("Connection","XHR received:",JSON.stringify(n)),i(n);break;case up.TIMEOUT:kp("Connection",'RPC "'+e+'" timed out'),a(new Sp(Tp.DEADLINE_EXCEEDED,"Request time out"));break;case up.HTTP_ERROR:var r=o.getStatus();if(kp("Connection",'RPC "'+e+'" failed with status:',r,"response text:",o.getResponseText()),r>0){var u=o.getResponseJson();Array.isArray(u)&&(u=u[0]);var s=null===(t=u)||void 0===t?void 0:t.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Tp).indexOf(t)>=0?t:Tp.UNKNOWN}(s.status);a(new Sp(c,s.message))}else a(new Sp(Tp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Sp(Tp.UNAVAILABLE,"Connection failed."));break;default:xp()}}finally{kp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ap(),a=op(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new fp({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");kp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Ab({Hr:function(e){l?kp("Connection","Not sending because WebChannel is closed:",e):(c||(kp("Connection","Opening WebChannel transport."),s.open(),c=!0),kp("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,hp.EventType.OPEN,(function(){l||kp("Connection","WebChannel transport opened.")})),h(s,hp.EventType.CLOSE,(function(){l||(l=!0,kp("Connection","WebChannel transport closed"),f.io())})),h(s,hp.EventType.ERROR,(function(e){l||(l=!0,bp("Connection","WebChannel transport errored:",e),f.io(new Sp(Tp.UNAVAILABLE,"The operation could not be completed")))})),h(s,hp.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ip(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){kp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Am[e];if(void 0!==t)return Lm(t)}(a),u=i.message;void 0===o&&(o=Tp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Sp(o,u)),s.close()}else kp("Connection","WebChannel received:",n),f.ro(n)}})),h(a,cp.STAT_EVENT,(function(e){e.stat===lp.PROXY?kp("Connection","Detected buffering proxy"):e.stat===lp.NOPROXY&&kp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){Te(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ce(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);kp("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return kp("RestConnection","Received: ",e),e}),(function(t){throw bp("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+yp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Cb[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Rb(){return"undefined"!=typeof window?window:null}function Db(){return"undefined"!=typeof document?document:null}function Pb(e){return new ug(e,!0)}var Ob=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Te(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Ce(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&kp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Lb=function(){function e(t,n,r,i,a,o,u,s){Te(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ob(t,n)}return Ce(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Tp.RESOURCE_EXHAUSTED?(wp(n.toString()),wp("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Tp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=o(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Sp(Tp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return kp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(kp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Mb=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return Ce(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Ip(void 0===t||"string"==typeof t),Rv.fromBase64String(t||"")):(Ip(void 0===t||t instanceof Uint8Array),Rv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Tp.UNKNOWN:Lm(e.code);return new Sp(t,e.message||"")}(o);n=new eg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=vg(e,s.document.name),l=fg(s.document.updateTime),f=new fy({mapValue:{fields:s.document.fields}}),h=dy.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Jm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=vg(e,v.document),m=v.readTime?fg(v.readTime):zp.min(),g=dy.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Jm([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=vg(e,w.document),_=w.removedTargetIds||[];n=new Jm([],_,b,null)}else{if(!("filter"in t))return xp();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new Pm(I),T=x.targetId;n=new Zm(T,E)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return zp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?zp.min():t.readTime?fg(t.readTime):zp.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=gg(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=gy(r)?{documents:Eg(e,r)}:{query:Tg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=cg(e,t.resumeToken):t.snapshotVersion.compareTo(zp.min())>0&&(n.readTime=sg(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=gg(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(Lb),Ub=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return Ce(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,$n(De(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ip(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Ip(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?fg(e.updateTime):fg(t);return n.isEqual(zp.min())&&(n=fg(t)),new vm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=fg(e.commitTime);return this.listener.Zo(n,t)}return Ip(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=gg(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return xg(t.It,e)}))};this.Bo(n)}}]),n}(Lb),Fb=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return Ce(n,[{key:"su",value:function(){if(this.nu)throw new Sp(Tp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),u=a[0],s=a[1];return r.connection.ao(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Tp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Sp(Tp.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var u=o(a,2),s=u[0],c=u[1];return i.connection._o(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Tp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Sp(Tp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return Ce((function e(){Te(this,e)}))}());var Vb=function(){function e(t,n){Te(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return Ce(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(wp(t),this.ou=!1):kp("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),jb=Ce((function e(t,n,r,i,a){var o=this;Te(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Xb(o),!e.t0){e.next=5;break}return kp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ep(t))._u.add(4),e.next=4,zb(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Bb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Vb(r,i)}));function Bb(e){return qb.apply(this,arguments)}function qb(){return qb=wt(yt().mark((function e(t){var n,r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xb(t)){e.next=18;break}n=Ae(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),qb.apply(this,arguments)}function zb(e){return Kb.apply(this,arguments)}function Kb(){return Kb=wt(yt().mark((function e(t){var n,r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ae(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Kb.apply(this,arguments)}function Gb(e,t){var n=Ep(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Yb(n)?$b(n):T_(n).ko()&&Wb(n,t))}function Hb(e,t){var n=Ep(e),r=T_(n);n.du.delete(t),r.ko()&&Qb(n,t),0===n.du.size&&(r.ko()?r.Fo():Xb(n)&&n.gu.set("Unknown"))}function Wb(e,t){e.yu.Mt(t.targetId),T_(e).zo(t)}function Qb(e,t){e.yu.Mt(t),T_(e).Ho(t)}function $b(e){e.yu=new ng({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),T_(e).start(),e.gu.uu()}function Yb(e){return Xb(e)&&!T_(e).No()&&e.du.size>0}function Xb(e){return 0===Ep(e)._u.size}function Jb(e){e.yu=void 0}function Zb(e){return e_.apply(this,arguments)}function e_(){return e_=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Wb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jb(t),Yb(t)?(t.gu.hu(n),$b(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t,n){return i_.apply(this,arguments)}function i_(){return i_=wt(yt().mark((function e(t,n,r){var i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof eg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Ae(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),kp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,a_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Jm?t.yu.Gt(n):n instanceof Zm?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(zp.min())){e.next=29;break}return e.prev=14,e.next=17,tb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Rv.EMPTY_BYTE_STRING,n.snapshotVersion)),Qb(e,t);var r=new vk(n.target,t,1,n.sequenceNumber);Wb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),kp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,a_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),i_.apply(this,arguments)}function a_(e,t,n){return o_.apply(this,arguments)}function o_(){return o_=wt(yt().mark((function e(t,n,r){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dv(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,zb(t);case 5:t.gu.set("Offline"),r||(r=function(){return tb(t.localStore)}),t.asyncQueue.enqueueRetryable(wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Bb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return t().catch((function(n){return a_(e,n,t)}))}function s_(e){return c_.apply(this,arguments)}function c_(){return c_=wt(yt().mark((function e(t){var n,r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ep(t),r=S_(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!l_(n)){e.next=19;break}return e.prev=3,e.next=6,ib(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,f_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,a_(n,e.t0);case 17:e.next=2;break;case 19:h_(n)&&d_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),c_.apply(this,arguments)}function l_(e){return Xb(e)&&e.fu.length<10}function f_(e,t){e.fu.push(t);var n=S_(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function h_(e){return Xb(e)&&!S_(e).No()&&e.fu.length>0}function d_(e){S_(e).start()}function p_(e){return v_.apply(this,arguments)}function v_(){return v_=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S_(t).eu();case 1:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function y_(e){return m_.apply(this,arguments)}function m_(){return m_=wt(yt().mark((function e(t){var n,r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S_(t),r=Ae(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=dk.from(i,n,r),e.next=3,u_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,s_(t);case 5:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function w_(e,t){return b_.apply(this,arguments)}function b_(){return b_=wt(yt().mark((function e(t,n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&S_(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Om(i=n.code)||i===Tp.ABORTED){e.next=7;break}return r=t.fu.shift(),S_(t).Mo(),e.next=5,u_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,s_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:h_(t)&&d_(t);case 5:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function __(e,t){return x_.apply(this,arguments)}function x_(){return x_=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ep(t)).asyncQueue.verifyOperationInProgress(),kp("RemoteStore","RemoteStore received new credentials"),i=Xb(r),r._u.add(3),e.next=6,zb(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Bb(r);case 12:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function I_(e,t){return E_.apply(this,arguments)}function E_(){return E_=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ep(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Bb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,zb(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function T_(e){return e.pu||(e.pu=function(e,t,n){var r=Ep(e);return r.su(),new Mb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Zb.bind(null,e),Zr:t_.bind(null,e),Wo:r_.bind(null,e)}),e.wu.push(function(){var t=wt(yt().mark((function t(n){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Yb(e)?$b(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Jb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function S_(e){return e.Iu||(e.Iu=function(e,t,n){var r=Ep(e);return r.su(),new Ub(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:p_.bind(null,e),Zr:w_.bind(null,e),tu:y_.bind(null,e),Zo:g_.bind(null,e)}),e.wu.push(function(){var t=wt(yt().mark((function t(n){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,s_(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(kp("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var C_=function(){function e(t,n,r,i,a){Te(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Cp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ce(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sp(Tp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function A_(e,t){if(wp("AsyncQueue","".concat(t,": ").concat(e)),dv(e))return new Sp(Tp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var N_=function(){function e(t){Te(this,e),this.comparator=t?function(e,n){return t(e,n)||Qp.comparator(e.key,n.key)}:function(e,t){return Qp.comparator(e.key,t.key)},this.keyedMap=jm(),this.sortedSet=new Iv(this.comparator)}return Ce(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),R_=function(){function e(){Te(this,e),this.Tu=new Iv(Qp.comparator)}return Ce(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):xp():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),D_=function(){function e(t,n,r,i,a,o,u,s,c){Te(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ce(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,N_.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),P_=Ce((function e(){Te(this,e),this.Au=void 0,this.listeners=[]})),O_=Ce((function e(){Te(this,e),this.queries=new Mm((function(e){return Wy(e)}),Hy),this.onlineState="Unknown",this.Ru=new Set}));function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=wt(yt().mark((function e(t,n){var r,i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ep(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new P_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=A_(e.t0,"Initialization of query '".concat(Qy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&B_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),M_.apply(this,arguments)}function U_(e,t){return F_.apply(this,arguments)}function F_(){return F_=wt(yt().mark((function e(t,n){var r,i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ep(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function V_(e,t){var n,r=Ep(e),i=!1,a=Ae(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Ae(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&B_(r)}function j_(e,t,n){var r=Ep(e),i=r.queries.get(t);if(i){var a,o=Ae(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function B_(e){e.Ru.forEach((function(e){e.next()}))}var q_=function(){function e(t,n,r){Te(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return Ce(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ae(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new D_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=D_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),z_=function(){function e(t,n){Te(this,e),this.ku=t,this.byteLength=n}return Ce(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),K_=function(){function e(t){Te(this,e),this.It=t}return Ce(e,[{key:"Ji",value:function(e){return vg(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?bg(this.It,e.document,!1):dy.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return fg(e)}}]),e}(),G_=function(){function e(t,n,r){Te(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=H_(t)}return Ce(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=Gp.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new K_(this.It),i=Ae(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=Ae(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Wm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hb(this.localStore,new K_(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=Ae(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,pb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function H_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var W_=Ce((function e(t){Te(this,e),this.key=t})),Q_=Ce((function e(t){Te(this,e),this.key=t})),$_=function(){function e(t,n){Te(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Wm(),this.mutatedKeys=Wm(),this.Gu=Xy(t),this.Qu=new N_(this.Gu)}return Ce(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new R_,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=$y(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xp()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new D_(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new R_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Wm(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Q_(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new W_(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=Wm();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return D_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Y_=Ce((function e(t,n,r){Te(this,e),this.query=t,this.targetId=n,this.view=r})),X_=Ce((function e(t){Te(this,e),this.key=t,this.nc=!1})),J_=function(){function e(t,n,r,i,a,o){Te(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Mm((function(e){return Wy(e)}),Hy),this.rc=new Map,this.oc=new Set,this.uc=new Iv(Qp.comparator),this.cc=new Map,this.ac=new Dw,this.hc={},this.lc=new Map,this.fc=sw.vn(),this.onlineState="Unknown",this.dc=void 0}return Ce(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Z_(e,t){return ex.apply(this,arguments)}function ex(){return ex=wt(yt().mark((function e(t,n){var r,i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Hx(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,ab(r.localStore,Ky(n));case 8:return u=e.sent,r.isPrimaryClient&&Gb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,tx(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t,n,r,i){return nx.apply(this,arguments)}function nx(){return nx=wt(yt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=wt(yt().mark((function e(t,n,r,i){var a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,sb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(_x(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,sb(t.localStore,n,!0);case 3:return o=e.sent,u=new $_(n,o.Hi),s=u.Wu(o.documents),c=Xm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),_x(t,r,l.Xu),f=new Y_(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ep(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!Hy(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ob(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Hb(r.remoteStore,i.targetId),wx(r,i.targetId)})).catch(ov);case 9:e.next=14;break;case 11:return wx(r,i.targetId),e.next=14,ob(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t,n){return ox.apply(this,arguments)}function ox(){return ox=wt(yt().mark((function e(t,n,r){var i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Ep(e),a=qp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Wm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Fm(),s=Wm();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Ae(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=_m(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Em(c.key,l,hy(l.value.mapValue),ym.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Bm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Iv(Vp)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Ex(i,a.changes);case 9:return e.next=11,s_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=A_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),e.prev=1,e.next=4,nb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Ip(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Ip(n.nc):e.removedDocuments.size>0&&(Ip(n.nc),n.nc=!1))})),e.next=8,Ex(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ov(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),sx.apply(this,arguments)}function cx(e,t,n){var r=Ep(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ep(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Ae(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&B_(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=wt(yt().mark((function e(t,n,r){var i,a,o,u,s,c;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ep(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Iv(Qp.comparator)).insert(o,dy.newNoDocument(o,zp.min())),s=Wm().add(o),c=new Ym(zp.min(),new Map,new Sv(Vp),u,s),e.next=9,ux(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),Ix(i),e.next=16;break;case 14:return e.next=16,ob(i.localStore,n,!1).then((function(){return wx(i,n,r)})).catch(ov);case 16:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),i=n.batch.batchId,e.prev=1,e.next=4,eb(r.localStore,n);case 4:return a=e.sent,kx(r,i,null),gx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Ex(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ov(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),dx.apply(this,arguments)}function px(e,t,n){return vx.apply(this,arguments)}function vx(){return vx=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ep(t),e.prev=1,e.next=4,function(e,t){var n=Ep(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ip(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,kx(i,n,r),gx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Ex(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ov(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),vx.apply(this,arguments)}function yx(e,t){return mx.apply(this,arguments)}function mx(){return mx=wt(yt().mark((function e(t,n){var r,i,a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xb((r=Ep(t)).remoteStore)||kp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ep(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=A_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),mx.apply(this,arguments)}function gx(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function kx(e,t,n){var r=Ep(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function wx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Ae(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||bx(e,t)}))}function bx(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Hb(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Ix(e))}function _x(e,t,n){var r,i=Ae(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof W_?(e.ac.addReference(a.key,t),xx(e,a)):a instanceof Q_?(kp("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||bx(e,a.key)):xp()}}catch(o){i.e(o)}finally{i.f()}}function xx(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(kp("SyncEngine","New document in limbo: "+n),e.oc.add(r),Ix(e))}function Ix(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Qp(Gp.fromString(t)),r=e.fc.next();e.cc.set(r,new X_(n)),e.uc=e.uc.insert(n,r),Gb(e.remoteStore,new vk(Ky(Fy(n.path)),r,2,wv.at))}}function Ex(e,t,n){return Tx.apply(this,arguments)}function Tx(){return Tx=wt(yt().mark((function e(t,n,r){var i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ep(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Qw.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=wt(yt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return sv.forEach(n,(function(t){return sv.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return sv.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),dv(e.t0)){e.next=10;break}throw e.t0;case 10:kp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Ae(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Sx(e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ep(t)).currentUser.isEqual(n)){e.next=11;break}return kp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Jw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Sp(Tp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Ex(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Ax(e,t){var n=Ep(e),r=n.cc.get(t);if(r&&r.nc)return Wm().add(r.key);var i=Wm(),a=n.rc.get(t);if(!a)return i;var o,u=Ae(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function Nx(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),e.next=3,sb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&_x(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Dx(e,t){return Px.apply(this,arguments)}function Px(){return Px=wt(yt().mark((function e(t,n){var r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),e.abrupt("return",lb(r.localStore,n).then((function(e){return Ex(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Ox(e,t,n,r){return Lx.apply(this,arguments)}function Lx(){return Lx=wt(yt().mark((function e(t,n,r,i){var a,o;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ep(t),e.next=3,function(e,t){var n=Ep(e),r=Ep(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):sv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,s_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(kx(a,n,i||null),gx(a,n),function(e,t){Ep(Ep(e).mutationQueue).An(t)}(a.localStore,n)):xp();case 11:return e.next=13,Ex(a,o);case 13:e.next=16;break;case 15:kp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Lx.apply(this,arguments)}function Mx(e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=wt(yt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hx(r=Ep(t)),Wx(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Fx(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,I_(r.remoteStore,!0);case 9:o=Ae(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Gb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return wx(r,t),ob(r.localStore,t,!0)})),Hb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Fx(r,c);case 21:return function(e){var t=Ep(e);t.cc.forEach((function(e,n){Hb(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Iv(Qp.comparator)}(r),r.dc=!1,e.next=25,I_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Fx(e,t,n){return Vx.apply(this,arguments)}function Vx(){return Vx=wt(yt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ep(t),a=[],o=[],u=Ae(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,ab(i.localStore,Ky(f[0]));case 11:l=e.sent,h=Ae(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,Nx(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,cb(i.localStore,c);case 36:return m=e.sent,e.next=39,ab(i.localStore,m);case 39:return l=e.sent,e.next=42,tx(i,jx(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Vx.apply(this,arguments)}function jx(e){return Uy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Bx(e){var t=Ep(e);return Ep(Ep(t.localStore).persistence).vi()}function qx(e,t,n,r){return zx.apply(this,arguments)}function zx(){return zx=wt(yt().mark((function e(t,n,r,i){var a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ep(t)).dc){e.next=3;break}return e.abrupt("return",void kp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,lb(a.localStore,Yy(o[0]));case 10:return u=e.sent,s=Ym.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Rv.EMPTY_BYTE_STRING),e.next=14,Ex(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ob(a.localStore,n,!0);case 17:return wx(a,n,i),e.abrupt("break",20);case 19:xp();case 20:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}function Kx(e,t,n){return Gx.apply(this,arguments)}function Gx(){return Gx=wt(yt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Hx(t)).dc){e.next=45;break}a=Ae(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return kp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,cb(i.localStore,u);case 12:return s=e.sent,e.next=15,ab(i.localStore,s);case 15:return c=e.sent,e.next=18,tx(i,jx(s),c.targetId,!1,c.resumeToken);case 18:Gb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Ae(r),e.prev=30,h=yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,ob(i.localStore,t,!1).then((function(){Hb(i.remoteStore,t),wx(i,t)})).catch(ov);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Gx.apply(this,arguments)}function Hx(e){var t=Ep(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ux.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ax.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lx.bind(null,t),t.sc.Wo=V_.bind(null,t.eventManager),t.sc.wc=j_.bind(null,t.eventManager),t}function Wx(e){var t=Ep(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=px.bind(null,t),t}function Qx(e,t,n){var r=Ep(e);(function(){var e=wt(yt().mark((function e(t,n,r){var i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ep(e),r=fg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(H_(i)),a=new G_(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Ex(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Ep(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(bp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var $x=function(){function e(){Te(this,e),this.synchronizeTabs=!1}return Ce(e,[{key:"initialize",value:function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=Pb(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Xw(this.persistence,new $w,e.initialUser,this.It)}},{key:"yc",value:function(e){return new Fw(jw.Bs,this.It)}},{key:"gc",value:function(e){return new Eb}},{key:"terminate",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Yx=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ce(n,[{key:"initialize",value:function(){var e=wt(yt().mark((function e(t){var r=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(De(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Wx(this.Ac.syncEngine);case 6:return e.next=8,s_(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Xw(this.persistence,new $w,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new vw(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new kv(t,this.persistence);return new gv(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ew.withCacheSize(this.cacheSizeBytes):ew.DEFAULT;return new Kw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Rb(),Db(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new Eb}}]),n}($x),Xx=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ce(n,[{key:"initialize",value:function(){var e=wt(yt().mark((function e(t){var r,i=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(De(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof Ib,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:Ox.bind(null,r),$r:qx.bind(null,r),Br:Kx.bind(null,r),vi:Bx.bind(null,r),Mr:Dx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mx(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=Rb();if(!Ib.C(t))throw new Sp(Tp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ib(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Yx),Jx=function(){function e(){Te(this,e)}return Ce(e,[{key:"initialize",value:function(){var e=wt(yt().mark((function e(t,n){var r=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return cx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Sx.bind(null,this.syncEngine),e.next=12,I_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new O_}},{key:"createDatastore",value:function(e){var t,n=Pb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Nb(t));return function(e,t,n,r){return new Fb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return cx(o.syncEngine,e,0)},a=Sb.C()?new Sb:new Tb,new jb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new J_(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ep(t),kp("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,zb(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Zx(e,t,n){if(!n)throw new Sp(Tp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function eI(e,t,n,r){if(!0===t&&!0===r)throw new Sp(Tp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function tI(e){if(!Qp.isDocumentKey(e))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nI(e){if(Qp.isDocumentKey(e))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":xp()}function iI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Sp(Tp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rI(e);throw new Sp(Tp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function aI(e,t){if(t<=0)throw new Sp(Tp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var oI=new Map,uI=function(){function e(t){var n;if(Te(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Sp(Tp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Sp(Tp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,eI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ce(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),sI=function(){function e(t,n,r,i){Te(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uI({}),this._settingsFrozen=!1}return Ce(e,[{key:"app",get:function(){if(!this._app)throw new Sp(Tp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Sp(Tp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Np;switch(e.type){case"gapi":var t=e.client;return new Op(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Sp(Tp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=oI.get(e);t&&(kp("ComponentProvider","Removing Datastore"),oI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function cI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=iI(e,sI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&bp("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=vp.MOCK_USER;else{o=tt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Sp(Tp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new vp(s)}e._authCredentials=new Rp(new Ap(o,u))}}var lI=function(){function e(t,n,r){Te(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ce(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new hI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),fI=function(){function e(t,n,r){Te(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ce(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),hI=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this,e,r,Fy(i)))._path=i,a.type="collection",a}return Ce(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new lI(this.firestore,null,new Qp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(fI);function dI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vt(e),Zx("collection","path",t),e instanceof sI){var a=Gp.fromString.apply(Gp,[t].concat(r));return nI(a),new hI(e,null,a)}if(!(e instanceof lI||e instanceof hI))throw new Sp(Tp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gp.fromString.apply(Gp,[t].concat(r)));return nI(o),new hI(e.firestore,null,o)}function pI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vt(e),1===arguments.length&&(t=Fp.R()),Zx("doc","path",t),e instanceof sI){var a=Gp.fromString.apply(Gp,[t].concat(r));return tI(a),new lI(e,null,new Qp(a))}if(!(e instanceof lI||e instanceof hI))throw new Sp(Tp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gp.fromString.apply(Gp,[t].concat(r)));return tI(o),new lI(e.firestore,e instanceof hI?e.converter:null,new Qp(o))}function vI(e,t){return e=vt(e),t=vt(t),(e instanceof lI||e instanceof hI)&&(t instanceof lI||t instanceof hI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function yI(e,t){return e=vt(e),t=vt(t),e instanceof fI&&t instanceof fI&&e.firestore===t.firestore&&Hy(e._query,t._query)&&e.converter===t.converter}function mI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return wt(yt().mark((function r(){var i;return yt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var gI=function(){function e(t){Te(this,e),this.observer=t,this.muted=!1}return Ce(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):wp("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),kI=function(){function e(t,n){var r=this;Te(this,e),this.Pc=t,this.It=n,this.metadata=new Cp,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return Ce(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=wt(yt().mark((function e(){var t,n,r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new z_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=wt(yt().mark((function e(){var t,n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=wt(yt().mark((function e(){var t,n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wI=function(){function e(t){Te(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ce(e,[{key:"lookup",value:function(){var e=wt(yt().mark((function e(t){var n,r=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Sp(Tp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=wt(yt().mark((function e(t,n){var r,i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),i=gg(r.It)+"/documents",a={documents:n.map((function(e){return pg(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=_g(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ip(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Rm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=wt(yt().mark((function e(){var t,n=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Qp.fromPath(t);n.mutations.push(new Dm(r,n.precondition(r)))})),e.next=7,function(){var e=wt(yt().mark((function e(t,n){var r,i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(t),i=gg(r.It)+"/documents",a={writes:n.map((function(e){return xg(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xp();t=zp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Sp(Tp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(zp.min())?ym.exists(!1):ym.updateTime(t):ym.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zp.min()))throw new Sp(Tp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ym.updateTime(t)}return ym.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),bI=function(){function e(t,n,r,i,a){Te(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Ob(this.asyncQueue,"transaction_retry")}return Ce(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(wt(yt().mark((function t(){var n,r;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new wI(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Bv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Om(t)}return!1}}]),e}(),_I=function(){function e(t,n,r,i){var a=this;Te(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vp.UNAUTHENTICATED,this.clientId=Fp.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return kp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ce(e,[{key:"getConfiguration",value:function(){var e=wt(yt().mark((function e(){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Sp(Tp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Cp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(wt(yt().mark((function n(){var r;return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=A_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function xI(e,t){return II.apply(this,arguments)}function II(){return II=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),kp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Jw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=wt(yt().mark((function e(t,n){var r,i;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,SI(t);case 3:return r=e.sent,kp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return __(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return __(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function SI(e){return CI.apply(this,arguments)}function CI(){return CI=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return kp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,xI(t,new $x);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function AI(e){return NI.apply(this,arguments)}function NI(){return NI=wt(yt().mark((function e(t){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return kp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,EI(t,new Jx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function RI(e){return SI(e).then((function(e){return e.persistence}))}function DI(e){return SI(e).then((function(e){return e.localStore}))}function PI(e){return AI(e).then((function(e){return e.remoteStore}))}function OI(e){return AI(e).then((function(e){return e.syncEngine}))}function LI(e){return AI(e).then((function(e){return e.datastore}))}function MI(e){return UI.apply(this,arguments)}function UI(){return UI=wt(yt().mark((function e(t){var n,r;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Z_.bind(null,n.syncEngine),r.onUnlisten=rx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),UI.apply(this,arguments)}function FI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function i(){return yt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new gI({next:function(a){t.enqueueAndForget((function(){return U_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Sp(Tp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Sp(Tp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new q_(Fy(n.path),a,{includeMetadataChanges:!0,Nu:!0});return L_(e,o)},i.next=3,MI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function VI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function i(){return yt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new gI({next:function(n){t.enqueueAndForget((function(){return U_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Sp(Tp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new q_(n,a,{includeMetadataChanges:!0,Nu:!0});return L_(e,o)},i.next=3,MI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var jI=function(){function e(){var t=this;Te(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ob(this,"async_queue_retry"),this.Wc=function(){var e=Db();e&&kp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Db();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return Ce(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=Db();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new Cp;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=wt(yt().mark((function e(){var t=this;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),dv(e.t0)){e.next=12;break}throw e.t0;case 12:kp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw wp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=C_.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&xp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=wt(yt().mark((function e(){var t;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Ae(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ae(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function BI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Ae(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var qI=function(){function e(){Te(this,e),this._progressObserver={},this._taskCompletionResolver=new Cp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ce(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),zI=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a){var o;return Te(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new jI,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ce(n,[{key:"_terminate",value:function(){return this._firestoreClient||GI(this),this._firestoreClient.terminate()}}]),n}(sI);function KI(e){return e._firestoreClient||GI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function GI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Vv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new _I(e._authCredentials,e._appCheckCredentials,e._queue,r)}function HI(e,t,n){var r=new Cp;return e.asyncQueue.enqueue(wt(yt().mark((function i(){var a;return yt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,xI(e,n);case 3:return i.next=5,EI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Tp.FAILED_PRECONDITION||e.code===Tp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:bp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function WI(e){return function(e){return e.asyncQueue.enqueue(wt(yt().mark((function t(){var n,r;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RI(e);case 2:return n=t.sent,t.next=5,PI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ep(e);return t._u.delete(0),Bb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(KI(e=iI(e,zI)))}function QI(e){return function(e){return e.asyncQueue.enqueue(wt(yt().mark((function t(){var n,r;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RI(e);case 2:return n=t.sent,t.next=5,PI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ep(t))._u.add(0),e.next=4,zb(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(KI(e=iI(e,zI)))}function $I(e,t){var n=KI(e=iI(e,zI)),r=new qI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new kI(e,t)}(function(e,t){if(e instanceof Uint8Array)return mI(e,t);if(e instanceof ArrayBuffer)return mI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Pb(t));e.asyncQueue.enqueueAndForget(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Qx,t.next=3,OI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function YI(e,t){return function(e,t){return e.asyncQueue.enqueue(wt(yt().mark((function n(){return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ep(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,DI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(KI(e=iI(e,zI)),t).then((function(t){return t?new fI(e,null,t.query):null}))}function XI(e){if(e._initialized||e._terminated)throw new Sp(Tp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var JI=function(){function e(t){Te(this,e),this._byteString=t}return Ce(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Rv.fromBase64String(t))}catch(t){throw new Sp(Tp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Rv.fromUint8Array(t))}}]),e}(),ZI=function(){function e(){Te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wp(n)}return Ce(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var eE=Ce((function e(t){Te(this,e),this._methodName=t})),tE=function(){function e(t,n){if(Te(this,e),!isFinite(t)||t<-90||t>90)throw new Sp(Tp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Sp(Tp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ce(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Vp(this._lat,e._lat)||Vp(this._long,e._long)}}]),e}(),nE=/^__.*__$/,rE=function(){function e(t,n,r){Te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ce(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Em(e,this.data,this.fieldMask,t,this.fieldTransforms):new Im(e,this.data,t,this.fieldTransforms)}}]),e}(),iE=function(){function e(t,n,r){Te(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ce(e,[{key:"toMutation",value:function(e,t){return new Em(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function aE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xp()}}var oE=function(){function e(t,n,r,i,a,o){Te(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ce(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return TE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(aE(this.sa)&&nE.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),uE=function(){function e(t,n,r){Te(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||Pb(t)}return Ce(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new oE({sa:e,methodName:t,fa:n,path:Wp.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function sE(e){var t=e._freezeSettings(),n=Pb(e._databaseId);return new uE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);_E("Data must be an object, but it was:",o,r);var u,s,c=wE(r,o);if(a.merge)u=new Nv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Ae(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=xE(t,d,n);if(!o.contains(p))throw new Sp(Tp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));SE(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Nv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new rE(new fy(c),u,s)}var lE=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(eE);function fE(e,t,n){return new oE({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var hE=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"_toFieldTransform",value:function(e){return new pm(e.path,new om)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(eE),dE=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e))._a=r,i}return Ce(n,[{key:"_toFieldTransform",value:function(e){var t=fE(this,e,!0),n=this._a.map((function(e){return kE(e,t)})),r=new um(n);return new pm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(eE),pE=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e))._a=r,i}return Ce(n,[{key:"_toFieldTransform",value:function(e){var t=fE(this,e,!0),n=this._a.map((function(e){return kE(e,t)})),r=new cm(n);return new pm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(eE),vE=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e)).wa=r,i}return Ce(n,[{key:"_toFieldTransform",value:function(e){var t=new fm(e.It,tm(e.It,this.wa));return new pm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(eE);function yE(e,t,n,r){var i=e.da(1,t,n);_E("Data must be an object, but it was:",i,r);var a=[],o=fy.empty();_v(r,(function(e,r){var u=EE(t,e,n);r=vt(r);var s=i.ca(u);if(r instanceof lE)a.push(u);else{var c=kE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Nv(a);return new iE(o,u,i.fieldTransforms)}function mE(e,t,n,r,i,a){var o=e.da(1,t,n),u=[xE(t,r,n)],s=[i];if(a.length%2!=0)throw new Sp(Tp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(xE(t,a[c])),s.push(a[c+1]);for(var l=[],f=fy.empty(),h=u.length-1;h>=0;--h)if(!SE(l,u[h])){var d=u[h],p=s[h];p=vt(p);var v=o.ca(d);if(p instanceof lE)l.push(d);else{var y=kE(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Nv(l);return new iE(f,m,o.fieldTransforms)}function gE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kE(n,e.da(r?4:3,t))}function kE(e,t){if(bE(e=vt(e)))return _E("Unsupported field value:",t,e),wE(e,t);if(e instanceof eE)return function(e,t){if(!aE(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Ae(e);try{for(a.s();!(n=a.n()).done;){var o=kE(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return tm(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=qp.fromDate(e);return{timestampValue:sg(t.It,n)}}if(e instanceof qp){var r=new qp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sg(t.It,r)}}if(e instanceof tE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof JI)return{bytesValue:cg(t.It,e._byteString)};if(e instanceof lI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:hg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(rI(e)))}(e,t)}function wE(e,t){var n={};return xv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_v(e,(function(e,r){var i=kE(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function bE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof qp||e instanceof tE||e instanceof JI||e instanceof lI||e instanceof eE)}function _E(e,t,n){if(!bE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=rI(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function xE(e,t,n){if((t=vt(t))instanceof ZI)return t._internalPath;if("string"==typeof t)return EE(e,t);throw TE("Field path arguments must be of type string or ",e,!1,void 0,n)}var IE=new RegExp("[~\\*/\\[\\]]");function EE(e,t,n){if(t.search(IE)>=0)throw TE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ue(ZI,gt(t.split(".")))._internalPath}catch(r){throw TE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function TE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Sp(Tp.INVALID_ARGUMENT,u+e+s)}function SE(e,t){return e.some((function(e){return e.isEqual(t)}))}var CE=function(){function e(t,n,r,i,a){Te(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ce(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new lI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new AE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(NE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),AE=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"data",value:function(){return $n(De(n.prototype),"data",this).call(this)}}]),n}(CE);function NE(e,t){return"string"==typeof t?EE(e,t):t instanceof ZI?t._internalPath:t._delegate._internalPath}function RE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Sp(Tp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var DE=Ce((function e(){Te(this,e)}));function PE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var OE=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return Ce(n,[{key:"_apply",value:function(e){var t=sE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){GE(o,a);var s,c=[],l=Ae(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(KE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=KE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||GE(o,a),u=gE(n,"where",o,"in"===a||"not-in"===a);var h=_y.create(i,a,u);return function(e,t){if(t.dt()){var n=By(e);if(null!==n&&!n.isEqual(t.field))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=jy(e);null!==r&&HE(e,t.field,r)}var i=function(e,t){var n,r=Ae(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Sp(Tp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Sp(Tp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new fI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new My(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(DE);var LE=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return Ce(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Dy(t,n);return function(e,t){if(null===jy(e)){var n=By(e);null!==n&&HE(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new fI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new My(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(DE);var ME=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return Ce(n,[{key:"_apply",value:function(e){return new fI(e.firestore,e.converter,Gy(e._query,this.Ia,this.Ta))}}]),n}(DE);var UE=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return Ce(n,[{key:"_apply",value:function(e){var t=zE(e,this.type,this.Ea,this.Aa);return new fI(e.firestore,e.converter,function(e,t){return new My(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(DE);function FE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UE("startAt",t,!0)}function VE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UE("startAfter",t,!1)}var jE=function(e){Re(n,e);var t=Me(n);function n(e,r,i){var a;return Te(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return Ce(n,[{key:"_apply",value:function(e){var t=zE(e,this.type,this.Ea,this.Aa);return new fI(e.firestore,e.converter,function(e,t){return new My(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(DE);function BE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jE("endBefore",t,!1)}function qE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jE("endAt",t,!0)}function zE(e,t,n,r){if(n[0]=vt(n[0]),n[0]instanceof CE)return function(e,t,n,r,i){if(!r)throw new Sp(Tp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Ae(zy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Zv(t,r.key));else{var c=r.data.field(s.field);if(Mv(c))throw new Sp(Tp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ry(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=sE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Sp(Tp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!qy(e)&&-1!==c.indexOf("/"))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Gp.fromString(c));if(!Qp.isDocumentKey(l))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Qp(l);u.push(Zv(t,f))}else{var h=gE(n,r,c);u.push(h)}}return new Ry(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function KE(e,t,n){if("string"==typeof(n=vt(n))){if(""===n)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qy(t)&&-1!==n.indexOf("/"))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Gp.fromString(n));if(!Qp.isDocumentKey(r))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zv(e,new Qp(r))}if(n instanceof lI)return Zv(e,n._key);throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(rI(n),"."))}function GE(e,t){if(!Array.isArray(e)||0===e.length)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function HE(e,t,n){if(!n.isEqual(t))throw new Sp(Tp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var WE=function(){function e(){Te(this,e)}return Ce(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ov(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return _v(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new tE(Ov(e.latitude),Ov(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Uv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Pv(e);return new qp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Gp.fromString(e);Ip(Mg(n));var r=new jv(n.get(1),n.get(3)),i=new Qp(n.popFirst(5));return r.isEqual(t)||wp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function QE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var $E=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ce(n,[{key:"convertBytes",value:function(e){return new JI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lI(this.firestore,null,t)}}]),n}(WE),YE=function(){function e(t,n){Te(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ce(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),XE=function(e){Re(n,e);var t=Me(n);function n(e,r,i,a,o,u){var s;return Te(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ce(n,[{key:"exists",value:function(){return $n(De(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new JE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(NE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(CE),JE=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $n(De(n.prototype),"data",this).call(this,e)}}]),n}(XE),ZE=function(){function e(t,n,r,i){Te(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new YE(i.hasPendingWrites,i.fromCache),this.query=r}return Ce(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new JE(n._firestore,n._userDataWriter,r.key,r,new YE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Sp(Tp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new JE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new JE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:eT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function eT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xp()}}function tT(e,t){return e instanceof XE&&t instanceof XE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ZE&&t instanceof ZE&&e._firestore===t._firestore&&yI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var nT=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ce(n,[{key:"convertBytes",value:function(e){return new JI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lI(this.firestore,null,t)}}]),n}(WE);function rT(e){e=iI(e,lI);var t=iI(e.firestore,zI),n=KI(t),r=new nT(t);return function(e,t){var n=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function r(){return yt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=wt(yt().mark((function e(t,n,r){var i,a;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ep(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Sp(Tp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=A_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,DI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new XE(t,r,e._key,n,new YE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function iT(e){e=iI(e,fI);var t=iI(e.firestore,zI),n=KI(t),r=new nT(t);return function(e,t){var n=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function r(){return yt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=wt(yt().mark((function e(t,n,r){var i,a,o,u,s;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sb(t,n,!0);case 3:i=e.sent,a=new $_(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=A_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,DI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ZE(t,r,e,n)}))}function aT(e,t,n){e=iI(e,lI);var r=iI(e.firestore,zI),i=QE(e.converter,t,n);return cT(r,[cE(sE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ym.none())])}function oT(e,t,n){e=iI(e,lI);for(var r=iI(e.firestore,zI),i=sE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return cT(r,[("string"==typeof(t=vt(t))||t instanceof ZI?mE(i,"updateDoc",e._key,t,n,o):yE(i,"updateDoc",e._key,t)).toMutation(e._key,ym.exists(!0))])}function uT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=vt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||BI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(BI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof lI)l=iI(e.firestore,zI),f=Fy(e._key.path),c={next:function(t){n[s]&&n[s](lT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=iI(e,fI);l=iI(p.firestore,zI),f=p._query;var v=new nT(l);c={next:function(e){n[s]&&n[s](new ZE(l,v,p,e))},error:n[s+1],complete:n[s+2]},RE(e._query)}return function(e,t,n,r){var i=new gI(r),a=new q_(t,i,n);return e.asyncQueue.enqueueAndForget(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=L_,t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=U_,t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(KI(l),f,h,c)}function sT(e,t){return function(e,t){var n=new gI(t);return e.asyncQueue.enqueueAndForget(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ep(e).Ru.add(t),t.next()},t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(wt(yt().mark((function t(){return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ep(e).Ru.delete(t)},t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(KI(e=iI(e,zI)),BI(t)?t:{next:t})}function cT(e,t){return function(e,t){var n=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function r(){return yt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ax,r.next=3,OI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(KI(e),t)}function lT(e,t,n){var r=n.docs.get(t._key),i=new nT(e);return new XE(e,i,t._key,r,new YE(n.hasPendingWrites,n.fromCache),t.converter)}var fT={maxAttempts:5},hT=function(){function e(t,n){Te(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sE(t)}return Ce(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dT(e,this._firestore),i=QE(r.converter,t,n),a=cE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ym.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=vt(t))||t instanceof ZI?mE(this._dataReader,"WriteBatch.update",i._key,t,n,o):yE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ym.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dT(e,this._firestore);return this._mutations=this._mutations.concat(new Rm(t._key,ym.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Sp(Tp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dT(e,t){if((e=vt(e)).firestore!==t)throw new Sp(Tp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pT=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ce(n,[{key:"get",value:function(e){var t=this,r=dT(e,this._firestore),i=new nT(this._firestore);return $n(De(n.prototype),"get",this).call(this,e).then((function(e){return new XE(t._firestore,i,r._key,e._document,new YE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Te(this,e),this._firestore=t,this._transaction=n,this._dataReader=sE(t)}return Ce(e,[{key:"get",value:function(e){var t=this,n=dT(e,this._firestore),r=new $E(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return xp();var i=e[0];if(i.isFoundDocument())return new CE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new CE(t._firestore,r,n._key,null,n.converter);throw xp()}))}},{key:"set",value:function(e,t,n){var r=dT(e,this._firestore),i=QE(r.converter,t,n),a=cE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=vt(t))||t instanceof ZI?mE(this._dataReader,"Transaction.update",i._key,t,n,o):yE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function vT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dE("arrayUnion",t)}function yT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){yp=e}(mn),ln(new bt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new zI(new Dp(e.getProvider("auth-internal")),new Mp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Sp(Tp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jv(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),xn(pp,"3.7.3",e),xn(pp,"3.7.3","esm2017")}();function mT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Sp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function gT(){if("undefined"===typeof Uint8Array)throw new Sp("unimplemented","Uint8Arrays are not available in this environment.")}function kT(){if("undefined"==typeof atob)throw new Sp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var wT=function(){function e(t){Te(this,e),this._delegate=t}return Ce(e,[{key:"toBase64",value:function(){return kT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return gT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return kT(),new e(JI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return gT(),new e(JI.fromUint8Array(t))}}]),e}();function bT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Ae(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var _T=function(){function e(){Te(this,e)}return Ce(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){XI(e=iI(e,zI));var n=KI(e),r=e._freezeSettings(),i=new Jx;return HI(n,i,new Yx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){XI(e=iI(e,zI));var t=KI(e),n=e._freezeSettings(),r=new Jx;return HI(t,r,new Xx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Sp(Tp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Cp;return e._queue.enqueueAndForgetEvenWhileRestricted(wt(yt().mark((function n(){return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=wt(yt().mark((function e(t){var n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lv.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,lv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ww(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),xT=function(){function e(t,n,r){var i=this;Te(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof jv||(this._appCompat=t)}return Ce(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||bp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return WI(this._delegate)}},{key:"disableNetwork",value:function(){return QI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&eI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function n(){return yt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=yx,n.next=3,OI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(KI(e=iI(e,zI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return sT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Sp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new UT(this,dI(this._delegate,e))}catch(t){throw AT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new CT(this,pI(this._delegate,e))}catch(t){throw AT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new OT(this,function(e,t){if(e=iI(e,sI),Zx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Sp(Tp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new fI(e,null,function(e){return new My(Gp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw AT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=iI(e,zI);var r=Object.assign(Object.assign({},fT),n);return function(e){if(e.maxAttempts<1)throw new Sp(Tp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Cp;return e.asyncQueue.enqueueAndForget(wt(yt().mark((function i(){var a;return yt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,LI(e);case 2:a=i.sent,new bI(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(KI(e),(function(n){return t(new pT(e,n))}),r)}(this._delegate,(function(n){return e(new ET(t,n))}))}},{key:"batch",value:function(){var e=this;return KI(this._delegate),new TT(new hT(this._delegate,(function(t){return cT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return $I(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return YI(this._delegate,e).then((function(e){return e?new OT(t,e):null}))}}]),e}(),IT=function(e){Re(n,e);var t=Me(n);function n(e){var r;return Te(this,n),(r=t.call(this)).firestore=e,r}return Ce(n,[{key:"convertBytes",value:function(e){return new wT(new JI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return CT.forKey(t,this.firestore,null)}}]),n}(WE);var ET=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new IT(t)}return Ce(e,[{key:"get",value:function(e){var t=this,n=FT(e);return this._delegate.get(n).then((function(e){return new DT(t._firestore,new XE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=FT(e);return n?(mT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=FT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=FT(e);return this._delegate.delete(t),this}}]),e}(),TT=function(){function e(t){Te(this,e),this._delegate=t}return Ce(e,[{key:"set",value:function(e,t,n){var r=FT(e);return n?(mT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=FT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=FT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ST=function(){function e(t,n,r){Te(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ce(e,[{key:"fromFirestore",value:function(e,t){var n=new JE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new PT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new IT(t),n),i.set(n,a)),a}}]),e}();ST.INSTANCES=new WeakMap;var CT=function(){function e(t,n){Te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new IT(t)}return Ce(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new UT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new UT(this.firestore,dI(this._delegate,e))}catch(t){throw AT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=vt(e))instanceof lI&&vI(this._delegate,e)}},{key:"set",value:function(e,t){t=mT("DocumentReference.set",t);try{return t?aT(this._delegate,e,t):aT(this._delegate,e)}catch(n){throw AT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?oT(this._delegate,e):oT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw AT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return cT(iI(e.firestore,zI),[new Rm(e._key,ym.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=NT(n),a=RT(n,(function(t){return new DT(e.firestore,new XE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return uT(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iI(e,lI);var t=iI(e.firestore,zI);return FI(KI(t),e._key,{source:"server"}).then((function(n){return lT(t,e,n)}))}(this._delegate):function(e){e=iI(e,lI);var t=iI(e.firestore,zI);return FI(KI(t),e._key).then((function(n){return lT(t,e,n)}))}(this._delegate),t.then((function(e){return new DT(n.firestore,new XE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ST.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Sp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new lI(n._delegate,r,new Qp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new lI(n._delegate,r,t))}}]),e}();function AT(e,t,n){return e.message=e.message.replace(t,n),e}function NT(e){var t,n=Ae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!bT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function RT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=bT(e[0])?e[0]:bT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var DT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ce(e,[{key:"ref",get:function(){return new CT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tT(this._delegate,e._delegate)}}]),e}(),PT=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||xp()}(void 0!==t),t}}]),n}(DT),OT=function(){function e(t,n){Te(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new IT(t)}return Ce(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,PE(this._delegate,function(e,t,n){var r=t,i=NE("where",e);return new OE(i,r,n)}(t,n,r)))}catch(i){throw AT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,PE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=NE("orderBy",e);return new LE(n,t)}(t,n)))}catch(r){throw AT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,PE(this._delegate,function(e){return aI("limit",e),new ME("limit",e,"F")}(t)))}catch(n){throw AT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,PE(this._delegate,function(e){return aI("limitToLast",e),new ME("limitToLast",e,"L")}(t)))}catch(n){throw AT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,PE(this._delegate,FE.apply(void 0,arguments)))}catch(t){throw AT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,PE(this._delegate,VE.apply(void 0,arguments)))}catch(t){throw AT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,PE(this._delegate,BE.apply(void 0,arguments)))}catch(t){throw AT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,PE(this._delegate,qE.apply(void 0,arguments)))}catch(t){throw AT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return yI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?iT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iI(e,fI);var t=iI(e.firestore,zI),n=KI(t),r=new nT(t);return VI(n,e._query,{source:"server"}).then((function(n){return new ZE(t,r,e,n)}))}(this._delegate):function(e){e=iI(e,fI);var t=iI(e.firestore,zI),n=KI(t),r=new nT(t);return RE(e._query),VI(n,e._query).then((function(n){return new ZE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new MT(n.firestore,new ZE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=NT(n),a=RT(n,(function(t){return new MT(e.firestore,new ZE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return uT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ST.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),LT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ce(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new PT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),MT=function(){function e(t,n){Te(this,e),this._firestore=t,this._delegate=n}return Ce(e,[{key:"query",get:function(){return new OT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new PT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new LT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new PT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tT(this._delegate,e._delegate)}}]),e}(),UT=function(e){Re(n,e);var t=Me(n);function n(e,r){var i;return Te(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ce(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new CT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new CT(this.firestore,void 0===e?pI(this._delegate):pI(this._delegate,e))}catch(t){throw AT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=iI(e.firestore,zI),r=pI(e),i=QE(e.converter,t);return cT(n,[cE(sE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ym.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new CT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return vI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ST.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(OT);function FT(e){return iI(e,lI)}var VT=function(){function e(){Te(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Ue(ZI,n)}return Ce(e,[{key:"isEqual",value:function(e){return(e=vt(e))instanceof ZI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Wp.keyField().canonicalString())}}]),e}(),jT=function(){function e(t){Te(this,e),this._delegate=t}return Ce(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new hE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new lE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=vT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=yT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new vE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),BT={Firestore:xT,GeoPoint:tE,Timestamp:qp,Blob:wT,Transaction:ET,WriteBatch:TT,DocumentReference:CT,DocumentSnapshot:DT,Query:OT,QueryDocumentSnapshot:PT,QuerySnapshot:MT,CollectionReference:UT,FieldPath:VT,FieldValue:jT,setLogLevel:function(e){!function(e){mp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new bt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},BT)))}(e,(function(e,t){return new xT(e,t,new _T)})),e.registerVersion("@firebase/firestore-compat","0.2.3")}(Wn);var qT="firebasestorage.googleapis.com",zT=function(e){Re(n,e);var t=Me(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Te(this,n),(i=t.call(this,KT(e),"Firebase Storage: ".concat(r," (").concat(KT(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Ne(i),n.prototype),i}return Ce(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return KT(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(nt);function KT(e){return"storage/"+e}function GT(){return new zT("unknown","An unknown error occurred, please check the error payload for server response.")}function HT(){return new zT("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function WT(){return new zT("canceled","User canceled the upload/download.")}function QT(){return new zT("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $T(e){return new zT("invalid-argument",e)}function YT(){return new zT("app-deleted","The Firebase app was deleted.")}function XT(e){return new zT("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JT(e,t){return new zT("invalid-format","String does not match format '"+e+"': "+t)}function ZT(e){throw new zT("internal-error","Internal error: "+e)}var eS,tS=function(){function e(t,n){Te(this,e),this.bucket=t,this.path_=n}return Ce(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new zT("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===qT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new zT("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),nS=function(){function e(t){Te(this,e),this.promise_=Promise.reject(t)}return Ce(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function rS(e){return"string"===typeof e||e instanceof String}function iS(e){return aS()&&e instanceof Blob}function aS(){return"undefined"!==typeof Blob&&!He()}function oS(e,t,n,r){if(r<t)throw $T("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw $T("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function uS(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function sS(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function cS(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(eS||(eS={}));var lS=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];Te(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ce(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=GT();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?YT():WT());else i(HT())}};this.canceled_?t(0,new fS(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new fS(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===eS.NO_ERROR,a=r.getStatus();if(n&&!cS(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new fS(o,r))}else{var u=r.getErrorCode()===eS.ABORT;t(!1,new fS(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),fS=Ce((function e(t,n,r){Te(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function hS(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function dS(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function pS(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vS(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function yS(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=sS(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return pS(c,t),hS(c,n),dS(c,a),vS(c,r),new lS(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function mS(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gS(){for(var e=mS(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(aS())return new Blob(n);throw new zT("unsupported-environment","This browser doesn't seem to support creating Blobs")}function kS(e){if("undefined"===typeof atob)throw new zT("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var wS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},bS=Ce((function e(t,n){Te(this,e),this.data=t,this.contentType=n||null}));function _S(e,t){switch(e){case wS.RAW:return new bS(xS(t));case wS.BASE64:case wS.BASE64URL:return new bS(IS(e,t));case wS.DATA_URL:return new bS(function(e){var t=new ES(e);return t.base64?IS(wS.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw JT(wS.DATA_URL,"Malformed data URL.")}return xS(t)}(t.rest)}(t),new ES(t).contentType)}throw GT()}function xS(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function IS(e,t){switch(e){case wS.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw JT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case wS.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw JT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=kS(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw JT(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var ES=Ce((function e(t){Te(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw JT(wS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var TS=function(){function e(t,n){Te(this,e);var r=0,i="";iS(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ce(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(iS(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(aS()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(gS.apply(null,i))}var a=n.map((function(e){return rS(e)?_S(wS.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function SS(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function CS(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function AS(e,t){return t}var NS=Ce((function e(t,n,r,i){Te(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||AS})),RS=null;function DS(){if(RS)return RS;var e=[];e.push(new NS("bucket")),e.push(new NS("generation")),e.push(new NS("metageneration")),e.push(new NS("name","fullPath",!0));var t=new NS("name");t.xform=function(e,t){return function(e){return!rS(e)||e.length<2?e:CS(e)}(t)},e.push(t);var n=new NS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new NS("timeCreated")),e.push(new NS("updated")),e.push(new NS("md5Hash",null,!0)),e.push(new NS("cacheControl",null,!0)),e.push(new NS("contentDisposition",null,!0)),e.push(new NS("contentEncoding",null,!0)),e.push(new NS("contentLanguage",null,!0)),e.push(new NS("contentType",null,!0)),e.push(new NS("metadata","customMetadata",!0)),RS=e}function PS(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new tS(n,r);return t._makeStorageReference(i)}})}(r,e),r}function OS(e,t,n){var r=SS(t);return null===r?null:PS(e,r,n)}function LS(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function MS(e,t,n){var r=SS(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Ae(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new tS(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=Ae(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new tS(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var US=Ce((function e(t,n,r,i){Te(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function FS(e){if(!e)throw GT()}function VS(e,t){return function(n,r){var i=OS(e,r,t);return FS(null!==i),i}}function jS(e,t){return function(n,r){var i=OS(e,r,t);return FS(null!==i),function(e,t,n,r){var i=SS(t);if(null===i)return null;if(!rS(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return uS("/b/"+o(i)+"/o/"+o(a),n,r)+sS({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function BS(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new zT("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new zT("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new zT("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new zT("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function qS(e){var t=BS(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new zT("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function zS(e,t,n){var r=uS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new US(r,"GET",VS(e,n),i);return a.errorHandler=qS(t),a}function KS(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=uS(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new US(o,"GET",function(e,t){return function(n,r){var i=MS(e,t,r);return FS(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=BS(t),s}function GS(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function HS(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=GS(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+LS(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=TS.getBlob(c,r,l);if(null===f)throw QT();var h={name:s.fullPath},d=uS(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new US(d,"POST",VS(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=BS(t),v}var WS=Ce((function e(t,n,r,i){Te(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function QS(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){FS(!1)}return FS(!!n&&-1!==(t||["active"]).indexOf(n)),n}var $S=262144;function YS(e,t,n,r,i,a,o,u){var s=new WS(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new zT("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw QT();var v=t.maxUploadRetryTime,y=new US(n,"POST",(function(e,n){var i,o=QS(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?VS(t,a)(e,n):null,new WS(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=BS(e),y}var XS={STATE_CHANGED:"state_changed"},JS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ZS(e){switch(e){case"running":case"pausing":case"canceling":return JS.RUNNING;case"paused":return JS.PAUSED;case"success":return JS.SUCCESS;case"canceled":return JS.CANCELED;default:return JS.ERROR}}var eC=Ce((function e(t,n,r){Te(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function tC(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var nC=function(){function e(){var t=this;Te(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eS.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=eS.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=eS.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ce(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw ZT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw ZT("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw ZT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw ZT("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw ZT("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),rC=function(e){Re(n,e);var t=Me(n);function n(){return Te(this,n),t.apply(this,arguments)}return Ce(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(nC);function iC(){return new rC}var aC=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Te(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=DS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled"))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(cS(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=HT()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ce(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=o(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=GS(t,r,i),u={name:o.fullPath},s=uS(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=LS(o,n),f=e.maxUploadRetryTime,h=new US(s,"POST",(function(e){var t;QS(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){FS(!1)}return FS(rS(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=BS(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,iC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new US(n,"POST",(function(e){var t=QS(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){FS(!1)}n||FS(!1);var i=Number(n);return FS(!isNaN(i)),new WS(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=BS(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,iC,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=$S*this._chunkMultiplier,n=new WS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=YS(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,iC,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*($S*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=zS(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,iC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=HS(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,iC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=WT(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=ZS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new eC(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(ZS(this._state)){case JS.SUCCESS:tC(this._resolve.bind(null,this.snapshot))();break;case JS.CANCELED:case JS.ERROR:tC(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(ZS(this._state)){case JS.RUNNING:case JS.PAUSED:e.next&&tC(e.next.bind(e,this.snapshot))();break;case JS.SUCCESS:e.complete&&tC(e.complete.bind(e))();break;default:e.error&&tC(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),oC=function(){function e(t,n){Te(this,e),this._service=t,this._location=n instanceof tS?n:tS.makeFromUrl(n,t.host)}return Ce(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new tS(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return CS(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new tS(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw XT(e)}}]),e}();function uC(e,t,n){return sC.apply(this,arguments)}function sC(){return(sC=wt(yt().mark((function e(t,n,r){var i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,cC(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,gt(u.prefixes)),(a=n.items).push.apply(a,gt(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,uC(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cC(e,t){null!=t&&"number"===typeof t.maxResults&&oS("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=KS(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,iC)}function lC(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=uS(t.fullServerUrl(),e.host,e._protocol),a=LS(n,r),o=e.maxOperationRetryTime,u=new US(i,"PATCH",VS(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=qS(t),u}(e.storage,e._location,t,DS());return e.storage.makeRequestWithTokens(n,iC)}function fC(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=uS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new US(r,"GET",jS(e,n),i);return a.errorHandler=qS(t),a}(e.storage,e._location,DS());return e.storage.makeRequestWithTokens(t,iC).then((function(e){if(null===e)throw new zT("no-download-url","The given file does not have any download URLs.");return e}))}function hC(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=uS(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new US(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=qS(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iC)}function dC(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new tS(e._location.bucket,n);return new oC(e.storage,r)}function pC(e,t){if(e instanceof gC){var n=e;if(null==n._bucket)throw new zT("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new oC(n,n._bucket);return null!=t?pC(r,t):r}return void 0!==t?dC(e,t):e}function vC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof gC)return new oC(e,t);throw $T("To use ref(service, url), the first argument must be a Storage instance.")}return pC(e,t)}function yC(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:tS.makeFromBucketSpec(n,e)}function mC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:tt(i,e.app.options.projectId))}var gC=function(){function e(t,n,r,i,a){Te(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=qT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?tS.makeFromBucketSpec(i,this._host):yC(this._host,this.app.options)}return Ce(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=tS.makeFromBucketSpec(this._url,e):this._bucket=yC(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=wt(yt().mark((function e(){var t,n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=wt(yt().mark((function e(){var t,n;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new oC(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new nS(YT());var o=yS(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=wt(yt().mark((function e(t,n){var r,i,a,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=o(r,2),a=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,a,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),kC="@firebase/storage",wC="0.9.14",bC="storage";function _C(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new aC(e,new TS(t),n)}(e=vt(e),t,n)}function xC(e){return function(e){e._throwIfRoot("getMetadata");var t=zS(e.storage,e._location,DS());return e.storage.makeRequestWithTokens(t,iC)}(e=vt(e))}function IC(e){return function(e){var t={prefixes:[],items:[]};return uC(e,t).then((function(){return t}))}(e=vt(e))}function EC(e,t){return vC(e=vt(e),t)}function TC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};mC(e,t,n,r)}function SC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new gC(r,i,a,n,mn)}ln(new bt(bC,SC,"PUBLIC").setMultipleInstances(!0)),xn(kC,wC,""),xn(kC,wC,"esm2017");var CC=function(){function e(t,n,r){Te(this,e),this._delegate=t,this.task=n,this.ref=r}return Ce(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),AC=function(){function e(t,n){Te(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ce(e,[{key:"snapshot",get:function(){return new CC(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new CC(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new CC(e,i,i._ref))}:{next:t.next?function(e){return t.next(new CC(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),NC=function(){function e(t,n){Te(this,e),this._delegate=t,this._service=n}return Ce(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new RC(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new RC(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),RC=function(){function e(t,n){Te(this,e),this._delegate=t,this.storage=n}return Ce(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return dC(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new AC(_C(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wS.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=_S(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new AC(new aC(this._delegate,new TS(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return IC(this._delegate).then((function(t){return new NC(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return cC(e=vt(e),t)}(this._delegate,e||void 0).then((function(e){return new NC(e,t.storage)}))}},{key:"getMetadata",value:function(){return xC(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return lC(e=vt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return fC(vt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),hC(vt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw XT(e)}}]),e}(),DC=function(){function e(t,n){Te(this,e),this.app=t,this._delegate=n}return Ce(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(PC(e))throw $T("ref() expected a child path but got a URL, use refFromURL instead.");return new RC(EC(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!PC(e))throw $T("refFromURL() expected a full URL but got a child path, use ref() instead.");try{tS.makeFromUrl(e,this._delegate.host)}catch(t){throw $T("refFromUrl() expected a valid full URL but got an invalid one.")}return new RC(EC(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};TC(this._delegate,e,t,n)}}]),e}();function PC(e){return/^[A-Za-z]+:\/\//.test(e)}function OC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new DC(r,i)}!function(e){var t={TaskState:JS,TaskEvent:XS,StringFormat:wS,Storage:DC,Reference:RC};e.INTERNAL.registerComponent(new bt("storage-compat",OC,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.22")}(Wn);Wn.initializeApp({apiKey:"AIzaSyB4YqfsYrQd-AiRLKlaXnasDgvPfNfdlZ8",authDomain:"dyslexia-discrimination-test.firebaseapp.com",projectId:"dyslexia-discrimination-test",storageBucket:"dyslexia-discrimination-test.appspot.com",messagingSenderId:"1028777862495",appId:"1:1028777862495:web:ce13e63476565decc302ea"});var LC=Wn.auth(),MC=Wn.firestore(),UC=Wn.storage(),FC=function(){var e=o((0,c.useState)(""),2),t=e[0],n=e[1],r=o((0,c.useState)(""),2),i=r[0],a=r[1],u=o((0,c.useState)(!0),2),s=u[0],l=u[1],f=o((0,c.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,r=t.name,i=t.value;"email"===r?n(i):"password"===r&&a(i)},v=function(){var e=wt(yt().mark((function e(n){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!s){e.next=8;break}return e.next=5,LC.createUserWithEmailAndPassword(t,i);case 5:e.sent,e.next=11;break;case 8:return e.next=10,LC.signInWithEmailAndPassword(t,i);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,me.jsx)(me.Fragment,{children:(0,me.jsx)("div",{className:"auth_main",children:(0,me.jsxs)("form",{onSubmit:v,className:"auth_form",children:[(0,me.jsxs)("div",{className:"auth_title",children:["EMAIL : \xa0",(0,me.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:t,className:"auth_text",onChange:p})]}),(0,me.jsxs)("div",{className:"auth_title",children:["\xa0\xa0\xa0PW : \xa0",(0,me.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,className:"auth_text",onChange:p})]}),(0,me.jsx)("br",{}),(0,me.jsxs)("div",{children:[(0,me.jsx)("input",{className:"all_button",type:"submit",value:s?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778"}),(0,me.jsx)("span",{onClick:function(){return l((function(e){return!e}))},className:"all_button",children:s?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"}),h&&(0,me.jsx)("span",{children:h})]})]})})})},VC=function(){var e=o((0,c.useState)(!1),2),t=(e[0],e[1]),n=o((0,c.useState)(null),2),r=(n[0],n[1]);(0,c.useEffect)((function(){LC.onAuthStateChanged((function(e){r(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),t(!0)}))}),[]);return(0,me.jsx)("div",{children:(0,me.jsx)(FC,{})})},jC=n.p+"static/media/none.9c8bd44cd1c64ba419c3.png",BC=n.p+"static/media/dyslexia.69c32ee6eb7286d3451b.jpg",qC=function(e){var t=e.reserveObj;e.isOwner;return(0,me.jsx)(me.Fragment,{children:(0,me.jsxs)("div",{className:"reserve_all",children:["\xa0 ",(0,me.jsxs)("b",{children:["\uc608\uc57d\ubc88\ud638 : ",t.createdAt]}),(0,me.jsxs)("div",{className:"reserve_title",children:[(0,me.jsx)("br",{}),"\uc608\uc57d\ub0a0\uc9dc : ",t.date," ",(0,me.jsx)("br",{}),(0,me.jsxs)("h4",{children:[t.userName,"\ub2d8\uc758 \ub09c\ub3c5\uc99d \ud14c\uc2a4\ud2b8 \uacb0\uacfc ",(0,me.jsx)("span",{id:"reserve_return",children:t.test}),"\uc785\ub2c8\ub2e4."]})]}),(0,me.jsxs)("div",{className:"reserve_img",children:[(0,me.jsxs)("div",{className:"reserve_detailimg",children:[(0,me.jsx)("img",{src:"img/dyslexia.jpg",className:"reserve_dy",onError:function(e){e.target.src=BC}}),(0,me.jsx)("p",{children:"[\ub09c\ub3c5\uc99d]"})]}),(0,me.jsxs)("div",{className:"reserve_detailimg",children:[(0,me.jsx)("img",{src:t.attachmentUrl,className:"reserve_dy",onError:function(e){e.target.src=jC}}),(0,me.jsxs)("p",{children:["[",t.userName,"\ub2d8]"]})]})]})]})})};var zC=function(e){var t=e.refreshUser,n=e.userObj,r=ue(),i=o((0,c.useState)(n.displayName),2),a=i[0],u=i[1],s=o((0,c.useState)(""),2),l=s[0],f=s[1],h=o((0,c.useState)(""),2),d=h[0],p=h[1],v=o((0,c.useState)(""),2),y=v[0],m=v[1],g=function(){var e=wt(yt().mark((function e(t){var r,i,a,o,u;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==d){e.next=2;break}return e.abrupt("return");case 2:if(t.preventDefault(),r=Date.now(),i="https://firebasestorage.googleapis.com/v0/b/dyslexia-discrimination-test.appspot.com/o/image%2F".concat(r,"%2Fimg.png?alt=media"),""===l){e.next=13;break}return a=UC.ref().child("".concat(r,"/img")),e.next=9,a.putString(l,"data_url");case 9:return o=e.sent,e.next=12,o.ref.getDownloadURL();case 12:i=e.sent;case 13:return"\uc544\uc9c1 \uc5c6\uc74c",u={date:d,createdAt:r,creatorId:n.uid,userName:n.displayName,test:"\uc544\uc9c1 \uc5c6\uc74c",attachmentUrl:i},e.next=17,MC.collection("reserve").add(u);case 17:p(""),f(""),m(u.creatorId);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=wt(yt().mark((function e(r){return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n.displayName===a){e.next=5;break}return e.next=4,n.updateProfile({displayName:a});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=o((0,c.useState)([]),2),b=w[0],_=w[1];return(0,c.useEffect)((function(){MC.collection("reserve").onSnapshot((function(e){var t=e.docs.map((function(e){return Ot({id:e.id},e.data())}));_(t)}))}),[]),console.log(y),console.log(b),(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("br",{}),(0,me.jsxs)("div",{className:"my_main",children:[(0,me.jsx)("div",{children:(0,me.jsxs)("form",{onSubmit:k,className:"my_name",children:[(0,me.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",autoFocus:!0,placeholder:"\uc774\ub984",value:a,className:"my_text"}),(0,me.jsx)("input",{type:"submit",value:"\ud655\uc778",className:"my_button"})]})}),(0,me.jsx)("div",{children:(0,me.jsx)("form",{onSubmit:g,children:(0,me.jsxs)("div",{className:"my_reserve",children:[(0,me.jsx)("br",{}),(0,me.jsx)("input",{value:d,className:"my_date",onChange:function(e){var t=e.target.value;p(t)},type:"date"}),(0,me.jsx)("input",{className:"my_button",type:"submit",value:"\uc608\uc57d\ud558\uae30"})]})})})]}),(0,me.jsx)("br",{}),(0,me.jsx)("div",{children:b.map((function(e){if(e.creatorId===n.uid)return(0,me.jsx)(qC,{reserveObj:e,isOwner:e.creatorId===n.uid},e.id)}))}),(0,me.jsx)("div",{className:"all_button_space",children:(0,me.jsx)("button",{className:"all_button",onClick:function(){LC.signOut(),r.push("/")},children:"Log Out"})})]})},KC=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObj;return(0,me.jsx)(se,{children:(0,me.jsx)(ae,{children:(0,me.jsx)(me.Fragment,{children:n?(0,me.jsx)(zC,{userObj:r,refreshUser:t}):(0,me.jsx)(me.Fragment,{children:(0,me.jsx)(VC,{})})})})})};var GC=function(){var e=o((0,c.useState)(!1),2),t=e[0],n=e[1],r=o((0,c.useState)(null),2),i=r[0],a=r[1];return ue(),(0,c.useEffect)((function(){LC.onAuthStateChanged((function(e){a(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),n(!0)}))}),[]),(0,me.jsx)(me.Fragment,{children:t?(0,me.jsx)(KC,{refreshUser:function(){var e=LC.currentUser;a({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(i),userObj:i}):(0,me.jsx)(me.Fragment,{})})};var HC=function(){var e=o((0,c.useState)(!1),2),t=(e[0],e[1]),n=o((0,c.useState)(null),2),r=(n[0],n[1]);return(0,c.useEffect)((function(){LC.onAuthStateChanged((function(e){r(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),t(!0)}))}),[]),(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)("div",{className:"all_button_space",children:[(0,me.jsx)(pe,{to:"/",children:(0,me.jsx)("button",{className:"all_button",children:"Home"})}),(0,me.jsx)(pe,{to:"/log",children:(0,me.jsx)("button",{className:"all_button",children:"User"})})]}),(0,me.jsx)(Z,{exact:!0,path:"/log",children:(0,me.jsx)(GC,{})}),(0,me.jsx)(Z,{exact:!0,path:"/test",children:(0,me.jsx)(ge,{})}),(0,me.jsx)(Z,{exact:!0,path:"/",children:(0,me.jsx)(Ie,{})})]})};n(164).render((0,me.jsx)(c.StrictMode,{children:(0,me.jsx)(se,{children:(0,me.jsx)(HC,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.7c314747.js.map